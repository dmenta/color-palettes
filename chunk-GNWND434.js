import{b as Q,c as X,d as Z,e as ee,f as oe,g as te,h as ne,i as ie,m as E,n as re,o as P,p as le,q as ae,r as se}from"./chunk-6A3WXWDW.js";import{B as K,Da as d,H as _,Ib as L,Ja as a,Jb as w,K as $,Kb as V,Lb as G,Mb as S,Na as g,Nb as f,Ob as M,Pb as U,Sa as r,Sb as T,Ta as i,Tb as D,Ua as c,Va as I,Wb as Y,Xa as v,Xb as q,Y as z,Ya as p,Yb as F,Z as y,Zb as x,ca as N,cb as b,db as u,ga as J,ia as h,kb as W,qa as s,u as j,y as B,za as C}from"./chunk-GI7T4GG4.js";function ue(n,o){if(n&1&&(r(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),u(6,"Height "),i(),c(7,"input",7),i(),r(8,"div"),c(9,"zz-toggle-check",8),i()(),r(10,"div",9)(11,"div",5)(12,"label",10),u(13," Steps "),i(),c(14,"input",11),i(),r(15,"div"),c(16,"zz-toggle-check",12),i()(),r(17,"div",13)(18,"label",14),u(19,"Values"),i(),c(20,"zz-select",15,0),i()()()()),n&2){let e=b(21),t=p();a("formGroup",t.configGroup),s(7),a("zzDisabled",t.configGroup.controls.alto.disabled)("min",1)("max",180),s(2),a("before",!0),s(5),a("zzDisabled",t.configGroup.controls.pasos.disabled)("min",2)("max",100),s(2),a("before",!0),s(2),a("for",e),s(2),a("items",t.showValuesOptions)}}var A=class n{configGroup=void 0;axisConfigChange=new N;showValuesOptions=[{text:"No",value:"no"},{text:"Yes",value:"yes"},{text:"RGB",value:"rgb"}];ngOnInit(){this.configGroup=new S({alto:new f(100,{nonNullable:!0,validators:[w.min(1),w.max(180)]}),continuo:new f(!1,{nonNullable:!0}),pasos:new f(12,{nonNullable:!0,validators:[w.min(2),w.max(100)]}),automatico:new f(!0,{nonNullable:!0}),showValues:new f(this.showValuesOptions[0],{nonNullable:!0})}),this.configGroup.valueChanges.pipe(B(30),K((o,e)=>JSON.stringify(o)===JSON.stringify(e)),_(this.configGroup.value)).subscribe(o=>{let e=this.configGroup?.controls;e&&this.configGroup?.valid&&this.axisConfigChange.emit({alto:o.alto??e.alto.value,continuo:o.continuo??e.continuo.value,pasos:o.pasos??e.pasos.value,automatico:o.automatico??e.automatico.value,showValues:o.showValues?.value??e.showValues.value.value})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["zz-color-axis-config"]],outputs:{axisConfigChange:"axisConfigChange"},decls:1,vars:1,consts:[["showValues",""],[1,"h-fit","w-full","text-smaller",2,"line-height","0.9rem",3,"formGroup"],["zz-panel","",1,"p-4","h-fit","w-full"],[1,"space-y-4"],[1,"flex","flex-rowitems-center","justify-between"],[1,"flex","flex-row","items-center","justify-between","w-28"],["for","alto"],["type","number","id","alto","zz-input","","formControlName","alto","value","10",3,"zzDisabled","min","max"],["formControlName","continuo","label","Continuo",3,"before"],[1,"flex","flex-row","items-center","justify-between"],["for","pasos"],["type","number","id","pasos","zz-input","","formControlName","pasos","value","10",3,"zzDisabled","min","max"],["formControlName","automatico","label","Auto",3,"before"],[1,"flex","flex-row","items-center","justify-between","w-34"],[3,"for"],["displayKey","text","formControlName","showValues",1,"w-20",3,"items"]],template:function(e,t){e&1&&d(0,ue,22,11,"form",1),e&2&&g(t.configGroup?0:-1)},dependencies:[F,M,L,U,V,G,q,Y,x,T,D,E,re,ie,P],encapsulation:2})};function fe(n,o){if(n&1&&(r(0,"form",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label",6),u(5,"Model"),i(),c(6,"zz-select",7,0),i(),r(8,"div",5)(9,"label",6),u(10,"Variable"),i(),c(11,"zz-select",8,1),i()()()()),n&2){let e=b(7),t=b(12),l=p();a("formGroup",l.configGroup),s(4),a("for",e.selectId),s(2),a("upperCase",!0)("items",l.models),s(3),a("for",t.selectId),s(2),a("items",l.configGroup.controls.model.value.components)}}var k=class n{models=Q;variableSelection=J(!0);configGroup=void 0;colorConfigChange=new N;ngOnInit(){let o=X.oklch;this.configGroup=new S({model:new f(o,{nonNullable:!0}),variable:new f({value:o.components[o.defaultVariableIndex],disabled:!this.variableSelection()},{nonNullable:!0})}),j(this.configGroup.controls.model.valueChanges.pipe($(e=>{if(e){let t=e.components[e.defaultVariableIndex];this.configGroup?.controls.variable.setValue(t)}})),this.configGroup.controls.variable.valueChanges).pipe(_(this.configGroup.value)).subscribe(()=>{let e=this.configGroup.controls.model.value,t=this.configGroup.controls.variable.value;this.colorConfigChange.emit({model:e,variable:t,variableIndex:e.components.findIndex(l=>l.name===t.name)})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["zz-color-config"]],inputs:{variableSelection:[1,"variableSelection"]},outputs:{colorConfigChange:"colorConfigChange"},decls:1,vars:1,consts:[["colorModel",""],["colorVariable",""],[1,"h-fit","w-full","text-smaller",2,"line-height","0.9rem",3,"formGroup"],["zz-panel","",1,"p-4","h-fit","w-full"],[1,"opacity-80","space-y-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"min-w-14",3,"for"],["displayKey","name","formControlName","model",1,"w-full",3,"upperCase","items"],["displayKey","name","formControlName","variable",1,"w-full",3,"items"]],template:function(e,t){e&1&&d(0,fe,13,6,"form",2),e&2&&g(t.configGroup?0:-1)},dependencies:[F,M,V,G,x,T,D,P,E],encapsulation:2})};var O=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["zz-color-palette-header"]],decls:5,vars:0,consts:[[1,"bg-gris-100/50","dark:bg-gris-800"],[1,"flex","items-center","justify-between","px-8","m-auto","max-w-[1300px]","leading-8"],[1,"text-3xl","m-0","font-museo-moderno","leading-7","text-orange-600","dark:text-orange-500"]],template:function(e,t){e&1&&(r(0,"header",0)(1,"nav",1)(2,"h1",2),u(3,"CoLoRina"),i(),c(4,"zz-dark-mode-toggle"),i()())},dependencies:[se],encapsulation:2})};var Ce=()=>({alto:47,continuo:!0,pasos:60,automatico:!0,showValues:"no"});function de(n,o){if(n&1){let e=I();r(0,"zz-color-range-selector",10),v("colorChange",function(l){z(e);let m=p();return y(m.colorChange(l))})("rangeChange",function(l){z(e);let m=p();return y(m.rangeChange(l))}),i(),c(1,"zz-color-axis",11)}if(n&2){let e=o,t=p();a("color-config",e)("axis-config",W(9,Ce))("color-base",t.colorBase()),s(),a("color-config",e)("axis-config",t.axisConfig())("color-base",t.currentColor())("showClamp",!0)("min",t.minmax()[0])("max",t.minmax()[1])}}function ge(n,o){if(n&1){let e=I();r(0,"zz-color-sample",12),v("newColor",function(l){z(e);let m=p();return y(m.onNewColor(l))}),i()}if(n&2){let e=p();a("height",200)("color-model",o.model)("current-color",e.currentColor())}}var me=class n{colorConfig=h(void 0);axisConfig=h(void 0);colorBase=h([0,0,0]);minmax=h([0,0]);currentColor=h([0,0,0]);configChanged(o){this.axisConfig.set(o)}colorConfigChanged(o){let e=this.colorConfig()?.model.convert(this.currentColor()),t=o.model?.defaultValues()??[0,0,0];if(o.model.name===this.colorConfig()?.model.name&&(t=this.currentColor()),e)switch(o.model.name){case"hsl":t=oe(e);break;case"oklch":t=te(e);break;default:t=ee(e)}this.colorConfig.set(o),this.minmax.set(o.variable?[o.variable.min,o.variable.max]:[0,0]),this.colorBase.set(t),this.currentColor.set(t)}colorChange(o){this.currentColor.set(o)}rangeChange(o){this.minmax.set(o)}onNewColor(o){let e=this.getChannels(o);this.colorBase.set(e),this.currentColor.set(e)}getChannels(o){let e=this.colorConfig()?.model;if(!e||e.name==="rgb")return o;let t=new Z(`rgb(${o[0]} ${o[1]} ${o[2]})`).to(e.name),l=this.ensureCoord(t.coords[0],e.components[0]),m=this.ensureCoord(t.coords[1],e.components[1]),ce=this.ensureCoord(t.coords[2],e.components[2]);return[l,m,ce]}ensureCoord(o,e){let t=Number.isNaN(o)?0:o;return Math.max(0,Math.min(e.max,t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["zz-color-palette"]],decls:12,vars:2,consts:[[1,"w-screen","h-screen","grid","grid-rows-[48px_minmax(500px,_1fr)]"],[1,"h-[calc(100vh-48px)]","overflow-y-auto"],[1,"md:grid","md:grid-cols-[minmax(500px,_1fr)_280px]","w-screen","max-w-[1300px]","mx-auto","p-8","h-[calc(100svh-48px)]","md:gap-8","items-top","flex","flex-col-reverse"],[1,"relative","flex","flex-col"],[1,"flex","flex-col-reverse","gap-4","md:flex-col"],[3,"height","color-model","current-color"],[1,"w-full"],[3,"colorConfigChange"],[1,"w-full","md:block","hidden"],[3,"axisConfigChange"],[3,"colorChange","rangeChange","color-config","axis-config","color-base"],[1,"block","p-6","mt-6",3,"color-config","axis-config","color-base","showClamp","min","max"],[3,"newColor","height","color-model","current-color"]],template:function(e,t){if(e&1&&(r(0,"div",0),c(1,"zz-color-palette-header"),r(2,"main",1)(3,"div",2)(4,"div",3),d(5,de,2,10),i(),r(6,"div",4),d(7,ge,1,3,"zz-color-sample",5),r(8,"div",6)(9,"zz-color-config",7),v("colorConfigChange",function(m){return t.colorConfigChanged(m)}),i()(),r(10,"div",8)(11,"zz-color-axis-config",9),v("axisConfigChange",function(m){return t.configChanged(m)}),i()()()()()()),e&2){let l,m;s(5),g((l=t.colorConfig())?5:-1,l),s(2),g((m=t.colorConfig())?7:-1,m)}},dependencies:[x,ne,ae,le,A,k,O],encapsulation:2})};export{me as ColorPaletteComponent};
