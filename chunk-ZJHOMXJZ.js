import{b as ce,d as de,g as ue,k as he,l as pe,m as me}from"./chunk-AG74TOS6.js";import{$a as re,C as L,Ca as S,L as R,La as x,Na as oe,Q as J,T as P,Ua as m,Va as g,Wa as W,Xa as ie,Z,Za as f,_ as ee,ab as se,bb as ae,db as w,ha as $,ja as z,p as C,ra as N,sa as H,ta as _,u as D,v as I,vb as j,w as V,wa as te,wb as le,xa as ne,z as B}from"./chunk-MLHRJ3PS.js";var ge=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-center","md:justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"hidden","md:flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(e,o){e&1&&(m(0,"header")(1,"div",0)(2,"h1",1),W(3,"zz-marca",2),g(),m(4,"div",3)(5,"a",4),w(6,"Palettes"),g(),W(7,"zz-dark-mode-toggle"),g()()()),e&2&&(_(3),x("format","horizontal"))},dependencies:[ce,he],encapsulation:2,changeDetection:0})};var M=new J("GRADIENT_STATE");var fe=class t{state=P(M);handleSwapShortcut(n){n.preventDefault(),this.swap()}swap(){let n=this.state.startRGBColor(),e=this.state.endRGBColor();this.state.onStartColorChange(e),this.state.onEndColorChange(n)}onColorEndChange(n){this.state.onEndColorChange(n)}onColorStartChange(n){this.state.onStartColorChange(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],hostBindings:function(e,o){e&1&&f("keydown.control.shift.y",function(r){return o.handleSwapShortcut(r)},!1,H)},decls:6,vars:4,consts:[[1,"flex","flex-row","items-center","justify-center","gap-2","w-full"],[1,"shadow-md",3,"color-changing","border","color"],["title","Swap colors (Ctrl+Shift+Y)",1,"shadow-md","w-5","h-5","-mt-1",3,"click"],[1,"font-icons","text-larger-5","leading-5"]],template:function(e,o){e&1&&(m(0,"div",0)(1,"zz-color-selector",1),f("color-changing",function(r){return o.onColorStartChange(r)}),g(),m(2,"button",2),f("click",function(){return o.swap()}),m(3,"span",3),w(4,"swap_horiz"),g()(),m(5,"zz-color-selector",1),f("color-changing",function(r){return o.onColorEndChange(r)}),g()()),e&2&&(_(),x("border","border-current/40")("color",o.state.startRGBColor()),_(4),x("border","border-current/40")("color",o.state.endRGBColor()))},dependencies:[me],encapsulation:2,changeDetection:0})};function dt(t,n,e,o=0){let i=He(t,n),r=ze(t,n),s=Ae(t,n),h=[],c=[];for(let a=0;a<e.length;a++){let d=e[a],p=d.y/100,v=(p*i.range+i.delta).toFixed(3),b=(p*r.range+r.delta).toFixed(3),y=(p*s.range+s.delta).toFixed(1),G=`oklch(${v} ${b} ${y})`;h.push({offset:d.x,color:G}),c.push({offset:d.x,color:de(G).color})}let u=Ie(e);return{stops:h,gradient:ve(h,o,"oklch"),darkMode:ue(h[u].color)==="white",gradientRGB:ve(c,o,"srgb"),rgbStops:c}}function ze(t,n){return{range:n[1]-t[1],delta:t[1]}}function He(t,n){return{range:n[0]-t[0],delta:t[0]}}function Ae(t,n){let e=n[2]-t[2],o=e>180?t[2]+360:t[2];return{range:(e<-180?n[2]+360:n[2])-o,delta:o}}function ve(t,n,e){return`linear-gradient(${n}deg in ${e}, ${t.map(o=>`${o.color} ${o.offset.toFixed(1)}%`).join(", ")})`}function Ie(t){let n=t.map(o=>o.x).filter(o=>o<=50).sort((o,i)=>i-o),e=t.map(o=>o.x).filter(o=>o>50).sort((o,i)=>o-i);return 50-n[0]<e[0]-50?n.length-1:n.length}var Ce=new Date(2025,0,1).valueOf();function be(t,n=0,e={width:1920,height:1080}){let o=document.createElement("canvas");o.width=e.width,o.height=e.height;let i=o.getContext("2d");if(!i){console.error("No se pudo obtener el contexto del canvas");return}let{x1:r,y1:s,x2:h,y2:c}=Se(o.width,o.height,n),u=i.createLinearGradient(r,s,h,c);for(let p=0;p<t.length;p++){let v=t[p];u.addColorStop(v.offset/100,v.color)}i.fillStyle=u,i.beginPath(),i.rect(0,0,o.width,o.height),i.fill();let a=document.createElement("a"),d=o.toDataURL("image/png",1);a.href=d,a.download=`colorina-gradient-${new Date().valueOf()-Ce}.png`,a.click(),a.remove()}function ye(t,n=0){let e=Be(t,n),o=new Blob([e],{type:"image/svg+xml"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`colorina-gradient-${new Date().valueOf()-Ce}.svg`,i.click(),i.remove()}function Be(t,n=0){let i=Math.max(1920,1080),r=Math.min(1920,1080),s=Math.sqrt(1920*1920+1080*1080),{x1:h,y1:c,x2:u,y2:a,hypotenusa:d}=Se(1920,1080,n);d=Math.abs(d);let p=(i-d)/2,v=(r-s)/2,b=t.map(y=>`        <stop offset="${(y.offset/100).toFixed(3)}" style="stop-color:${y.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 1920 1080" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">

    <rect x="${p}" y="${v}" width="${d}" height="${s}"  style=" transform-origin: center center; transform: rotate(${n-90}deg); fill:url(#_Linear1);"/>
    <rect x="0" y="0" width="1920" height="1080" stroke="black" fill="none" />

  <defs>
        <linearGradient id="_Linear1" x1="${p}" y1="0" x2="${d}" y2="0" gradientUnits="userSpaceOnUse" >
${b}
        </linearGradient>
    </defs>
</svg>`}function Se(t,n,e){let o=t/2,i=n/2,r=Math.sin((e+90)*Math.PI*2/360),s=Math.cos((e+90)*Math.PI*2/360),h=Math.sqrt(o*o+i*i),c=h*s,u=Math.abs(i*r),a=h*r,d=Math.abs(o*s);a<-i?a=Math.max(a,-i-d):a>i&&(a=Math.min(a,i+d)),c<-o?c=Math.max(c,-o-u):c>o&&(c=Math.min(c,o+u));let p=Math.sqrt(c*c+a*a)*2;return{x1:o+c,y1:i+a,x2:o-c,y2:i-a,hypotenusa:p}}var we=class t{copyService=P(pe);state=P(M);handleCopyShortcut(n){n.preventDefault(),this.copy()}handleSvgShortcut(n){n.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveAsImage(){be(this.state.gradient().rgbStops,this.state.angleDegrees(),this.displayDimensions())}saveSVG(){ye(this.state.gradient().rgbStops,this.state.angleDegrees())}displayDimensions(){if(!("ontouchstart"in document.documentElement))return{width:1920,height:1080};let e=window.innerWidth??document.documentElement.clientWidth??1920,o=screen.height??window.innerHeight??1080,i=window.devicePixelRatio||1;return{width:Math.floor(e*i),height:Math.floor(o*i)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(e,o){e&1&&f("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,H)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,H)},decls:7,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Save png gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Copy gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"]],template:function(e,o){e&1&&(m(0,"div",0)(1,"button",1),f("click",function(){return o.saveSVG()}),w(2," SVG "),g(),m(3,"button",2),f("click",function(){return o.saveAsImage()}),w(4," PNG "),g(),m(5,"button",3),f("click",function(){return o.copy()}),w(6," COPY "),g()())},encapsulation:2,changeDetection:0})};var l={value:t=>Math.round(t),point:t=>({x:l.value(t.x),y:l.value(t.y)}),bezierCoord:t=>Math.round(t*100)/100},Ge={pointFromEvent:Oe};function Oe(t,n){if(!t)return{x:0,y:0};let e=window.getComputedStyle(t),o=parseFloat(e.paddingLeft.replace("px",""))||0,i=parseFloat(e.paddingTop.replace("px",""))||0,r=t.getBoundingClientRect();if(n instanceof TouchEvent){if(n.touches.length===0)return{x:0,y:0};let s=n.touches[0];return{x:s.clientX-r.left-o,y:s.clientY-r.top-i}}else return{x:n.clientX-r.left-o,y:n.clientY-r.top-i}}function De(t){return{lines:t?"#909090":"#606060",border:t?"#a0a0a0":"#505050",preset:t?"#888888":"#777777",presetHover:t?"#C0C0C0":"#333333",activePreset:t?"#ffffff":"#000000"}}function Pe(t){return{lines:t?"#cccccc":"#202020",tip:t?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:t?"gray":"#d0d0d0"}}var O=2e3,Fe=.7,Le=.9;function _e(t,n,e=100,o=null,i=!1,r=!1){let s=new OffscreenCanvas(e,e),h=s.getContext("2d");if(!h)return;let c=e/O,u=O/2,a={diameter:e,ratio:c,radio:O/2,gridRadio:Fe*u,center:l.value(c*u),presetSize:Le*u,virtualSize:O},d=a.gridRadio*.95,p=je/a.diameter*a.virtualSize,v={size:d,arrowInsetValue:Ye/a.diameter*a.virtualSize,arrowOverflowValue:p,arrowWideValue:Ne/a.diameter*a.virtualSize,arrowTipBase:d-We/a.diameter*a.virtualSize+p,arrowTip:d+p};$e(h,a,o,n,r),Ke(h,n,a,v,i,r);let b=s.transferToImageBitmap();t.transferFromImageBitmap(b)}function $e(t,n,e=null,o=0,i){t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio),0,Math.PI*2),t.lineWidth=1,t.fillStyle="#7A736E33",t.fill(),t.setLineDash([]),t.strokeStyle="transparent";let r=De(i);t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio),0,Math.PI*2),t.moveTo(n.center,n.center),t.strokeStyle=r.border,t.lineWidth=1,t.stroke(),t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio*.2),0,Math.PI*2),t.lineWidth=1,t.strokeStyle=r.lines,t.stroke(),t.strokeStyle=r.lines;for(let s=0;s<=7;s++){let h=Math.PI*2/8*s,c=Math.cos(h),u=Math.sin(h),a=n.gridRadio*c*1.1,d=n.gridRadio*u*1.1,p=a+n.radio,v=d+n.radio,b=a*.75+n.radio,y=d*.75+n.radio;t.beginPath(),t.moveTo(l.value(n.ratio*p),l.value(n.ratio*v)),t.lineTo(l.value(n.ratio*b),l.value(n.ratio*y)),t.lineWidth=1,t.stroke();let G=(s+2)%8*45,A=o===G,E=A?r.activePreset:!A&&e!==null&&e===G?r.presetHover:r.preset,T=c*n.presetSize+n.radio,k=u*n.presetSize+n.radio;t.beginPath(),t.arc(l.value(n.ratio*T),l.value(n.ratio*k),4,0,Math.PI*2),t.fillStyle=E,t.fill()}}var Ne=5,We=14,je=4,Ye=-3;function Ke(t,n,e,o,i,r){let s=Pe(r);t.translate(e.center,e.center),t.rotate((n-180)*Math.PI/180),i&&(t.shadowColor=r?"#303030":"#606060",t.shadowBlur=7,t.shadowOffsetX=3,t.shadowOffsetY=3),t.beginPath(),t.moveTo(0,l.value(e.ratio*o.size)),t.lineTo(0,0),t.strokeStyle=s.lines,t.lineWidth=2,t.stroke(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.fillStyle=s.toe,t.fill(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.strokeStyle=s.lines,t.lineWidth=1,t.stroke(),t.beginPath(),t.moveTo(0,l.value(e.ratio*o.arrowTip)),t.lineTo(l.value(e.ratio*-o.arrowWideValue),l.value(e.ratio*o.arrowTipBase)),t.lineTo(0,l.value(e.ratio*(o.arrowTipBase+o.arrowInsetValue))),t.lineTo(l.value(e.ratio*o.arrowWideValue),l.value(e.ratio*o.arrowTipBase)),t.fillStyle=s.tip,t.closePath(),t.fill(),t.strokeStyle=s.lines,t.lineWidth=2,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.shadowColor="transparent",t.setTransform(1,0,0,1,0,0)}function xe(t,n,e=3){let o=Math.round(t),i=Math.abs(n.x),r=Math.abs(n.y);return Math.sqrt(i*i+r*r)-e<=o}function Ee(t){return t<0?t+360:t>=360?t-360:t}function Me(t,n,e=9){return n.x+e>t.x&&n.x-e<t.x&&n.y+e>t.y&&n.y-e<t.y}var Xe=["canvas"],Te=class t{constructor(n){this.renderer=n;le(()=>{this.dibujar(this.anglesInDegrees(),this.handler(),this.size(),this.darkMode())})}maxMovement=12;radioSizeRatio=.7;presetSizeRatio=.9;canvasMoveSubscription=null;moveSubscription=null;grabHandlerSubscription=null;removeDocumentClickListenerFn=null;removeDocumentTouchEndListenerFn=null;state=P(M);anglesInDegrees=j(()=>this.state.angleDegrees());presetAngles=[];shiftPressed=z(!1);canvasContext=null;handler=z(!1);overPreset=z(null);inside=z(!1);size=$(100);darkMode=$(!1);radius=j(()=>Math.round(this.size()/2));canvas;canvasRealSize=0;get canvasElement(){return this.canvas?.nativeElement}onShiftKeyDown(n){this.shiftPressed()||(this.shiftPressed.set(!0),n.preventDefault())}onShiftKeyUp(n){this.shiftPressed()&&(this.shiftPressed.set(!1),n.preventDefault())}ngAfterViewInit(){this.createPresetAngles(),this.subcribeToEvents(),this.canvasRealSize=this.realSize(),this.dibujar(this.anglesInDegrees())}subcribeToEvents(){this.moveSubscription=I(D(document,"mousemove").pipe(C(e=>e)),D(document,"touchmove",{passive:!1}).pipe(C(e=>e))).pipe(V(()=>this.handler()),R(e=>e.preventDefault()),B(1),C(e=>this.angleDegreesFromPoint(this.pointFromEvent(e))),C(e=>this.calculateAngleMovement(e)),L()).subscribe(e=>{this.state.onAngleDegreesChange(e)});let n=D(this.canvasElement,"mousemove").pipe(C(e=>e),V(()=>!this.handler()),R(e=>e.preventDefault()),B(1),C(e=>{let o=this.radius(),i=this.pointFromEvent(e),r=Math.round(o*this.radioSizeRatio);return xe(r,{x:i.x-o,y:i.y-o},3)?{inside:!0,preset:null}:{inside:!1,preset:this.isOverPreset(i)}}));this.canvasMoveSubscription=I(n,D(this.canvasElement,"mouseleave").pipe(R(e=>e.preventDefault()),C(()=>({inside:!1,preset:null})))).pipe(L((e,o)=>e.inside===o.inside&&e.preset===o.preset)).subscribe(e=>{this.inside.set(e.inside),this.overPreset.set(e.preset)}),this.grabHandlerSubscription=I(D(this.canvasElement,"mousedown").pipe(V(()=>this.inside()||this.overPreset()!==null),C(e=>e)),D(this.canvasElement,"touchstart",{passive:!1}).pipe(C(e=>e))).pipe(V(()=>!this.handler()),R(e=>e.preventDefault()),B(1),C(e=>this.pointFromEvent(e))).subscribe(e=>{this.onGrabHandler(e)})}onDoubleClick(n){this.state.onAngleDegreesChange(0)}onGrabHandler(n){let e=this.isOverPreset(n);if(e!==null){this.state.onAngleDegreesChange(e);return}this.setHandlerSelected()}isOverPreset(n){if(this.inside())return null;for(let e of this.presetAngles)if(Me(e.point,n,14))return e.angle!==this.anglesInDegrees()?e.angle:null;return null}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.handler.set(!1))}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(n){let e=this.radius(),o=(n.x-e)/e,i=(n.y-e)/e;if(Math.abs(o)<.1&&Math.abs(i)<.1)return this.anglesInDegrees();let r=Math.atan2(o,i),s=Math.round(r*180/Math.PI);return s<0&&(s+=360),s}calculateAngleMovement(n){if(this.shiftPressed())return Math.round(n/45)*45;let e=this.anglesInDegrees(),o=Math.min(this.maxMovement,Math.abs(e-n)),i=e-n>180?o:e-n<-180?-o:e<n?o:-o;return Ee(e+i)}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>this.stopTracking()),this.removeDocumentClickListenerFn=this.renderer.listen("document","touchend",()=>this.stopTracking(),{passive:!0})}createPresetAngles(){let n=Math.round(this.size()*this.presetSizeRatio/2),e=Math.round(this.size()/2),o=n*.7071;this.presetAngles.push({angle:0,point:{x:e,y:e+n}}),this.presetAngles.push({angle:45,point:{x:e+o,y:e+o}}),this.presetAngles.push({angle:90,point:{x:e+n,y:e}}),this.presetAngles.push({angle:135,point:{x:e+o,y:e-o}}),this.presetAngles.push({angle:180,point:{x:e,y:e-n}}),this.presetAngles.push({angle:225,point:{x:e-o,y:e-o}}),this.presetAngles.push({angle:270,point:{x:e-n,y:e}}),this.presetAngles.push({angle:315,point:{x:e-o,y:e+o}})}dibujar(n,e=!1,o=this.size(),i=this.darkMode(),r=this.overPreset()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvasElement.getContext("bitmaprenderer"));let s=this.canvasContext;requestAnimationFrame(()=>{_e(s,n,o,r,e,i)})}pointFromEvent(n){let e=Ge.pointFromEvent(this.canvasElement,n);return{x:e.x,y:this.canvasRealSize-e.y}}realSize(){let n=this.canvasElement,e=window.getComputedStyle(n),i=2*(parseFloat(e.paddingBottom.replace("px",""))||0),r=n.getBoundingClientRect();return r.bottom-r.top-i}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.canvasMoveSubscription?.unsubscribe(),this.moveSubscription?.unsubscribe(),this.grabHandlerSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(ne(te))};static \u0275cmp=S({type:t,selectors:[["zz-orientation-compass"]],viewQuery:function(e,o){if(e&1&&re(Xe,5),e&2){let i;se(i=ae())&&(o.canvas=i.first)}},hostBindings:function(e,o){e&1&&f("keydown.shift",function(r){return o.onShiftKeyDown(r)},!1,N)("keyup.shift",function(r){return o.onShiftKeyUp(r)},!1,N)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"rounded-full",3,"dblclick","width","height"]],template:function(e,o){if(e&1){let i=ie();m(0,"div")(1,"canvas",1,0),f("dblclick",function(s){return Z(i),ee(o.onDoubleClick(s))}),g()()}e&2&&(_(),oe("cursor-grabbing",o.handler())("cursor-grab",o.inside())("cursor-pointer",o.overPreset()!==null),x("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var jt={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:6.8,y:120},h2:{x:40,y:193.6}},angle:0},Yt={colors:{start:[249,147,52],center:[249,147,52],end:[7,10,95]},center:{x:800,y:1300},handlers:{h1:{x:250,y:200},h2:{x:350,y:400},h3:{x:1200,y:1200},h4:{x:1700,y:1700}},angle:0};var ke={points:(t,n,e,o=0,i=0,r=1,s=1,h=0,c=0,u=20)=>{u=Math.max(1,u);let a=0,d=l.value(t.h1.x/n*100)+o,p=l.value(t.h2.x/n*100)+o,v=100,b=0,y=l.value(t.h1.y/e*100)+i,G=l.value(t.h2.y/e*100)+i,A=100,F=[];for(let E=0;E<=u;E+=1){let T=E/u,k=(u-E)/u,X=Math.pow(k,3),U=3*Math.pow(k,2)*T,q=3*k*Math.pow(T,2),Q=Math.pow(T,3),Ve=X*a+U*d+q*p+Q*v,Re=X*b+U*y+q*G+Q*A;F.push({x:l.bezierCoord(Ve*r)+h,y:l.bezierCoord(Re*s)+c})}return F},doublePoints:(t,n,e)=>{let o=l.value(n.x),i=l.value(n.y),r=o/e,s=i/e;return ke.points({h1:t.h1,h2:t.h2},o,i,0,0,r,s,0,0,10).concat(ke.points({h1:t.h3,h2:t.h4},e-o,e-i,(o-e)/e*100,(i-e)/e*100,1-r,1-s,o/e*100,i/e*100,10).slice(1))}};export{ge as a,M as b,fe as c,l as d,Ge as e,Me as f,dt as g,we as h,jt as i,Yt as j,ke as k,Te as l};
