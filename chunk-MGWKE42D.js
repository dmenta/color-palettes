import{b as Ce,c as ge,d as he,e as ve,f as be,g as xe,h as _e,i as we,m as P,n as ye,o as R,p as ze,q as Te,r as Ve}from"./chunk-HAMJMTOF.js";import{$a as ie,B as Q,Da as x,H as V,Hb as me,Ja as s,Jb as pe,K,Ka as Z,Kb as T,La as ee,Lb as E,M as J,Mb as N,Na as _,Nb as S,Ob as v,Pb as D,Qb as ue,S as U,Sa as l,Ta as i,Tb as F,Ua as m,Ub as M,Va as z,Wa as oe,Xa as h,Xb as fe,Y as C,Ya as p,Yb as de,Z as g,Za as te,Zb as G,_a as ne,_b as b,ab as re,bb as le,ca as k,cb as w,db as u,eb as ae,ga as W,ha as q,ia as y,jb as se,kb as ce,qa as c,ta as Y,u as L,ua as X,y as $,za as f}from"./chunk-CLI2ESYH.js";var Ee=["valor"],Ne=["*"];function Se(n,o){if(n&1&&u(0),n&2){let e=p();ae(e.label)}}var I=class n{constructor(o){this._elementRef=o}static nextId=0;controlType="toggle-check";id=`${this.controlType}-${n.nextId++}`;input;userAriaDescribedBy;before;get disabled(){return this._disabled}set disabled(o){this._disabled=o}_disabled=!1;get label(){return this._label}set label(o){this._label=o}_label="";get value(){return this._value}set value(o){this._value=o}_value=!1;focused=!1;touched=!1;_renderer=U(Y);writeValue(o){this.input&&this._renderer.setProperty(this.input.nativeElement,"checked",o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this._renderer.setProperty(this._elementRef?.nativeElement,"disabled",o)}onChange=o=>{};onTouched=()=>{};onFocusIn(o){this.focused||(this.focused=!0,this._elementRef.nativeElement.focus())}onFocusOut(o){this._elementRef.nativeElement.contains(o.relatedTarget)||(this.touched=!0,this.focused=!1,this.onTouched())}clickCheckbox(o){this._value=o.target.checked,this.onChange(this._value),o.stopPropagation()}static \u0275fac=function(e){return new(e||n)(X(q))};static \u0275cmp=f({type:n,selectors:[["zz-toggle-check"]],viewQuery:function(e,t){if(e&1&&ie(Ee,7),e&2){let r;re(r=le())&&(t.input=r.first)}},hostVars:1,hostBindings:function(e,t){e&2&&oe("id",t.id)},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],before:"before",disabled:"disabled",label:"label",value:"value"},features:[se([{provide:me,useExisting:J(()=>n),multi:!0}])],ngContentSelectors:Ne,decls:8,vars:4,consts:[["valor",""],[1,"ml-1","flex","items-center","gap-2","group",3,"focusout","focusin"],["zz-focus-ring","",1,"relative","block","h-8","w-14","rounded-full","cursor-pointer","bg-gris-300","transition-colors","[-webkit-tap-highlight-color:_transparent]","has-checked:bg-sky-400","dark:bg-gris-600","dark:has-checked:bg-sky-800"],["type","checkbox",1,"peer","sr-only",3,"click"],[1,"absolute","inset-y-0","start-0","m-1","size-6","rounded-full","bg-white","transition-[inset-inline-start]","peer-checked:start-6","dark:bg-gris-900"],[1,"select-none","cursor-pointer",3,"click"]],template:function(e,t){if(e&1){let r=z();te(),l(0,"div",1),h("focusout",function(d){return C(r),g(t.onFocusOut(d))})("focusin",function(d){return C(r),g(t.onFocusIn(d))}),l(1,"label",2)(2,"input",3,0),h("click",function(d){return C(r),g(t.clickCheckbox(d))}),i(),m(4,"span",4),i(),l(5,"div",5),h("click",function(){C(r);let d=w(3);return g(d.click())}),ne(6,0,null,Se,1,1),i()()}e&2&&(Z("flex-direction",t.before?"row-reverse":"row"),ee("opacity-90",!t.disabled&&!t.value))},dependencies:[b,we],encapsulation:2,changeDetection:0})};function Fe(n,o){if(n&1&&(l(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),u(6,"Height "),i(),m(7,"input",7),i(),l(8,"div"),m(9,"zz-toggle-check",8),i()(),l(10,"div",9)(11,"div",5)(12,"label",10),u(13," Steps "),i(),m(14,"input",11),i(),l(15,"div"),m(16,"zz-toggle-check",12),i()(),l(17,"div",13)(18,"label",14),u(19,"Values"),i(),m(20,"zz-select",15,0),i()()()()),n&2){let e=w(21),t=p();s("formGroup",t.configGroup),c(7),s("zzDisabled",t.configGroup.controls.alto.disabled)("min",1)("max",180),c(2),s("before",!0),c(5),s("zzDisabled",t.configGroup.controls.pasos.disabled)("min",2)("max",100),c(2),s("before",!0),c(2),s("for",e),c(2),s("items",t.showValuesOptions)}}var B=class n{configGroup=void 0;axisConfigChange=new k;showValuesOptions=[{text:"No",value:"no"},{text:"Yes",value:"yes"},{text:"RGB",value:"rgb"}];ngOnInit(){this.configGroup=new S({alto:new v(100,{nonNullable:!0,validators:[T.min(1),T.max(180)]}),continuo:new v(!1,{nonNullable:!0}),pasos:new v(12,{nonNullable:!0,validators:[T.min(2),T.max(100)]}),automatico:new v(!0,{nonNullable:!0}),showValues:new v(this.showValuesOptions[0],{nonNullable:!0})}),this.configGroup.valueChanges.pipe($(30),Q((o,e)=>JSON.stringify(o)===JSON.stringify(e)),V(this.configGroup.value)).subscribe(o=>{let e=this.configGroup?.controls;e&&this.configGroup?.valid&&this.axisConfigChange.emit({alto:o.alto??e.alto.value,continuo:o.continuo??e.continuo.value,pasos:o.pasos??e.pasos.value,automatico:o.automatico??e.automatico.value,showValues:o.showValues?.value??e.showValues.value.value})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["zz-color-axis-config"]],outputs:{axisConfigChange:"axisConfigChange"},decls:1,vars:1,consts:[["showValues",""],[1,"h-fit","w-full","text-smaller",2,"line-height","0.9rem",3,"formGroup"],["zz-panel","",1,"p-4","h-fit","w-full"],[1,"space-y-4"],[1,"flex","flex-rowitems-center","justify-between"],[1,"flex","flex-row","items-center","justify-between","w-28"],["for","alto"],["type","number","id","alto","zz-input","","formControlName","alto","value","10",3,"zzDisabled","min","max"],["formControlName","continuo","label","Continuo",3,"before"],[1,"flex","flex-row","items-center","justify-between"],["for","pasos"],["type","number","id","pasos","zz-input","","formControlName","pasos","value","10",3,"zzDisabled","min","max"],["formControlName","automatico","label","Auto",3,"before"],[1,"flex","flex-row","items-center","justify-between","w-34"],[3,"for"],["displayKey","text","formControlName","showValues",1,"w-20",3,"items"]],template:function(e,t){e&1&&x(0,Fe,22,11,"form",1),e&2&&_(t.configGroup?0:-1)},dependencies:[G,D,pe,ue,E,N,de,fe,b,F,M,P,ye,I,R],encapsulation:2})};function Me(n,o){if(n&1&&(l(0,"form",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label",6),u(5,"Model"),i(),m(6,"zz-select",7,0),i(),l(8,"div",5)(9,"label",6),u(10,"Variable"),i(),m(11,"zz-select",8,1),i()()()()),n&2){let e=w(7),t=w(12),r=p();s("formGroup",r.configGroup),c(4),s("for",e.selectId),c(2),s("upperCase",!0)("items",r.models),c(3),s("for",t.selectId),c(2),s("items",r.configGroup.controls.model.value.components)}}var H=class n{models=Ce;variableSelection=W(!0);configGroup=void 0;colorConfigChange=new k;ngOnInit(){let o=ge.oklch;this.configGroup=new S({model:new v(o,{nonNullable:!0}),variable:new v({value:o.components[o.defaultVariableIndex],disabled:!this.variableSelection()},{nonNullable:!0})}),L(this.configGroup.controls.model.valueChanges.pipe(K(e=>{if(e){let t=e.components[e.defaultVariableIndex];this.configGroup?.controls.variable.setValue(t)}})),this.configGroup.controls.variable.valueChanges).pipe(V(this.configGroup.value)).subscribe(()=>{let e=this.configGroup.controls.model.value,t=this.configGroup.controls.variable.value;this.colorConfigChange.emit({model:e,variable:t,variableIndex:e.components.findIndex(r=>r.name===t.name)})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["zz-color-config"]],inputs:{variableSelection:[1,"variableSelection"]},outputs:{colorConfigChange:"colorConfigChange"},decls:1,vars:1,consts:[["colorModel",""],["colorVariable",""],[1,"h-fit","w-full","text-smaller",2,"line-height","0.9rem",3,"formGroup"],["zz-panel","",1,"p-4","h-fit","w-full"],[1,"opacity-80","space-y-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"min-w-14",3,"for"],["displayKey","name","formControlName","model",1,"w-full",3,"upperCase","items"],["displayKey","name","formControlName","variable",1,"w-full",3,"items"]],template:function(e,t){e&1&&x(0,Me,13,6,"form",2),e&2&&_(t.configGroup?0:-1)},dependencies:[G,D,E,N,b,F,M,R,P],encapsulation:2})};var j=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["zz-color-palette-header"]],decls:5,vars:0,consts:[[1,"bg-gris-100/50","dark:bg-gris-800"],[1,"flex","items-center","justify-between","px-8","m-auto","max-w-[1300px]","leading-8"],[1,"text-3xl","m-0","font-museo-moderno","leading-7","text-orange-600","dark:text-orange-500"]],template:function(e,t){e&1&&(l(0,"header",0)(1,"nav",1)(2,"h1",2),u(3,"CoLoRina"),i(),m(4,"zz-dark-mode-toggle"),i()())},dependencies:[Ve],encapsulation:2})};var Ge=()=>({alto:47,continuo:!0,pasos:60,automatico:!0,showValues:"no"});function Pe(n,o){if(n&1){let e=z();l(0,"zz-color-range-selector",10),h("colorChange",function(r){C(e);let a=p();return g(a.colorChange(r))})("rangeChange",function(r){C(e);let a=p();return g(a.rangeChange(r))}),i(),m(1,"zz-color-axis",11)}if(n&2){let e=o,t=p();s("color-config",e)("axis-config",ce(9,Ge))("color-base",t.colorBase()),c(),s("color-config",e)("axis-config",t.axisConfig())("color-base",t.currentColor())("showClamp",!0)("min",t.minmax()[0])("max",t.minmax()[1])}}function Re(n,o){if(n&1){let e=z();l(0,"zz-color-sample",12),h("newColor",function(r){C(e);let a=p();return g(a.onNewColor(r))}),i()}if(n&2){let e=p();s("height",200)("color-model",o.model)("current-color",e.currentColor())}}var ke=class n{colorConfig=y(void 0);axisConfig=y(void 0);colorBase=y([0,0,0]);minmax=y([0,0]);currentColor=y([0,0,0]);configChanged(o){this.axisConfig.set(o)}colorConfigChanged(o){let e=this.colorConfig()?.model.convert(this.currentColor()),t=o.model?.defaultValues()??[0,0,0];if(o.model.name===this.colorConfig()?.model.name&&(t=this.currentColor()),e)switch(o.model.name){case"hsl":t=be(e);break;case"oklch":t=xe(e);break;default:t=ve(e)}this.colorConfig.set(o),this.minmax.set(o.variable?[o.variable.min,o.variable.max]:[0,0]),this.colorBase.set(t),this.currentColor.set(t)}colorChange(o){this.currentColor.set(o)}rangeChange(o){this.minmax.set(o)}onNewColor(o){let e=this.getChannels(o);this.colorBase.set(e),this.currentColor.set(e)}getChannels(o){let e=this.colorConfig()?.model;if(!e||e.name==="rgb")return o;let t=new he(`rgb(${o[0]} ${o[1]} ${o[2]})`).to(e.name),r=this.ensureCoord(t.coords[0],e.components[0]),a=this.ensureCoord(t.coords[1],e.components[1]),d=this.ensureCoord(t.coords[2],e.components[2]);return[r,a,d]}ensureCoord(o,e){let t=Number.isNaN(o)?0:o;return Math.max(0,Math.min(e.max,t))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["zz-color-palette"]],decls:12,vars:2,consts:[[1,"w-screen","h-screen","grid","grid-rows-[48px_minmax(500px,_1fr)]"],[1,"h-[calc(100vh-48px)]","overflow-y-auto"],[1,"md:grid","md:grid-cols-[minmax(500px,_1fr)_280px]","w-screen","max-w-[1300px]","mx-auto","p-8","h-[calc(100svh-48px)]","md:gap-8","items-top","flex","flex-col-reverse"],[1,"relative","flex","flex-col"],[1,"flex","flex-col-reverse","gap-4","md:flex-col"],[3,"height","color-model","current-color"],[1,"w-full"],[3,"colorConfigChange"],[1,"w-full","md:block","hidden"],[3,"axisConfigChange"],[3,"colorChange","rangeChange","color-config","axis-config","color-base"],[1,"block","p-6","mt-6",3,"color-config","axis-config","color-base","showClamp","min","max"],[3,"newColor","height","color-model","current-color"]],template:function(e,t){if(e&1&&(l(0,"div",0),m(1,"zz-color-palette-header"),l(2,"main",1)(3,"div",2)(4,"div",3),x(5,Pe,2,10),i(),l(6,"div",4),x(7,Re,1,3,"zz-color-sample",5),l(8,"div",6)(9,"zz-color-config",7),h("colorConfigChange",function(a){return t.colorConfigChanged(a)}),i()(),l(10,"div",8)(11,"zz-color-axis-config",9),h("axisConfigChange",function(a){return t.configChanged(a)}),i()()()()()()),e&2){let r,a;c(5),_((r=t.colorConfig())?5:-1,r),c(2),_((a=t.colorConfig())?7:-1,a)}},dependencies:[b,_e,Te,ze,B,H,j],encapsulation:2})};export{ke as ColorPaletteComponent};
