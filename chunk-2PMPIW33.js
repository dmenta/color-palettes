import{a as ke,b as Mt,c as Pt,d as Ie,e as Nt,f as kt,g as It,h as Lt,i as Ge,j as Gt,k as Ot,l as Rt}from"./chunk-7EATYIG4.js";import{$ as Pe,A as m,Aa as Dt,B as ne,C as mt,D as dt,E as ft,F as C,G as v,Ga as Ee,H as J,Ha as Et,I as gt,Ia as ze,J as F,Ja as de,K as T,Ka as fe,L as c,La as Z,M as s,Ma as j,N as r,Na as q,O as u,Oa as z,P,Pa as Q,Q as k,Qa as Fe,R as ht,Ra as zt,S as I,T as $,Ta as R,U as S,Ua as ee,V as H,Va as Ft,W as p,Wa as Tt,Xa as Te,Ya as Le,Z as De,Za as W,_ as Me,_a as G,a as Y,aa as Ct,b as _e,ba as E,ca as x,ea as d,fa as Ne,ga as U,h as le,ha as vt,i as re,ia as ce,j as se,ja as pe,ka as ue,l as ct,la as bt,m as we,ma as xt,na as _t,o as g,oa as me,p as V,pa as nt,q as D,qa as yt,ra as St,t as M,ta as w,u as pt,ua as B,va as it,w as K,wa as f,x as l,y as ut,ya as wt,z as Ve,za as Vt}from"./chunk-YQLJXUXD.js";var ye=.001,L=class{constructor(t,e,o=1,i="",a=100,h=2,b){this.name=t;this.range=e;this.valueStep=o;this.unit=i;this.autoSteps=a;this.templateFn=b?.bind(this)||this.templateFn,o<1&&(this.precision=Math.ceil(Math.log10(1/o))),this.defaultValue=this.average(e),this.axisValues=this.calcAxisValues(e,h)}templateFn=this.template;defaultValue;axisValues;precision=0;convert(t){return this.templateFn(this.clampValue(t))}bestRange(t){let e=At(this.range),o=t>e?this.range.max:t*2-this.range.min;return{min:t<e?this.range.min:t*2-this.range.max,max:o}}calcAxisValues(t,e){let o=(at(t)-2*this.valueStep)/(e-1);return Array.from({length:e},(i,a)=>this.valueStep+t.min+a*o)}template(t){return`${wt(t,"en-US",`1.0-${this.precision}`)}${this.unit}`}average(t){let e=At(t);return Number.parseFloat(e.toFixed(this.precision))}clampValue(t){return t===void 0?this.defaultValue:Math.max(this.range.min,Math.min(this.range.max,t))}},ie=class{constructor(t,e,o=0,i){this.name=t;this.components=e;this.defaultVariableIndex=o;this.templateFn=i?.bind(this)||this.templateFn}templateFn=this.template;template(t){return`${this.name}(${t[0]} ${t[1]} ${t[2]})`}defaultValues(){return[this.components[0].defaultValue,this.components[1].defaultValue,this.components[2].defaultValue]}convert(t){return this.templateFn([this.components[0].convert(t[0]),this.components[1].convert(t[1]),this.components[2].convert(t[2])])}displayValues(t){return this.components.map((e,o)=>({label:e.name.label,value:e.convert(t[o])}))}};function at(n){return n.max-n.min}function At(n){return(n.max+n.min)/2}function $t(n,t){return!(n.colorModelName!==t.colorModelName||n.variable.name.caption!==t.variable.name.caption||n.variable.name.label!==t.variable.name.label||!Oe(n.color,t.color)||Math.abs(n.range.min-t.range.min)>=ye||Math.abs(n.range.max-t.range.max)>=ye)}function Oe(n,t){return Math.abs(n[0]-t[0])<ye&&Math.abs(n[1]-t[1])<ye&&Math.abs(n[2]-t[2])<ye}var ge=[new ie("oklch",[new L({caption:"Lightness",label:"L"},{min:0,max:1},.005,"",35),new L({caption:"Chroma",label:"C"},{min:0,max:.44},.004,"",20),new L({caption:"Hue",label:"H"},{min:-180,max:540},1,"",55,9)]),new ie("hsl",[new L({caption:"Hue",label:"H"},{min:-180,max:540},1,"deg",55,9),new L({caption:"Saturation",label:"S"},{min:0,max:100},1,"%",20),new L({caption:"Lightness",label:"L"},{min:0,max:100},1,"%",35)],2),new ie("rgb",[new L({caption:"Red",label:"R"},{min:0,max:255},1,"",25),new L({caption:"Green",label:"G"},{min:0,max:255},1,"",25),new L({caption:"Blue",label:"B"},{min:0,max:255},1,"",25)]),new ie("hex",[new L({caption:"Red",label:"R"},{min:0,max:255},1,"",25,2,n=>Math.round(n).toString(16).padStart(2,"0").toUpperCase()),new L({caption:"Green",label:"G"},{min:0,max:255},1,"",25,2,n=>Math.round(n).toString(16).padStart(2,"0").toUpperCase()),new L({caption:"Blue",label:"B"},{min:0,max:255},1,"",25,2,n=>Math.round(n).toString(16).padStart(2,"0").toUpperCase())],0,n=>`#${n[0]}${n[1]}${n[2]}`)],O={oklch:ge[0],hsl:ge[1],rgb:ge[2],hex:ge[3]};var Re=O.oklch,Ht={colorConfig:{colorModelName:Re.name,variable:Re.components[2],variableIndex:Re.components.findIndex(n=>n.name.caption===Re.components[2].name.caption),color:{0:.641,1:.161,2:344.6},range:{min:191,max:498}},paletteStepsConfig:{steps:8,automatic:!0},paletteVisualConfig:{height:100,flat:!1,separate:!0},paletteValuesConfig:{showValues:"no"}};var _=class n{store=g(Ee);initialState=this.store.get("color-state")??Ht;_showValuesOptions=[{text:"No",value:"no"},{text:"Yes",value:"yes"},{text:"RGB",value:"rgb"},{text:"HEX",value:"hex"}];colorModel=M(O[this.initialState.colorConfig.colorModelName]);variableConfig=M({variable:this.colorModel().components[this.initialState.colorConfig.variableIndex],variableIndex:this.initialState.colorConfig.variableIndex});range=M(this.initialState.colorConfig.range);get showValuesOptions(){return this._showValuesOptions}currentColor=M(this.initialState.colorConfig.color);colorConfig=M(_e(Y({colorModel:this.colorModel()},this.variableConfig()),{color:this.currentColor(),range:this.range()}));paletteStepsConfig=M(this.initialState.paletteStepsConfig);paletteVisualConfig=M(this.initialState.paletteVisualConfig);paletteValuesConfig=M(this.initialState.paletteValuesConfig);rgb=w(()=>ke(this.colorModel().convert(this.currentColor())).values);currentState=w(()=>({colorConfig:{colorModelName:this.colorModel().name,variable:this.colorConfig().variable,variableIndex:this.colorConfig().variableIndex,color:this.currentColor(),range:this.range()},paletteStepsConfig:this.paletteStepsConfig(),paletteVisualConfig:this.paletteVisualConfig(),paletteValuesConfig:this.paletteValuesConfig()}));palette=w(()=>{let t=_e(Y({},this.colorConfig()),{color:this.currentColor(),range:this.range()}),e=this.paletteStepsConfig(),o=this.currentColor()??t.colorModel.defaultValues(),i=t.range.min,a=t.range.max,h=e?.steps??10;if(e?.automatic??!0){let ae=t.variable;h=Math.min(h,Math.max(2,Math.ceil(Math.abs(a-i)/at(ae.range)*ae.autoSteps)))}let b=(a-i)/(h-1),A=Array.from({length:h},(ae,oe)=>{let Se=i+oe*b,xe=Y({},o);xe[t.variableIndex]=Se;let rt=t.colorModel.convert([xe[0],xe[1],xe[2]]),st=ke(rt);return{valores:xe,color:rt,rgbValues:st.values,rgb:st.color}});if(A.length>0){let ae=A[0].rgbValues;for(let oe=1;oe<A.length;oe++){let Se=A[oe].rgbValues;It(Se,ae)&&(A[oe-1].clamp=!0,A[oe].clamp=!0),ae=Se}}return{model:t.colorModel.name,swatches:A}});constructor(){B(()=>this.store.save("color-state",this.currentState()))}loadPalette(t){let e={variable:O[t.palette.model].components[t.state.colorConfig.variableIndex],variableIndex:t.state.colorConfig.variableIndex};this.paletteStepsConfigChanged(t.state.stepsConfig),this.colorModel.set(O[t.palette.model]),this.variableConfig.set(e),this.currentColor.set(t.state.colorConfig.color),this.range.set(t.state.colorConfig.range),this.colorConfig.set({colorModel:this.colorModel(),variable:this.variableConfig().variable,variableIndex:this.variableConfig().variableIndex,color:this.currentColor(),range:this.range()})}showValuesOption(t){return this._showValuesOptions.find(e=>e.value===t)}colorModelChanged(t){this.onColorModelChanged(t),this.colorConfig.set({colorModel:t,variable:this.variableConfig().variable,variableIndex:this.variableConfig().variableIndex,color:this.currentColor(),range:this.range()})}variableChanged(t){this.onVariableConfigChanged(t,this.currentColor()),this.colorConfig.update(e=>_e(Y({},e),{variable:this.variableConfig().variable,variableIndex:this.variableConfig().variableIndex,color:this.currentColor(),range:this.range()}))}paletteStepsConfigChanged(t){this.paletteStepsConfig.set(t)}paletteVisualConfigChanged(t){this.paletteVisualConfig.set(t)}paletteValuesConfigChanged(t){this.paletteValuesConfig.set(t)}rangeChanged(t){this.range.set(t)}colorChanged(t){this.currentColor.set(t)}colorSelected(t){let e=kt(t,this.colorModel());this.colorConfig.update(o=>_e(Y({},o),{color:e,range:o.variable.bestRange(e[o.variableIndex])}))}currentPaletteInfo(){return{palette:this.palette(),state:{colorConfig:{colorModelName:this.colorModel().name,variable:this.variableConfig().variable,variableIndex:this.variableConfig().variableIndex,color:this.currentColor(),range:this.range()},stepsConfig:this.paletteStepsConfig()}}}onColorModelChanged(t){let e=this.colorModel().convert(this.currentColor()),o=t.defaultValues()??[0,0,0];if(e)switch(t.name){case"hsl":o=Mt(e);break;case"oklch":o=Pt(e);break;default:o=ke(e).values}this.colorModel.set(t),this.onVariableConfigChanged(t.components[t.defaultVariableIndex],o),this.currentColor.set(o)}onVariableConfigChanged(t,e){let o=this.colorModel().components.findIndex(i=>i.name===t.name);this.variableConfig.set({variable:t,variableIndex:o}),this.range.set(t.bestRange(e[o]))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qt=(n,t)=>t.name,Wt=(n,t)=>t.name.caption;function Xt(n,t){if(n&1){let e=I();P(0,"li")(1,"div")(2,"button",2),H("click",function(){let i=V(e).$implicit,a=p(2);return D(a.state.variableChanged(i))}),d(3),k()()()}if(n&2){let e=t.$implicit;p();let o=ue(0),i=p().state.colorConfig().variable.name.caption===e.name.caption;l(),x("selected",i),l(),$("disabled",!o||i),l(),U(" ",e.name.caption," ")}}function Yt(n,t){if(n&1){let e=I();ce(0),P(1,"li")(2,"div")(3,"button",1),H("click",function(){let i=V(e).$implicit,a=p();return D(a.state.colorModelChanged(i))}),d(4),k()(),P(5,"ul"),F(6,Xt,4,4,"li",null,Wt),k()()}if(n&2){let e=t.$implicit,o=pe(p().state.colorConfig().colorModel.name===e.name);l(),x("selected",o),l(2),$("disabled",o),l(),U(" ",e.name," "),l(2),T(e.components)}}var Ae=class n{models=ge.filter(t=>t.name!=="hex");state=g(_);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-color-menu"]],decls:4,vars:0,consts:[[3,"selected"],[1,"py-2","uppercase",3,"click","disabled"],[1,"py-1",3,"click","disabled"]],template:function(e,o){e&1&&(P(0,"nav")(1,"menu"),F(2,Yt,8,5,"li",0,Qt),k()()),e&2&&(l(2),T(o.models))},encapsulation:2,changeDetection:0})};var X=class n{colorModel=f(void 0,{alias:"color-model"});values=f(void 0);get background(){return this.bgColor()??"black"}bgColor=w(()=>{let t=this.colorModel();if(!t)return;let e=this.values()??[0,0,0];return t.convert([e[0],e[1],e[2]])});static \u0275fac=function(e){return new(e||n)};static \u0275dir=ne({type:n,selectors:[["","color-swatch",""]],hostVars:2,hostBindings:function(e,o){e&2&&E("background-color",o.background)},inputs:{colorModel:[1,"color-model","colorModel"],values:[1,"values"]}})},Bt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275dir=ne({type:n,selectors:[["","color-swatch-panel",""]],features:[mt([{directive:X,inputs:["color-model","color-model","values","values"]}])]})};function Jt(n,t){if(n&1&&(P(0,"div",4),d(1),k()),n&2){let e=t.$implicit;l(),vt("",e.label,": ",e.value)}}function Zt(n,t){if(n&1){let e=I();P(0,"div",2),H("click",function(){V(e);let i=p();return D(i.copy())}),P(1,"div",3),F(2,Jt,2,2,"div",4,J),k()()}if(n&2){let e=p();E("color",e.useContrast()?e.contrast():"currentColor"),x("w-[9ch]",e.vertical()),l(),x("flex-col",e.vertical())("gap-2",!e.vertical())("leading-4",e.vertical()),l(),T(e.parts())}}function eo(n,t){if(n&1){let e=I();P(0,"div",5),H("click",function(){V(e);let i=p();return D(i.copy())}),d(1),k()}if(n&2){let e=p();E("color",e.useContrast()?e.contrast():"currentColor"),l(),U(" ",e.full(),`
`)}}var he=class n{copyService=g(Ge);colorModelName=f("rgb",{alias:"color-model-name"});values=f(void 0,{alias:"values",transform:t=>t??[0,0,0]});useContrast=f(!0,{alias:"use-contrast"});vertical=f(!1,{alias:"vertical"});full=w(()=>O[this.colorModelName()].convert(this.values()));parts=w(()=>O[this.colorModelName()].displayValues(this.values()??[0,0,0]));contrast=w(()=>Ie(this.full()));copy(){this.copyService.copy(this.full(),"Color copied!")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-color-values-display"]],inputs:{colorModelName:[1,"color-model-name","colorModelName"],values:[1,"values"],useContrast:[1,"use-contrast","useContrast"],vertical:[1,"vertical"]},decls:2,vars:1,consts:[["title","click to copy",1,"flex","justify-center","font-noto","cursor-copy","group","hover:opacity-100","opacity-85","underline-offset-2",3,"color","w-[9ch]"],["title","click to copy",1,"w-[7ch]","flex","px-1","justify-center","font-noto","cursor-copy","hover:opacity-100","opacity-85","underline-offset-2","hover:underline","decoration-current/70",3,"color"],["title","click to copy",1,"flex","justify-center","font-noto","cursor-copy","group","hover:opacity-100","opacity-85","underline-offset-2",3,"click"],[1,"flex","w-fit"],[1,"group-hover:underline","decoration-current/70"],["title","click to copy",1,"w-[7ch]","flex","px-1","justify-center","font-noto","cursor-copy","hover:opacity-100","opacity-85","underline-offset-2","hover:underline","decoration-current/70",3,"click"]],template:function(e,o){e&1&&C(0,Zt,4,10,"div",0)(1,eo,2,3,"div",1),e&2&&v(o.colorModelName()!=="hex"?0:1)},encapsulation:2,changeDetection:0})};var $e=class n{height=f(120);state=g(_);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-color-sample"]],inputs:{height:[1,"height"]},decls:7,vars:14,consts:[[1,"border-panel","max-w-[25ch]","rounded-lg"],["color-swatch","",1,"text-right","p-4","rounded-lg",3,"color-model","values"],[3,"color-change","color"],[1,"transition-all","text-smaller","justify-center","w-full","min-h-18","max-h-20","py-2","flex","flex-col","items-center","text-md","dark:text-gris-100","text-gris-700"],[1,"whitespace-nowrap","w-[25ch]","text-center","font-semibold",2,"font-variation-settings","'wght' 450",3,"color-model-name","use-contrast","values"],["color-model-name","rgb",1,"opacity-80","text-smaller",2,"line-height","1rem",3,"values","use-contrast"],["color-model-name","hex",1,"opacity-80","text-smaller",2,"line-height","1rem",3,"values","use-contrast"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1)(2,"zz-color-selector",2),S("color-change",function(a){return o.state.colorSelected(a)}),r()(),s(3,"div",3),u(4,"zz-color-values-display",4)(5,"zz-color-values-display",5)(6,"zz-color-values-display",6),r()()),e&2&&(l(),E("height",o.height(),"px"),c("color-model",o.state.colorConfig().colorModel)("values",o.state.currentColor()),l(),c("color",o.state.rgb()),l(2),c("color-model-name",o.state.colorConfig().colorModel.name)("use-contrast",!1)("values",o.state.currentColor()),l(),x("hidden",o.state.colorConfig().colorModel.name==="rgb"),c("values",o.state.rgb())("use-contrast",!1),l(),c("values",o.state.rgb())("use-contrast",!1))},dependencies:[G,X,he,Gt],encapsulation:2,changeDetection:0})};var to=["zz-field-value",""],He=class n{value=f(null);unit="";length;nullValueText="";decimals=0;text=w(()=>{let t=this.value();return t===null?this.nullValueText??"N/A":t.toFixed(this.decimals??0)+(this.unit??"")});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["","zz-field-value",""]],hostAttrs:[1,"select-none","transition-colors"],inputs:{value:[1,"value"],unit:"unit",length:"length",nullValueText:"nullValueText",decimals:"decimals"},attrs:to,decls:1,vars:1,template:function(e,o){e&1&&d(0),e&2&&U("",o.text(),`
`)},encapsulation:2,changeDetection:0})};var Be=class n{controlPressed=M(!1);accent=f(!1);showTrack=f(!0);step=f(1,{alias:"zzStep",transform:t=>Math.max(Math.min(400,t??1),.001)});get stepCorregido(){return this.resolvedStep()}get current(){return this.value()}value=f(0,{alias:"zzValue",transform:t=>Math.max(Math.min(720,t??0),-720)});onControlKeyDown(t){this.controlPressed()||(this.controlPressed.set(!0),t.preventDefault())}onControlKeyUp(t){this.controlPressed()&&(this.controlPressed.set(!1),t.preventDefault())}resolvedStep=w(()=>{let t=this.step();return this.controlPressed()?10*t:t});static \u0275fac=function(e){return new(e||n)};static \u0275dir=ne({type:n,selectors:[["input","type","range","zz-slider",""]],hostVars:6,hostBindings:function(e,o){e&1&&S("keydown.control",function(a){return o.onControlKeyDown(a)})("keyup.control",function(a){return o.onControlKeyUp(a)}),e&2&&($("step",o.stepCorregido)("value",o.current),x("slider-track",o.showTrack())("slider-accent",o.accent()))},inputs:{accent:[1,"accent"],showTrack:[1,"showTrack"],step:[1,"zzStep","step"],value:[1,"zzValue","value"]}})};function oo(n,t){if(n&1&&ht(0,"option",1),n&2){let e=t.$implicit;$("value",e)}}function no(n,t){if(n&1&&(P(0,"datalist",0),F(1,oo,1,1,"option",1,gt),k()),n&2){let e=p();$("id",e.id),l(),T(e.values)}}var je=class n{_values=[];id;set values(t){this._values=t.sort((e,o)=>e-o).reduce((e,o)=>(e.includes(o)||e.push(o),e),[])}get values(){return this._values}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-data-list"]],inputs:{id:"id",values:"values"},decls:1,vars:1,consts:[[3,"id"],[3,"value"]],template:function(e,o){e&1&&C(0,no,3,1,"datalist",0),e&2&&v(o.id?0:-1)},encapsulation:2,changeDetection:0})};var io=()=>[];function ao(n,t){if(n&1){let e=I();s(0,"label",8),S("dblclick",function(){V(e);let i=p(2);return D(i.control.reset())}),d(1),r()}if(n&2){let e=p(2);x("text-right",e.labelsReverse)("opacity-80",e.defaultValue!==void 0&&e.control.value===e.defaultValue),c("for",e.fieldName),l(),U(" ",e.label," ")}}function lo(n,t){if(n&1&&(u(0,"div",9),yt(1,"async")),n&2){let e=p(2);x("opacity-70",e.defaultValue!==void 0&&e.control.value===e.defaultValue),c("value",St(1,6,e.control.valueChanges)??e.control.value)("length",e.valueLength??10)("decimals",e.decimales)("unit",e.unit??"")}}function ro(n,t){if(n&1&&(s(0,"div",2)(1,"div",3)(2,"div"),C(3,ao,2,6,"label",4),r(),C(4,lo,2,8,"div",5),r(),u(5,"input",6,0)(7,"zz-data-list",7),r()),n&2){let e=p();x("flex-col-reverse",!e.labelsAbove),c("formGroup",e.formGroup),l(),x("flex-row-reverse",e.labelsReverse),l(2),v(e.showLabel?3:-1),l(),v(e.showValue?4:-1),l(),c("zzStep",e.step??1)("accent",e.defaultValue!==void 0&&e.control.value!==e.defaultValue)("formControlName",e.fieldName)("zzValue",e.control.value)("showTrack",e.showTrack())("min",e.min)("max",e.max),ft("aria-label","Input for "+e.label)("list",e.fieldName+"-list"),l(2),c("id",e.fieldName+"-list")("values",e.stops??xt(18,io))}}var Ce=class n{constructor(t){this._parentFormGroupDirective=t}fieldName="";labelsAbove=!0;labelsReverse=!1;label="";valueLength;unit="";showTrack=f(!0);min=0;max=10;step=1;stops=[];labelLength;_defaultValue=0;get defaultValue(){return this._defaultValue}set defaultValue(t){this._defaultValue=t}_showLabel=!1;get showLabel(){return this._showLabel&&(this.labelLength??1)>0}set showLabel(t){this._showLabel=t}_showValue=!1;get showValue(){return this._showValue&&(this.valueLength??1)>0}set showValue(t){this._showValue=t}get decimales(){let t=0;if((this.step??1)!==1&&!Number.isInteger(this.step)&&(t=this.step.toString().split(".")[1]?.length??0),(this.min??0)!==0&&!Number.isInteger(this.min)){let e=this.min.toString();t=Math.max(t,e.split(".")[1]?.length??0)}if((this.max??10)!==10&&!Number.isInteger(this.max)){let e=this.max.toString();t=Math.max(t,e.split(".")[1]?.length??0)}return t}get formGroup(){return this._parentFormGroupDirective?.control}get control(){return this._parentFormGroupDirective?.control.controls[this.fieldName]}static \u0275fac=function(e){return new(e||n)(Ve(R,8))};static \u0275cmp=m({type:n,selectors:[["zz-slider-field"]],inputs:{fieldName:"fieldName",labelsAbove:[0,"labels-above","labelsAbove"],labelsReverse:[0,"labels-reverse","labelsReverse"],label:"label",valueLength:"valueLength",unit:"unit",showTrack:[1,"showTrack"],min:"min",max:"max",step:"step",stops:"stops",labelLength:"labelLength",defaultValue:"defaultValue",showLabel:"showLabel",showValue:"showValue"},decls:1,vars:1,consts:[["slider",""],[1,"w-full","p-1","flex","flex-col","select-none",3,"flex-col-reverse","formGroup"],[1,"w-full","p-1","flex","flex-col","select-none",3,"formGroup"],[1,"flex","flex-row","items-base","justify-between"],[1,"transition-colors",3,"for","text-right","opacity-80"],["zz-field-value","",3,"value","length","decimals","unit","opacity-70"],["zz-slider","","type","range",3,"zzStep","accent","formControlName","zzValue","showTrack","min","max"],[3,"id","values"],[1,"transition-colors",3,"dblclick","for"],["zz-field-value","",3,"value","length","decimals","unit"]],template:function(e,o){e&1&&C(0,ro,8,19,"div",1),e&2&&v(o.control?0:-1)},dependencies:[G,de,zt,Z,j,R,ee,Be,He,je,Dt],encapsulation:2,changeDetection:0})};var be=class n{colorConfig=f(void 0,{alias:"color-config"});height=f(30,{transform:t=>{if(t===void 0)return 30;let e=Number.isInteger(t)?t:30;return Math.max(1,Math.min(400,e))}});currentColor=f(void 0,{alias:"current-color"});gradient=void 0;colorSpaces={oklch:"oklch",rgb:"srgb",hsl:"hsl",hex:"srgb"};ngOnInit(){this.gradient=w(()=>{let t=this.colorConfig();if(!t)return"";let e=t.colorModel,o=this.currentColor()??e.defaultValues(),i=100/(t.variable.axisValues.length-1),a=t.variable.axisValues.map((h,b)=>{let A=Y({},o);return A[t.variableIndex]=h,`${e.convert(A)} ${(b*i).toFixed(2)}%`});return`linear-gradient(to right in ${this.colorSpaces[e.name]}, ${a})`})}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ne({type:n,selectors:[["","zz-color-axis",""]],hostVars:4,hostBindings:function(e,o){e&2&&E("height",o.height(),"px")("background",o.gradient())},inputs:{colorConfig:[1,"color-config","colorConfig"],height:[1,"height"],currentColor:[1,"current-color","currentColor"]}})};var jt=(n,t,e)=>[n,t,e];function so(n,t){if(n&1&&(s(0,"div",1),d(1,"arrow_range"),r(),u(2,"zz-slider-field",2)(3,"div",3)(4,"zz-slider-field",4)),n&2){p();let e=ue(1),o=p();l(2),c("showTrack",!1)("min",e.variable.range.min)("max",e.variable.range.max)("step",e.variable.valueStep)("label",e.variable.name.caption)("defaultValue",e.variable.range.max)("stops",me(29,jt,e.variable.range.min,e.variable.defaultValue,e.variable.range.max))("showLabel",!0)("labelLength",10)("unit",e.variable.unit)("showValue",!0)("valueLength",9),l(),c("color-config",e)("current-color",o.currentColor())("height",o.height()),l(),c("showTrack",!1)("labels-above",!1)("labels-reverse",!0)("min",e.variable.range.min)("max",e.variable.range.max)("step",e.variable.valueStep)("label",e.variable.name.caption)("defaultValue",e.variable.range.min)("stops",me(33,jt,e.variable.range.min,e.variable.defaultValue,e.variable.range.max))("showLabel",!1)("labelLength",10)("unit",e.variable.unit)("showValue",!0)("valueLength",9)}}function co(n,t){if(n&1&&(s(0,"form",0),ce(1),C(2,so,5,37),r()),n&2){let e=p();c("formGroup",e.formDual),l();let o=pe(e.state.colorConfig());l(),v(o?2:-1)}}var Ke=class n{valueChangeSubscription=null;state=g(_);currentColor=f(void 0,{alias:"current-color"});height=f(30,{transform:t=>{if(t===void 0)return 30;let e=Number.isInteger(t)?t:30;return Math.max(1,Math.min(400,e))}});rangeChange=new dt;formDual=void 0;constructor(){B(()=>{this.formDual?.patchValue({min:this.state.colorConfig().range.min,max:this.state.colorConfig().range.max},{emitEvent:!0})})}ngOnInit(){this.formDual=new q({min:new z(this.state.colorConfig().range.min,{nonNullable:!0}),max:new z(this.state.colorConfig().range.max,{nonNullable:!0})}),this.valueChangeSubscription=this.formDual.valueChanges.subscribe(t=>{this.rangeChange.emit({min:t.min??this.formDual?.controls.min.value??0,max:t.max??this.formDual?.controls.max.value??0})})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-dual-axis-slider"]],hostAttrs:[1,"block","w-full"],inputs:{currentColor:[1,"current-color","currentColor"],height:[1,"height"]},outputs:{rangeChange:"rangeChange"},decls:1,vars:1,consts:[[1,"relative","select-none",3,"formGroup"],[1,"absolute","left-24","right-24","text-center","top-0","font-icons","text-larger-5","min-w-8","h-10"],["fieldName","max",1,"relative","z-2","font-bold",3,"showTrack","min","max","step","label","defaultValue","stops","showLabel","labelLength","unit","showValue","valueLength"],["zz-color-axis","",1,"-mt-2.5","block","rounded-md","overflow-hidden",3,"color-config","current-color","height"],["fieldName","min",1,"relative","z-2","-mt-2.5","block",3,"showTrack","labels-above","labels-reverse","min","max","step","label","defaultValue","stops","showLabel","labelLength","unit","showValue","valueLength"]],template:function(e,o){e&1&&C(0,co,3,3,"form",0),e&2&&v(o.formDual!==void 0?0:-1)},dependencies:[Ce,be,G,Q,j,R],encapsulation:2,changeDetection:0})};var Kt=(n,t,e)=>[n,t,e],Ut=(n,t,e,o,i)=>({colorModel:n,variable:t,variableIndex:e,color:o,range:i});function po(n,t){if(n&1){let e=I();s(0,"form",1)(1,"div",2)(2,"zz-dual-axis-slider",3),S("rangeChange",function(i){V(e);let a=p();return D(a.onVariableChange(i))}),r(),s(3,"div"),u(4,"zz-slider-field",4)(5,"div",5),r(),s(6,"div"),u(7,"zz-slider-field",6)(8,"div",5),r()()()}if(n&2){let e=t,o=p();c("formGroup",o.configGroup),l(),E("min-height",3*(70+o.height),"px"),l(),x("row-2",e.variableIndex===1)("row-3",e.variableIndex===2),c("current-color",o.state.currentColor())("height",o.height);let i=e.variableIndex===0?1:0,a=e.colorModel.components[i];l(2),c("showTrack",!1)("min",a.range.min)("max",a.range.max)("step",a.valueStep)("label",a.name.caption)("defaultValue",a.defaultValue)("stops",me(39,Kt,a.range.min,a.defaultValue,a.range.max))("showLabel",!0)("labelLength",10)("unit",a.unit)("showValue",!0)("valueLength",9),l(),c("color-config",nt(43,Ut,e.colorModel,a,i,o.state.currentColor(),a.range))("current-color",o.state.currentColor())("height",o.height);let h=e.variableIndex===2?1:2,b=e.colorModel.components[h];l(2),c("showTrack",!1)("min",b.range.min)("max",b.range.max)("step",b.valueStep)("label",b.name.caption)("defaultValue",b.defaultValue)("stops",me(49,Kt,b.range.min,b.defaultValue,b.range.max))("showLabel",!0)("labelLength",10)("unit",b.unit)("showValue",!0)("valueLength",9),l(),c("color-config",nt(53,Ut,e.colorModel,b,h,o.state.currentColor(),b.range))("current-color",o.state.currentColor())("height",o.height)}}var Ue=class n{valueChangeSubscription=null;state=g(_);height=30;indices=[0,1,2];configGroup=void 0;constructor(){B(()=>{let t=this.state.colorConfig(),e=t.color??[0,0,0],o=e[0],i=e[1],a=t.variableIndex;a===0?(o=e[1],i=e[2]):a===1&&(i=e[2]),this.configGroup?.patchValue({v0:o,v1:i,v2:e[t.variableIndex]},{emitEvent:!0})})}ngOnInit(){let t=this.state.colorConfig().color??[0,0,0];this.configGroup=new q({v0:new z(t[0],{nonNullable:!0}),v1:new z(t[1],{nonNullable:!0}),v2:new z(t[2],{nonNullable:!0})}),this.valueChangeSubscription=this.configGroup.valueChanges.subscribe(()=>{let{v0:e,v1:o,v2:i}=this.configGroup?.value??{v0:0,v1:0,v2:0},a=[e,o,i],h=this.state.colorConfig().variableIndex;a[h]=i,h===0?(a[1]=e,a[2]=o):h===1&&(a[2]=o),this.state.colorChanged(a)})}onVariableChange(t){this.state.rangeChanged(t),this.configGroup.patchValue({v2:(t.min+t.max)/2},{emitEvent:!0})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-color-range-selector"]],decls:2,vars:1,consts:[[1,"h-fit",2,"background-color","none !important","border-width","0px !important"],[1,"min-w-fit","h-fit",3,"formGroup"],[1,"grid","grid-rows-3"],[1,"block",3,"rangeChange","current-color","height"],["fieldName","v0",1,"relative","z-2",3,"showTrack","min","max","step","label","defaultValue","stops","showLabel","labelLength","unit","showValue","valueLength"],["zz-color-axis","",1,"-mt-2.5","block","rounded-md","overflow-hidden",3,"color-config","current-color","height"],["fieldName","v1",1,"relative","z-2",3,"showTrack","min","max","step","label","defaultValue","stops","showLabel","labelLength","unit","showValue","valueLength"]],template:function(e,o){if(e&1&&(s(0,"div",0),C(1,po,9,59,"form",1),r()),e&2){let i;l(),v((i=o.state.colorConfig())?1:-1,i)}},dependencies:[Ce,W,Q,j,G,R,be,Ke],encapsulation:2,changeDetection:0})};var uo=n=>({"rounded-lg shadow-md/50  shadow-black":n});function mo(n,t){if(n&1&&(s(0,"div",4),u(1,"zz-color-values-display",5),r()),n&2){let e=p().$implicit,o=ue(3),i=p(3);l(),c("use-contrast",!0)("color-model-name",o.showValues==="rgb"?"rgb":o.showValues==="hex"?"hex":i.colorModel().name)("values",o.showValues==="yes"?e.valores:e.rgbValues)("vertical",!0)}}function fo(n,t){if(n&1&&(s(0,"div",2)(1,"div",3),d(2," \u26A0 "),r(),ce(3),C(4,mo,2,4,"div",4),r()),n&2){let e=t.$implicit,o=t.$index,i=p(2),a=p();c("ngClass",_t(9,uo,!i.flat))("color-model",a.colorModel())("values",e.valores),l(),E("color",a.constrasts()[o]),x("opacity-60",e.clamp),l(2);let h=pe(a.state.paletteValuesConfig());l(),v(h.showValues!=="no"?4:-1)}}function go(n,t){if(n&1&&(s(0,"div",1),F(1,fo,5,11,"div",2,J),r()),n&2){let e=p();E("height",e.height,"px"),x("space-x-1",e.separate),l(),T(t.swatches)}}function ho(n,t){if(n&1&&C(0,go,3,4,"div",0),n&2){let e,o=p();v((e=o.palette())?0:-1,e)}}var qe=class n{state=g(_);palette=f(void 0);constrasts=w(()=>{let t=this.palette();if(!t)return;let e=t.model;if(!e)return;let o=O[e];if(o)return t.swatches.map(i=>{let a=i.valores;return Ie(o.convert(a))})});colorModel=w(()=>{let t=this.palette()?.model;if(t)return O[t]});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-color-palette"]],inputs:{palette:[1,"palette"]},decls:1,vars:1,consts:[[1,"flex","flex-row","justify-between",3,"space-x-1","height"],[1,"flex","flex-row","justify-between"],["color-swatch","",1,"palette-swatch",3,"ngClass","color-model","values"],[1,"text-larger-2","absolute","select-none","bottom-1","right-2","opacity-0","transition-opacity","duration-500","ease-in-out"],[1,"text-smaller-1"],[3,"use-contrast","color-model-name","values","vertical"]],template:function(e,o){if(e&1&&C(0,ho,1,1),e&2){let i;v((i=o.state.paletteVisualConfig())?0:-1,i)}},dependencies:[X,he,Vt],encapsulation:2,changeDetection:0})};function lt(n,t){return!(!vo(n.palette,t.palette)||!Co(n.state,t.state))}function Co(n,t){return!(!$t(n.colorConfig,t.colorConfig)||!_o(n.stepsConfig,t.stepsConfig))}function vo(n,t){return!(n.model!==t.model||!bo(n.swatches,t.swatches))}function bo(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!xo(n[e],t[e]))return!1;return!0}function xo(n,t){return!(!n||!t||!Oe(n.valores,t.valores)||!Oe(n.rgbValues,t.rgbValues)||n.clamp!==t.clamp)}function _o(n,t){return n.steps===t.steps&&n.automatic===t.automatic}var te=class n{store=g(Ee);notificationService=g(Lt);saved=M(this.store.get("saved-palettes")??[]);lockedPalette=M(this.store.get("locked-palette")??void 0);lock(t){let e=this.lockedPalette();if(e&&lt(e,t)){this.notificationService.warn("Already locked!");return}this.store.save("locked-palette",t),this.lockedPalette.set(t),this.notificationService.success("Palette locked!")}unlock(){this.store.delete("locked-palette"),this.lockedPalette.set(void 0)}remove(t){this.saved.update(e=>{let o=[...e];return o.splice(t,1),o}),this.store.save("saved-palettes",this.saved())}save(t){let e=this.saved().findIndex(o=>lt(o,t));if(e>=0){this.notificationService.warn(`Already saved at #${e+1}`);return}this.saved.update(o=>[t,...o].slice(0,100)),this.store.save("saved-palettes",this.saved()),this.notificationService.success("Palette saved!")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qe=class n{baseDate=new Date(2025,0,1).valueOf();store=g(te);state=g(_);copyService=g(Ge);handleCopyShortcut(t){t.preventDefault(),this.copy()}handleSaveShortcut(t){t.preventDefault(),this.save()}handleLockShortcut(t){t.preventDefault(),this.lock()}handleUnlockShortcut(t){t.preventDefault(),this.unlock()}save(){this.store.save(this.state.currentPaletteInfo())}lock(){this.store.lock(this.state.currentPaletteInfo())}unlock(){this.store.unlock()}copy(){let t=this.paletteValues(this.state.palette());this.copyService.copy(t,"Palette colors copied!")}saveSVG(){this.paletteToSVG(this.state.palette().swatches.map(t=>t.rgb))}paletteValues(t){let e=[],o=[],i=[];for(let b of t.swatches)e.push(b.rgb),o.push(Nt(b.rgbValues)),i.push(b.color);let a=i.join(`\r
`),h=o.join(`\r
`);if(a?.startsWith("rgb"))return`${a}\r
\r
${h}`;{let b=e.join(`\r
`);return`${a}\r
\r
${b}\r
\r
${h}`}}paletteToSVG(t,e=40){let o=`<svg xmlns="http://www.w3.org/2000/svg" width="${t.length*e}" height="50">
      <rect width="100%" height="100%" fill="white"/>
      ${t.map((b,A)=>`<rect x="${A*e}" y="0" width="${e}" height="${e}" fill="${b}"/>`).join(`
`)}
    </svg>`,i=new Blob([o],{type:"image/svg+xml"}),a=URL.createObjectURL(i),h=document.createElement("a");h.href=a,h.download=`colorina-palette-${new Date().valueOf()-this.baseDate}.svg`,h.click(),URL.revokeObjectURL(a)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-actions"]],hostBindings:function(e,o){e&1&&S("keydown.control.shift.c",function(a){return o.handleCopyShortcut(a)},K)("keydown.control.shift.s",function(a){return o.handleSaveShortcut(a)},K)("keydown.control.shift.k",function(a){return o.handleLockShortcut(a)},K)("keydown.control.shift.u",function(a){return o.handleUnlockShortcut(a)},K)},decls:11,vars:1,consts:[[1,"flex","items-center"],["title","Unlock palette (Ctrl+Shift+U)",1,"icon-button","not-disabled:text-green-600","dark:not-disabled:text-green-400",3,"click"],["title","Lock palette (Ctrl+Shift+L)",1,"icon-button","not-disabled:text-red-600","dark:not-disabled:text-red-500",3,"click","disabled"],["title","Save palette  (Ctrl+Shift+S)",1,"icon-button",3,"click"],["title","Download palette as SVG (Ctrl+Shift+G)",1,"font-button",3,"click"],["title","Copy palette values (Ctrl+Shift+C)",1,"icon-button",3,"click"]],template:function(e,o){e&1&&(P(0,"div",0)(1,"button",1),H("click",function(){return o.lock()}),d(2," cached "),k(),P(3,"button",2),H("click",function(){return o.unlock()}),d(4," sync_disabled "),k(),P(5,"button",3),H("click",function(){return o.save()}),d(6,"save"),k(),P(7,"button",4),H("click",function(){return o.saveSVG()}),d(8,"SVG"),k(),P(9,"button",5),H("click",function(){return o.copy()}),d(10,"content_copy"),k()()),e&2&&(l(3),$("disabled",o.store.lockedPalette()===void 0))},encapsulation:2,changeDetection:0})};function yo(n,t){if(n&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),d(4,"Steps:"),r(),u(5,"input",4),r(),s(6,"label",5),u(7,"input",6),s(8,"span",7),d(9,"Auto"),r()()()()),n&2){let e=p();c("formGroup",e.configGroup),l(5),c("min",2)("max",100)}}var We=class n{valueChangeSubscription=null;state=g(_);configGroup=void 0;constructor(){B(()=>{let t=this.state.paletteStepsConfig();t.steps!==this.configGroup?.controls.steps.value&&this.configGroup?.controls.steps.setValue(t.steps,{emitEvent:!1}),t.automatic!==this.configGroup?.controls.automatic.value&&this.configGroup?.controls.automatic.setValue(t.automatic,{emitEvent:!1})})}ngOnInit(){let t=this.state.paletteStepsConfig();this.configGroup=new q({steps:new z(t.steps,{nonNullable:!0,validators:[fe.min(2),fe.max(100)]}),automatic:new z(t.automatic,{nonNullable:!0})}),this.valueChangeSubscription=this.configGroup.valueChanges.pipe(le(30),re((e,o)=>e.steps===o.steps&&e.automatic===o.automatic),se(this.configGroup.value)).subscribe(e=>{let o=this.configGroup?.controls;o&&this.configGroup?.valid&&this.state.paletteStepsConfigChanged({steps:e.steps??o.steps.value,automatic:e.automatic??o.automatic.value})})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-steps-config"]],decls:1,vars:1,consts:[[3,"formGroup"],[1,"flex","flex-row","items-center","gap-2"],[1,"flex","flex-row","items-center"],["for","steps",1,"select-none"],["type","number","id","steps","formControlName","steps","value","10",3,"min","max"],[1,"flex","flex-row","items-center","gap-2","select-none","cursor-pointer","has-disabled:cursor-default"],["type","checkbox","formControlName","automatic",1,"peer"],[1,"peer-disabled:opacity-50"]],template:function(e,o){e&1&&C(0,yo,10,3,"form",0),e&2&&v(o.configGroup?0:-1)},dependencies:[W,Q,de,Fe,ze,Z,j,Le,Te,G,R,ee],encapsulation:2,changeDetection:0})};var So=["valor"];function wo(n,t){if(n&1&&(s(0,"option",2),d(1),r()),n&2){let e=t.$implicit,o=p();c("value",e)("selected",o.value&&e[o.displayKey()]===o.value[o.displayKey()]),l(),U(" ",e[o.displayKey()]," ")}}var Xe=class n{constructor(t){this._elementRef=t}trackValue(t,e){let o=e[this.displayKey()]?.toString();return o?t+"-"+o:t.toString()}static nextId=0;controlType="select";valorInput;id=`${this.controlType}-${n.nextId++}`;selectId=`${this.id}-select`;userAriaDescribedBy;items=f([]);displayKey=f.required();upperCase=f(!1);get disabled(){return this._disabled}set disabled(t){this._disabled=t}_disabled=!1;get value(){return this._value}set value(t){this._value=t,this.touched||this.writeValue(t)}_value=void 0;_renderer=g(ut);onValueChange(t){let e=t.target.selectedIndex;this.value=this.items()[e],this.onChange(this._value),t.stopPropagation()}touched=!1;onFocusOut(t){this.touched=!0,this.onTouched?.call(this)}writeValue(t){if(this._value=t,t){let e=t[this.displayKey()],o=this.items().findIndex(a=>a[this.displayKey()]===e);o=o===-1?0:o;let i=this.valorInput?.nativeElement.querySelector(`option:nth-of-type(${o+1})`);this._renderer.setProperty(i,"selected","selected")}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._disabled=t}onChange=t=>{};onTouched=()=>{};static \u0275fac=function(e){return new(e||n)(Ve(pt))};static \u0275cmp=m({type:n,selectors:[["zz-select"]],viewQuery:function(e,o){if(e&1&&De(So,7),e&2){let i;Me(i=Pe())&&(o.valorInput=i.first)}},hostVars:2,hostBindings:function(e,o){e&2&&$("id",o.id)("selectId",o.selectId)},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],items:[1,"items"],displayKey:[1,"displayKey"],upperCase:[1,"upperCase"],disabled:"disabled",value:"value"},features:[bt([{provide:Et,useExisting:ct(()=>n),multi:!0}])],decls:4,vars:4,consts:[["valor",""],[1,"-mb-0.5","py-1","pl-2","pr-1","group","cursor-pointer","transition-all","ease-in-out","text-gris-900","group-focus-within:text-black","dark:bg-gris-900","dark:text-gris-100","group-focus-within:dark:text-white",3,"focusout","change","disabled","id"],[3,"value","selected"]],template:function(e,o){if(e&1){let i=I();s(0,"select",1,0),S("focusout",function(h){return V(i),D(o.onFocusOut(h))})("change",function(h){return V(i),D(o.onValueChange(h))}),F(2,wo,2,3,"option",2,o.trackValue,!0),r()}e&2&&(x("uppercase",o.upperCase()),c("disabled",o.disabled)("id",o.selectId),l(2),T(o.items()))},dependencies:[W,Ft,Tt],encapsulation:2,changeDetection:0})};function Vo(n,t){if(n&1&&(s(0,"form",1)(1,"div",2)(2,"label",3),d(3,"Values:"),r(),u(4,"zz-select",4,0),r()()),n&2){let e=Ct(5),o=p();c("formGroup",o.configGroup),l(2),c("for",e.selectId),l(2),c("items",o.state.showValuesOptions)}}var Ye=class n{valueChangeSubscription=null;state=g(_);configGroup=void 0;ngOnInit(){let t=this.state.paletteValuesConfig(),e=this.state.showValuesOption(t.showValues);this.configGroup=new q({showValues:new z(e,{nonNullable:!0})}),this.valueChangeSubscription=this.configGroup.valueChanges.pipe(le(30),re((o,i)=>o.showValues?.value===i.showValues?.value),se(this.configGroup.value)).subscribe(o=>{let i=this.configGroup?.controls;i&&this.configGroup?.valid&&this.state.paletteValuesConfigChanged({showValues:o.showValues?.value??i.showValues.value.value})})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-values-config"]],decls:1,vars:1,consts:[["showValues",""],[3,"formGroup"],[1,"flex","flex-row","items-center"],[1,"select-none",3,"for"],["displayKey","text","formControlName","showValues",1,"w-16",3,"items"]],template:function(e,o){e&1&&C(0,Vo,6,3,"form",1),e&2&&v(o.configGroup?0:-1)},dependencies:[W,Q,Z,j,G,R,ee,Xe],encapsulation:2,changeDetection:0})};function Do(n,t){if(n&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),d(4,"Height:"),r(),u(5,"input",4),r(),s(6,"label",5),u(7,"input",6),s(8,"span",7),d(9,"Flat"),r()(),s(10,"label",5),u(11,"input",8),s(12,"span",7),d(13,"Separate"),r()()()()),n&2){let e=p();c("formGroup",e.configGroup),l(5),c("min",1)("max",180)}}var Je=class n{valueChangeSubscription=null;state=g(_);configGroup=void 0;ngOnInit(){let t=this.state.paletteVisualConfig();this.configGroup=new q({height:new z(t.height,{nonNullable:!0,validators:[fe.min(1),fe.max(180)]}),flat:new z(t.flat,{nonNullable:!0}),separate:new z(t.separate,{nonNullable:!0})}),this.valueChangeSubscription=this.configGroup.valueChanges.pipe(le(30),re((e,o)=>e.height===o.height&&e.flat===o.flat&&e.separate===o.separate),se(this.configGroup.value)).subscribe(e=>{let o=this.configGroup?.controls;o&&this.configGroup?.valid&&this.state.paletteVisualConfigChanged({height:e.height??o.height.value,flat:e.flat??o.flat.value,separate:e.separate??o.separate.value})})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-visual-config"]],decls:1,vars:1,consts:[[3,"formGroup"],[1,"flex","flex-row","items-center","gap-4"],[1,"flex","flex-row","items-center"],["for","height",1,"select-none"],["type","number","id","height","formControlName","height","value","10",3,"min","max"],[1,"flex","flex-row","items-center","gap-2","select-none","cursor-pointer","has-disabled:cursor-default"],["type","checkbox","formControlName","flat",1,"peer"],[1,"peer-disabled:opacity-50"],["type","checkbox","formControlName","separate",1,"peer"]],template:function(e,o){e&1&&C(0,Do,14,3,"form",0),e&2&&v(o.configGroup?0:-1)},dependencies:[W,Q,de,Fe,ze,Z,j,Le,Te,G,R,ee],encapsulation:2,changeDetection:0})};var Ze=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-menu"]],decls:7,vars:0,consts:[[1,"@container","flex"],[1,"flex","items-center","justify-start","w-full","gap-6","@max-[760px]:items-start","@max-[760px]:flex-col","@max-[760px]:gap-2"],[1,"opacity-90","hover:opacity-100"],[1,"flex","items-center","justify-end","w-full","-mb-0.5","gap-6","@max-[760px]:items-end","@max-[760px]:flex-col","@max-[760px]:gap-2"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1),u(2,"zz-palette-steps-config",2)(3,"zz-palette-visual-config",2),r(),s(4,"div",3),u(5,"zz-palette-values-config",2)(6,"zz-palette-actions"),r()())},dependencies:[We,Je,Ye,Qe],encapsulation:2,changeDetection:0})};function Mo(n,t){if(n&1&&u(0,"div",2),n&2){let e=t.$implicit,o=p(2);c("color-model",o.colorModel())("values",e.valores)}}function Po(n,t){n&1&&(s(0,"div",1),F(1,Mo,1,2,"div",2,J),r()),n&2&&(E("height",24,"px"),l(),T(t.swatches))}var et=class n{palette=f(void 0);colorModel=w(()=>{let t=this.palette()?.model;if(t)return O[t]});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-mini-palette"]],inputs:{palette:[1,"palette"]},decls:1,vars:1,consts:[[1,"flex","flex-row","justify-between",3,"height"],[1,"flex","flex-row","justify-between"],["color-swatch","",1,"palette-swatch",3,"color-model","values"]],template:function(e,o){if(e&1&&C(0,Po,3,2,"div",0),e&2){let i;v((i=o.palette())?0:-1,i)}},dependencies:[X],encapsulation:2,changeDetection:0})};var No=["item"];function ko(n,t){if(n&1){let e=I();s(0,"button",3,0),S("click",function(){let i=V(e).$implicit,a=p();return D(a.paletteClick(i))}),s(2,"div",4)(3,"span",5),d(4),r(),u(5,"zz-mini-palette",6),s(6,"button",7),S("click",function(i){let a=V(e).$index,h=p();return D(h.removePalette(i,a))}),d(7," close "),r()()()}if(n&2){let e=t.$implicit,o=t.$index,i=p();c("disabled",!i.active()),l(4),Ne(o+1),l(),c("palette",e.palette),l(),c("disabled",!i.active())}}var tt=class n{focusedIndex=0;items;active=f(!1);palettes=f([]);paletteSelected=it();paletteRemoved=it();handleDownEvent(t){this.focusedIndex=Math.min(this.focusedIndex+1,this.items.length-1),this.focusItem()}handleUpEvent(t){this.focusedIndex=Math.max(this.focusedIndex-1,0),this.focusItem()}constructor(){B(()=>{this.active()&&(this.focusedIndex=0,this.focusItem())})}paletteClick(t){this.paletteSelected.emit(t)}removePalette(t,e){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),this.paletteRemoved.emit(e)}focusItem(){setTimeout(()=>{this.items.toArray()[this.focusedIndex].nativeElement.focus()},100)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-list"]],viewQuery:function(e,o){if(e&1&&De(No,5),e&2){let i;Me(i=Pe())&&(o.items=i)}},hostBindings:function(e,o){e&1&&S("keydown.arrowdown",function(a){return o.handleDownEvent(a)},K)("keydown.arrowup",function(a){return o.handleUpEvent(a)},K)},inputs:{active:[1,"active"],palettes:[1,"palettes"]},outputs:{paletteSelected:"paletteSelected",paletteRemoved:"paletteRemoved"},decls:3,vars:0,consts:[["item",""],[1,"h-fit","select-none"],[1,"block","w-full",3,"disabled"],[1,"block","w-full",3,"click","disabled"],[1,"last:pb-3","first:pt-3","transition-colors","duration-100","ease-in-out","flex","items-center","gap-2","group","hover:bg-gris-100/50","dark:hover:bg-gris-900/70","px-2","py-1.5"],[1,"transition-opacity","duration-100","ease-in-out","text-smaller-2","group-hover:opacity-100","opacity-85","block","w-3","text-right"],[1,"block","w-full","cursor-pointer","rounded","overflow-hidden",3,"palette"],["title","Remove palette",1,"-mx-1","icon-button","text-larger","group-hover:opacity-100",3,"click","disabled"]],template:function(e,o){e&1&&(s(0,"div",1),F(1,ko,8,4,"button",2,J),r()),e&2&&(l(),T(o.palettes()))},dependencies:[et],encapsulation:2,changeDetection:0})};function Io(n,t){if(n&1){let e=I();s(0,"div",7)(1,"zz-palette-list",8),S("paletteSelected",function(i){V(e);let a=p();return D(a.state.loadPalette(i))})("paletteRemoved",function(i){V(e);let a=p();return D(a.store.remove(i))}),r()()}if(n&2){let e=p();x("collapsable-collapsed",!e.open()),l(),c("active",e.open())("palettes",e.store.saved())}}var ot=class n{store=g(te);state=g(_);abort=void 0;open=M(!1);handleKeyboardEvent(t){t.preventDefault(),this.openState(!this.open())}handleEscapeEvent(t){this.openState(!1)}constructor(){B(()=>{this.store.saved().length===0&&this.openState(!1)})}toggleOpen(t){t.preventDefault(),t.stopImmediatePropagation(),this.openState(!this.open())}openState(t){if(this.abort?.abort(),this.open.set(t),this.open()){this.abort=new AbortController;let e=this.abort.signal;window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:e})}}onClick(t){this.openState(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palette-selector"]],hostBindings:function(e,o){e&1&&S("keydown.control.shift.p",function(a){return o.handleKeyboardEvent(a)},K)("keydown.escape",function(a){return o.handleEscapeEvent(a)},K)},decls:11,vars:5,consts:[[1,"relative"],["type","button",1,"not-disabled:hover:bg-gris-100/50","not-disabled:dark:hover:bg-gris-950/50","px-4","py-1","w-24",3,"click","disabled"],[1,"flex","flex-row","items-center","gap-2","justify-between"],[1,"whitespace-nowrap"],[1,"font-icons"],[1,"collapsable","absolute","top-8","left-0","z-48","rounded","shadow-md/50","shadow-black","max-h-96","overflow-y-auto",3,"collapsable-collapsed"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"],[1,"collapsable","absolute","top-8","left-0","z-48","rounded","shadow-md/50","shadow-black","max-h-96","overflow-y-auto"],[1,"border-panel","block","bg-white","dark:bg-gris-800","w-56",3,"paletteSelected","paletteRemoved","active","palettes"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"button",1),S("click",function(a){return o.toggleOpen(a)}),s(2,"span",2)(3,"span",3),d(4,"Saved palettes "),s(5,"kbd"),d(6,"Ctrl+Shift+P"),r()(),s(7,"span",4),d(8),r()()(),C(9,Io,2,4,"div",5),u(10,"div",6),r()),e&2&&(l(),c("disabled",o.store.saved().length===0),l(7),Ne(o.open()?"arrow_drop_up":"arrow_drop_down"),l(),v(o.store.saved().length>0?9:-1),l(),x("hidden",!o.open()))},dependencies:[tt],encapsulation:2,changeDetection:0})};function Eo(n,t){n&1&&u(0,"zz-color-palette",9),n&2&&c("palette",t.palette)}var qt=class n{drawerOpen=M(!1);state=g(_);store=g(te);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["zz-palettes"]],hostAttrs:["styles","display: block;  height: 100vh;  width: 100vw;  overflow-x: hidden;"],decls:16,vars:3,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[3,"toggleDrawer"],[1,"grid","grid-rows-[minmax(min-content,200px)_auto]","grid-cols-[200px_auto]","lg:grid-cols-[200px_auto_200px]","gap-4","px-6","pt-2","m-auto","max-w-[1600px]","w-screen"],[1,"col-1","lg:col-3","row-1","pt-4"],[1,"block","w-full","h-fit",3,"height"],[1,"col-1","row-2","lg:row-1","lg:pt-4"],[1,"min-w-36","w-full","pt-3","pl-4","pr-0","lg:pr-4","relative","col-2","row-span-2"],[1,"mt-6","mb-4"],[1,"block","pb-4",3,"palette"]],template:function(e,o){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"zz-header",2),S("toggleDrawer",function(){return o.drawerOpen.set(!o.drawerOpen())}),u(3,"zz-palette-selector"),r()(),s(4,"main",3)(5,"div",4),u(6,"zz-color-sample",5),r(),s(7,"div",6),u(8,"zz-color-menu"),r(),s(9,"div",7),u(10,"zz-color-range-selector"),s(11,"div",8),u(12,"zz-palette-menu"),r(),u(13,"zz-color-palette",9),C(14,Eo,1,1,"zz-color-palette",9),r()()(),u(15,"zz-notification")),e&2){let i;l(6),c("height",150),l(7),c("palette",o.state.palette()),l(),v((i=o.store.lockedPalette())?14:-1,i)}},dependencies:[Ae,$e,Ue,qe,Ot,Ze,ot,Rt],encapsulation:2,changeDetection:0})};export{qt as PalettesComponent};
