import{a as me,b as de,d as ue,f as j,g as fe,k as he,l as Ge,m as ze,n as ke}from"./chunk-L5KIDEBN.js";import{$a as le,Ba as C,Ka as f,La as V,Lb as Ce,M as K,Ma as te,Na as ne,Nb as ge,Ob as ve,Pb as ye,Qb as be,R as u,Ra as oe,Rb as we,Sa as ie,Ta as l,Tb as xe,Ua as c,Va as h,Wa as re,Wb as Se,X as w,Xb as _e,Y as x,Ya as v,Z as J,Za as ae,_ as ee,_a as se,a as k,ab as ce,b as I,bc as F,cb as S,ha as N,ja as M,ra as T,sa as d,ub as _,vb as pe}from"./chunk-WEMDZTXW.js";var L=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(t,o){t&1&&(l(0,"header")(1,"div",0)(2,"h1",1),h(3,"zz-marca",2),c(),l(4,"div",3)(5,"a",4),S(6,"Palettes"),c(),h(7,"zz-dark-mode-toggle"),c()()()),t&2&&(d(3),f("format","horizontal"))},dependencies:[de,he],encapsulation:2,changeDetection:0})};var Me=[{value:"to right",icon:"&#x2192;",class:"rotate-90"},{value:"to right bottom",icon:"&#x2198;",class:"rotate-135"},{value:"to bottom",icon:"&#x2193;",class:"rotate-180"},{value:"to left bottom",icon:"&#x2199;",class:"-rotate-135"},{value:"to left",icon:"&#x2190;",class:"-rotate-90"},{value:"to left top",icon:"&#x2196;",class:"-rotate-45"},{value:"to top",icon:"&#x2191;",class:"rotate-0"},{value:"to right top",icon:"&#x2197;",class:"rotate-45"}];var Te={colors:{source:[208,22,130],destination:[37,24,119]},handlers:{point1:{x:20,y:80},point2:{x:40,y:70}},orientation:"to right bottom"};function De(n){let t=n.point1.x,o=n.point2.x,i=100,r=0,a=n.point1.y,p=n.point2.y,z=100,y=[];for(let m=0;m<=1;m+=.05){let P=Math.pow(1-m,3)*0+3*Math.pow(1-m,2)*m*t+3*(1-m)*Math.pow(m,2)*o+Math.pow(m,3)*i,H=Math.pow(1-m,3)*r+3*Math.pow(1-m,2)*m*a+3*(1-m)*Math.pow(m,2)*p+Math.pow(m,3)*z;y.push({x:P,y:H})}return y.push({x:100,y:100}),y}function Pe(n,e,t,o){let i=t.map(s=>s.x).filter(s=>s<=50).sort((s,b)=>b-s),r=t.map(s=>s.x).filter(s=>s>50).sort((s,b)=>s-b),a=0;50-i[0]<r[0]-50?a=i.length-1:a=i.length;let p=e[0]-n[0],z=e[1]-n[1],y=e[2]-n[2],m=n[2]+360-e[2],P=n[2],H=P,A=1;y>m&&(n[2]=n[2]+360,H=P+360,A=-1);let Oe=Math.min(y,m),Ee=n[0],$e=n[1],U="",Y=[],R=[];for(let s=0;s<t.length;s++){let b=t[s].y,X=b*p/100+Ee,W=b*z/100+$e,Q=A*(b*Oe)/100+H;s===a&&(U=`oklch(${X.toFixed(3)} ${W.toFixed(3)} ${Q.toFixed(1)})`);let Z=t[s].x,q=`oklch(${X.toFixed(3)} ${W.toFixed(3)} ${Q.toFixed(1)})`,Re=ue(q).color;R.push({offset:Z,color:Re}),Y.push(`${q} ${Z.toFixed(1)}%`)}return{gradient:`linear-gradient(${o} in oklch, ${Y})`,contrast:fe(U),gradientRGB:`linear-gradient(${o} in srgb, ${R.map(s=>`${s.color} ${s.offset.toFixed(1)}%`).join(", ")})`,pasosRGB:R}}var g=class n{store=u(me);initialState=this.store.get("gradient-state")??Te;orientation=M(this.initialState.orientation);sourceColor=M(this.initialState.colors.source);destinationColor=M(this.initialState.colors.destination);handlers=M(this.initialState.handlers);sourceOklch=_(()=>j(this.rgbText(this.sourceColor())));destinationOklch=_(()=>j(this.rgbText(this.destinationColor())));points=_(()=>De(this.handlers()));gradient=_(()=>Pe(this.sourceOklch(),this.destinationOklch(),this.points(),this.orientation()));currentState=_(()=>({colors:{source:this.sourceColor(),destination:this.destinationColor()},handlers:this.handlers(),orientation:this.orientation()}));constructor(){pe(()=>this.store.save("gradient-state",this.currentState()))}onOrientationChange(e){this.orientation.set(e)}onSourceColorChange(e){this.sourceColor.set(e)}onDestinationColorChange(e){this.destinationColor.set(e)}onHandlersChange(e){this.handlers.set(k({},e))}rgbText(e){return`rgb(${Math.round(e[0])} ${Math.round(e[1])} ${Math.round(e[2])})`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ie=(n,e)=>e.value;function Ne(n,e){if(n&1&&(l(0,"label",3),h(1,"input",4),l(2,"span",5),S(3,"arrow_upward_alt"),c()()),n&2){let t=e.$implicit,o=e.$index,i=ae();te("opacity-100",t.value===i.orientationGroup.value.orientation),f("for","radio"+o),d(),f("value",t.value)("id","radio"+o),d(),ne(t.class)}}var B=class n{orientationsValues=Me;state=u(g);orientationGroup=new ye({orientation:new be(this.state.orientation(),{nonNullable:!0})});ngOnInit(){this.orientationGroup.valueChanges.subscribe(e=>{this.state.onOrientationChange(e.orientation??"to right bottom")})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-orientation-selector"]],decls:4,vars:1,consts:[[3,"formGroup"],[1,"select-none","flex","flex-row","gap-2"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"opacity-100","for"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"for"],["type","radio","formControlName","orientation",1,"hidden",3,"value","id"],[1,"font-icons"]],template:function(t,o){t&1&&(l(0,"form",0)(1,"div",1),oe(2,Ne,4,7,"label",2,Ie),c()()),t&2&&(f("formGroup",o.orientationGroup),d(2),ie(o.orientationsValues))},dependencies:[F,we,Ce,xe,ge,ve,Se,_e],encapsulation:2})};var O=class n{state=u(g);onColorDestinationChange(e){this.state.onDestinationColorChange(e)}onColorSourceChange(e){this.state.onSourceColorChange(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],decls:3,vars:4,consts:[[1,"flex","flex-row","items-center","gap-4","w-full"],[3,"color-change","border","color"]],template:function(t,o){t&1&&(l(0,"div",0)(1,"zz-color-selector",1),v("color-change",function(r){return o.onColorSourceChange(r)}),c(),l(2,"zz-color-selector",1),v("color-change",function(r){return o.onColorDestinationChange(r)}),c()()),t&2&&(d(),f("border","border-current/40")("color",o.state.sourceColor()),d(),f("border","border-current/40")("color",o.state.destinationColor()))},dependencies:[ze],encapsulation:2})};function Le(n,e,t,o,i){let r=new OffscreenCanvas(t,t),a=r.getContext("2d");je(a,t,i);let p=Ae(i),z=Ue(i);Fe(a,{x:0,y:t},e.point1,p.line),He(a,e.point1,p.h1),Fe(a,{x:t,y:0},e.point2,p.line),He(a,e.point2,p.h2),o==="H1"?Ve(a,e.point1,p.h1):o==="H2"&&Ve(a,e.point2,p.h2),a.beginPath(),a.moveTo(0,t),a.strokeStyle=z,a.bezierCurveTo(e.point1.x,e.point1.y,e.point2.x,e.point2.y,t,0),a.lineWidth=2,a.stroke();let y=r.transferToImageBitmap();n.transferFromImageBitmap(y)}function je(n,e,t){let o=Ye(t);n.beginPath(),n.rect(0,0,e,e),n.strokeStyle=o.border,n.lineWidth=1,n.stroke();let i=e/100;n.strokeStyle=o.lines;for(let r=10;r<=90;r+=10)n.beginPath(),n.moveTo(0,r*i),n.lineTo(e,r*i),n.lineWidth=.5,n.stroke(),n.beginPath(),n.moveTo(r*i,0),n.lineTo(r*i,e),n.lineWidth=.5,n.stroke()}function He(n,e,t){n.beginPath(),n.arc(e.x,e.y,5,0,Math.PI*2),n.fillStyle=t,n.fill()}function Ve(n,e,t){n.beginPath(),n.arc(e.x,e.y,7,0,Math.PI*2),n.strokeStyle=t,n.stroke()}function Fe(n,e,t,o){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.strokeStyle=o,n.stroke()}function Ae(n){return{h1:n==="black"?"darkred":"red",h2:n==="black"?"navy":"blue",line:n==="black"?"#405040":"#E0FFE0"}}function Ue(n){return n==="black"?"#303030":"#D0D0D0"}function Ye(n){return{lines:n==="black"?"#606060":"#C0C0C0",border:n==="black"?"#101010":"#F0F0F0"}}var Xe=["canvas"],E=class n{currentHandler=null;lastTimeoutId=null;canvasOffset=30;state=u(g);size=N(200);color=N("black");canvas;onDocumentMouseUp(){this.currentHandler&&this.stopTracking()}ngAfterViewInit(){this.dibujar(this.state.handlers(),this.size())}onMouseDown(e){let t=this.canvas?.nativeElement;if(!t)return;let o=t.getBoundingClientRect();this.setHandlerSelected(e.clientX-o.left,e.clientY-o.top)}onMouseMove(e){if(!this.currentHandler)return;let t=this.canvas?.nativeElement;if(!t)return;let o=t.getBoundingClientRect();this.updateHandlerCoords(e.clientX-o.left,e.clientY-o.top)}updateHandlerCoords(e,t){let o=this.convertXFromCanvas(e),i=this.convertYFromCanvas(t);this.currentHandler==="H1"?this.state.onHandlersChange(I(k({},this.state.handlers()),{point1:{x:o,y:i}})):this.currentHandler==="H2"&&this.state.onHandlersChange(I(k({},this.state.handlers()),{point2:{x:o,y:i}})),this.dibujar(this.state.handlers(),this.size())}onMouseUp(){this.stopTracking()}onMouseLeave(){this.setStopTimeout()}onMouseEnter(){this.currentHandler!==null&&this.clearStopTimeout()}setStopTimeout(){this.currentHandler!==null&&(this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3))}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.currentHandler!==null&&(this.currentHandler=null,this.clearStopTimeout())}setHandlerSelected(e,t){let o=this.convertXFromCanvas(e),i=this.convertYFromCanvas(t),r={x:o,y:i},a=this.state.handlers();if(this.checkCoordsMatch(r,a.point1)){this.currentHandler="H1";return}if(this.checkCoordsMatch(r,a.point2)){this.currentHandler="H2";return}}checkCoordsMatch(e,t){return t.x+6>e.x&&t.x-6<e.x&&t.y+6>e.y&&t.y-6<e.y}convertXFromCanvas(e){let t=this.size();return Math.max(0,Math.min(e-this.canvasOffset,t))/t*100}convertYFromCanvas(e){let t=this.size();return Math.max(0,Math.min(t-e+this.canvasOffset,t))/t*100}convertXToCanvas(e){let t=this.size();return Math.max(0,Math.min(e,100))*t/100}convertYToCanvas(e){let t=this.size();return t-Math.max(0,Math.min(e,t))*t/100}dibujar(e,t=this.size()){let o={point1:{x:this.convertXToCanvas(e.point1.x),y:this.convertYToCanvas(e.point1.y)},point2:{x:this.convertXToCanvas(e.point2.x),y:this.convertYToCanvas(e.point2.y)}},i=this.canvas?.nativeElement.getContext("bitmaprenderer");i&&requestAnimationFrame(()=>{Le(i,o,t,this.currentHandler,this.color())})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-bezier-panel"]],viewQuery:function(t,o){if(t&1&&se(Xe,5),t&2){let i;le(i=ce())&&(o.canvas=i.first)}},hostBindings:function(t,o){t&1&&v("mouseup",function(){return o.onDocumentMouseUp()},!1,T)},inputs:{size:[1,"size"],color:[1,"color"]},decls:3,vars:4,consts:[["canvas",""],["id","canvas",1,"bg-gris-500/20","rounded-lg",3,"mousedown","mousemove","mouseup","mouseleave","mouseenter","width","height"]],template:function(t,o){if(t&1){let i=re();l(0,"div")(1,"canvas",1,0),v("mousedown",function(a){return w(i),x(o.onMouseDown(a))})("mousemove",function(a){return w(i),x(o.onMouseMove(a))})("mouseup",function(){return w(i),x(o.onMouseUp())})("mouseleave",function(){return w(i),x(o.onMouseLeave())})("mouseenter",function(){return w(i),x(o.onMouseEnter())}),c()()}t&2&&(d(),V("padding",o.canvasOffset,"px"),f("width",o.size())("height",o.size()))},encapsulation:2})};var $=class n{copyService=u(Ge);state=u(g);handleCopyShortcut(e){e.preventDefault(),this.copy()}handleSvgShortcut(e){e.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveSVG(){let e=this.toSVG();this.onSaveFile(`colorina-gradient-${new Date().valueOf()}`,"svg",e)}onSaveFile(e,t,o){let i=e+"."+t,r=o,a=new Blob([r],{type:"image/svg+xml"}),p=document.createElement("a");p.href=URL.createObjectURL(a),p.download=i,p.click(),p.remove()}toSVG(){let e=this.state.orientation(),t=0,o=0,i=0,r=0;e.includes("right")&&(o=400),e.includes("left")&&(t=400),e.includes("bottom")&&(r=200),e.includes("top")&&(i=200);let a=this.state.gradient().pasosRGB.map(p=>`        <stop offset="${(p.offset/100).toFixed(3)}" style="stop-color:${p.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 400 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <rect x="0" y="0" width="400" height="200" style="fill:url(#_Linear1);"/>
    <defs>
        <linearGradient id="_Linear1" x1="${t}" y1="${i}" x2="${o}" y2="${r}" gradientUnits="userSpaceOnUse" >
${a}
        </linearGradient>
    </defs>
</svg>`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(t,o){t&1&&v("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,T)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,T)},decls:8,vars:0,consts:[[1,"flex","justify-end","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"icon-button",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 110 63"],["id","S","d","M 5.482,31.319 C2.163,28.001 0.109,23.419 0.109,18.358 C0.109,8.232 8.322,0.024 18.443,0.024 C28.569,0.024 36.782,8.232 36.782,18.358 L26.042,18.358 C26.042,14.164 22.638,10.765 18.443,10.765 C14.249,10.765 10.850,14.164 10.850,18.358 C10.850,20.453 11.701,22.351 13.070,23.721 L13.075,23.721 C14.450,25.101 15.595,25.500 18.443,25.952 L18.443,25.952 C23.509,26.479 28.091,28.006 31.409,31.324 L31.409,31.324 C34.728,34.643 36.782,39.225 36.782,44.286 C36.782,54.412 28.569,62.625 18.443,62.625 C8.322,62.625 0.109,54.412 0.109,44.286 L10.850,44.286 C10.850,48.480 14.249,51.884 18.443,51.884 C22.638,51.884 26.042,48.480 26.042,44.286 C26.042,42.191 25.191,40.298 23.821,38.923 L23.816,38.923 C22.441,37.548 20.468,37.074 18.443,36.697 L18.443,36.692 C13.533,35.939 8.800,34.638 5.482,31.319 L5.482,31.319 L5.482,31.319 Z",2,"fill","currentColor"],["id","V","d","M 73.452,0.024 L60.482,62.625 L49.742,62.625 L36.782,0.024 L47.522,0.024 L55.122,36.687 L62.712,0.024 L73.452,0.024 Z",2,"fill","currentColor"],["id","G","d","M 91.792,25.952 L110.126,25.952 L110.126,44.286 L110.131,44.286 C110.131,54.413 101.918,62.626 91.792,62.626 C81.665,62.626 73.458,54.413 73.458,44.286 L73.458,44.286 L73.458,18.359 L73.453,18.359 C73.453,8.233 81.665,0.025 91.792,0.025 C101.913,0.025 110.126,8.233 110.126,18.359 L99.385,18.359 C99.385,14.169 95.981,10.765 91.792,10.765 C87.597,10.765 84.198,14.169 84.198,18.359 L84.198,44.286 L84.198,44.286 C84.198,48.481 87.597,51.880 91.792,51.880 C95.981,51.880 99.380,48.481 99.385,44.291 L99.385,44.286 L99.385,36.698 L91.792,36.698 L91.792,25.952 L91.792,25.952 Z",2,"fill","currentColor"],["title","Copy gradient (Ctrl+Shift+C)",1,"icon-button",3,"click"]],template:function(t,o){t&1&&(l(0,"div",0)(1,"button",1),v("click",function(){return o.saveSVG()}),J(),l(2,"svg",2),h(3,"path",3)(4,"path",4)(5,"path",5),c()(),ee(),l(6,"button",6),v("click",function(){return o.copy()}),S(7,"content_copy"),c()())},encapsulation:2})};var Be=class n{state=u(g);size=350;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["zz-test-col"]],decls:10,vars:6,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[1,"w-screen","min-h-[calc(100svh_-_50px)]","flex","flex-col","items-center","justify-center","gap-4"],[3,"size","color"],[1,"flex","flex-row","items-center","justify-between","gap-4","w-[350px]"]],template:function(t,o){t&1&&(l(0,"div",0)(1,"div",1),h(2,"zz-gradients-header"),c(),l(3,"main",2),h(4,"zz-bezier-panel",3),l(5,"div",4),h(6,"zz-gradient-colors")(7,"zz-gradient-actions"),c(),h(8,"zz-orientation-selector"),c()(),h(9,"zz-notification")),t&2&&(d(3),V("color",o.state.gradient().contrast)("background",o.state.gradient().gradient),d(),f("size",o.size)("color",o.state.gradient().contrast))},dependencies:[ke,L,F,B,O,E,$],encapsulation:2})};export{Be as BezierGradientComponent};
