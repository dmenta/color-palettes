import{a as pt,d as Y,e as G,i as mt}from"./chunk-7EATYIG4.js";import{$ as ht,A as R,P as b,Q as x,S as rt,T as at,U as A,V as y,Z as ct,_ as lt,ca as dt,d as g,e as v,ea as I,f as _,g as P,h as T,i as z,k as S,n as B,o as M,p as et,q as nt,t as D,ta as j,ua as ut,v as F,w as U,wa as K,x as it,y as ot,z as st}from"./chunk-YQLJXUXD.js";var gt=new B("GRADIENT_ORIENTATION_TOKEN"),ft=new B("GRADIENT_COLORS_TOKEN");var X={image:kt,svg:_t},vt=new Date(2025,0,1).valueOf();function kt(o,n=0,t={width:1920,height:1080},e=""){e=encodeURI(e.trim());let i=document.createElement("canvas");i.width=t.width,i.height=t.height;let s=i.getContext("2d");if(!s)return;let{x1:r,y1:a,x2:l,y2:d}=At(i.width,i.height,n),h=s.createLinearGradient(r,a,l,d);for(let u=0;u<o.length;u++){let m=o[u];h.addColorStop(m.offset/100,m.color)}s.fillStyle=h,s.beginPath(),s.rect(0,0,i.width,i.height),s.fill();let p=document.createElement("a");i.toBlob(u=>{if(u){let m=URL.createObjectURL(u);p.href=m,p.download=`colorina-gradient-${e}${e.length>0?"-":""}${new Date().valueOf()-vt}.png`,p.click(),URL.revokeObjectURL(m)}},"image/png",1)}function _t(o,n=0,t=""){t=encodeURI(t.trim());let e=Tt(o,n),i=new Blob([e],{type:"image/svg+xml"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=`colorina-gradient-${t}${t.length>0?"-":""}${new Date().valueOf()-vt}.svg`,s.click(),s.remove()}function Tt(o,n=0){let{xGrad:i,yGrad:s,gradWidth:r,gradHeight:a}=Rt(1920,1080,n-90);console.log("xGrad",i,"yGrad",s),console.log("xGrad",a,"yGrad",r);let l=o.map(d=>`        <stop offset="${(d.offset/100).toFixed(3)}" style="stop-color:${d.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 1920 1080" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">

    <rect x="${(1920-a)/2}" y="${(1080-r)/2}" width="${a}" height="${r}"  style="fill:url(#_Linear1);transform-origin: center center; transform: rotate(${n-180}deg);"/>
    <rect x="0" y="0" width="1920" height="1080" stroke="black" fill="none" />

  <defs>
        <linearGradient id="_Linear1" x1="0" y1="${(1080-r)/2}" x2="0" y2="${1080-(1080-r)/2}" gradientUnits="userSpaceOnUse" >
${l}
        </linearGradient>
    </defs>
</svg>`}function Rt(o,n,t){let e=Math.sqrt(o/2*o/2+n/2*n/2),i=Math.atan2(n/2,o/2);t=Math.abs(t%360),console.log("angleDegrees",t);let s=t*Math.PI*2/360,r=s+i,a=s-i,l=Math.abs(Math.cos(r)*e),d=Math.abs(Math.sin(r)*e),h=Math.abs(Math.cos(a)*e),p=Math.abs(Math.sin(a)*e),u=Math.max(l,h)*2,m=Math.max(d,p)*2,w=(o-u)/2,C=(n-m)/2,f=u/2,H=Math.cos(s)*f,E=Math.sin(s)*f;return{x:w,y:C,gradWidth:u,gradHeight:m,xGrad:Math.round(Math.abs(H)),yGrad:Math.round(Math.abs(E))}}function At(o,n,t){let e=o/2,i=n/2,s=Math.sin((t+90)*Math.PI*2/360),r=Math.cos((t+90)*Math.PI*2/360),a=Math.sqrt(e*e+i*i),l=a*r,d=Math.abs(i*s),h=a*s,p=Math.abs(e*r);h<-i?h=Math.max(h,-i-p):h>i&&(h=Math.min(h,i+p)),l<-e?l=Math.max(l,-e-d):l>e&&(l=Math.min(l,e+d));let u=Math.sqrt(l*l+h*h)*2;return{x1:e+l,y1:i+h,x2:e-l,y2:i-h,hypotenusa:u}}var bt=class o{copyService=M(mt);state=M(ft);handleCopyShortcut(n){n.preventDefault(),this.copy()}handleSvgShortcut(n){n.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveAsImage(){let n=this.state.startRGBColor(),t=this.state.endRGBColor(),e=this.state.angleDegrees(),i=`${G(n)}_${G(t)}_${e}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;X.image(this.state.gradient().rgbStops,this.state.angleDegrees(),this.displayDimensions(),i)}saveSVG(){let n=this.state.startRGBColor(),t=this.state.endRGBColor(),e=this.state.angleDegrees(),i=`${G(n)}_${G(t)}_${e}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;X.svg(this.state.gradient().rgbStops,this.state.angleDegrees(),i)}displayDimensions(){if(!("ontouchstart"in document.documentElement))return{width:1920,height:1080};let t=window.innerWidth??document.documentElement.clientWidth??1920,e=screen.height??window.innerHeight??1080,i=window.devicePixelRatio||1;return{width:Math.floor(t*i),height:Math.floor(e*i)}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=R({type:o,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(t,e){t&1&&A("keydown.control.shift.c",function(s){return e.handleCopyShortcut(s)},U)("keydown.control.shift.g",function(s){return e.handleSvgShortcut(s)},U)},decls:7,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Save png gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Copy gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"]],template:function(t,e){t&1&&(b(0,"div",0)(1,"button",1),y("click",function(){return e.saveSVG()}),I(2," SVG "),x(),b(3,"button",2),y("click",function(){return e.saveAsImage()}),I(4," PNG "),x(),b(5,"button",3),y("click",function(){return e.copy()}),I(6," COPY "),x()())},encapsulation:2,changeDetection:0})};function xt(o,n,t=3){let e=Math.round(o),i=Math.abs(n.x),s=Math.abs(n.y);return Math.sqrt(i*i+s*s)-t<=e}function yt(o){return o<0?o+360:o>=360?o-360:o}var c={value:o=>Math.round(o),point:o=>({x:c.value(o.x),y:c.value(o.y)}),bezierCoord:o=>Math.round(o*100)/100},wt={pointFromEvent:Vt};function Vt(o,n){if(!o)return{x:0,y:0};let t=window.getComputedStyle(o),e=parseFloat(t.paddingLeft.replace("px",""))||0,i=parseFloat(t.paddingTop.replace("px",""))||0,s=o.getBoundingClientRect();if(n instanceof TouchEvent){if(n.touches.length===0)return{x:0,y:0};let r=n.touches[0];return{x:r.clientX-s.left-e,y:r.clientY-s.top-i}}else return{x:n.clientX-s.left-e,y:n.clientY-s.top-i}}function O(o){return{lines:o?"#909090":"#606060",border:o?"#a9a9a9":"#505050",preset:o?"#888888":"#999999",presetHover:o?"#C0C0C0":"#444444",activePreset:o?"#ffffff":"#000000"}}function Ct(o){return{lines:o?"#cccccc":"#202020",tip:o?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:o?"gray":"#d0d0d0"}}var V=class{constructor(n,t=100,e={x:50,y:50}){this.imageContext=n;this.diameter=t;this.center=e;this.canvas=new OffscreenCanvas(t,t);let i=this.canvas.getContext("2d");i.imageSmoothingQuality="high",i.imageSmoothingEnabled=!0,this.ctx=i,this.ctx.translate(this.center.x,this.center.y),this.gridPaths=new W(t/2),this.arrowPaths=new q(t/2)}ctx;canvas;gridPaths;arrowPaths;draw(n=null,t=0,e=!1,i=!1){this.drawGridSlim(i),this.drawPresetHover(n,i),this.drawPresetActive(t,i),this.drawArrow(t,e,i);let s=this.canvas.transferToImageBitmap();this.imageContext.transferFromImageBitmap(s)}drawArrow(n,t,e){let i=Ct(e);this.ctx.save(),this.ctx.rotate((n-180)*Math.PI/180),this.ctx.save(),t&&(this.ctx.shadowColor=e?"#000000":"#303030",this.ctx.shadowBlur=7,this.ctx.shadowOffsetX=3,this.ctx.shadowOffsetY=3),this.ctx.fillStyle=i.lines,this.ctx.fill(this.arrowPaths.body),this.ctx.restore(),this.ctx.fillStyle=i.tip,this.ctx.fill(this.arrowPaths.tip),this.ctx.restore(),this.ctx.fillStyle=i.toe,this.ctx.fill(this.arrowPaths.toe)}drawGridSlim(n){let{mark:t,preset:e}=this.gridPaths,i=O(n);this.ctx.fillStyle="#7A736E33",this.ctx.fill(this.gridPaths.back),this.ctx.save();let s=8,r=Math.PI*2/s;for(let a=0;a<s;a++)this.ctx.rotate(r),this.ctx.fillStyle=i.lines,this.ctx.fill(t),this.ctx.fillStyle=i.preset,this.ctx.fill(e);this.ctx.restore(),this.ctx.fillStyle=i.border,this.ctx.fill(this.gridPaths.rim)}drawPresetHover(n,t){let e=this.gridPaths.preset,i=O(t);n!==null&&(this.ctx.save(),this.ctx.rotate(Math.PI*2/8*((n-90)/45)),this.ctx.fillStyle=i.presetHover,this.ctx.fill(e),this.ctx.restore())}drawPresetActive(n=0,t){let e=this.gridPaths.preset,i=O(t);(n+90)%45===0&&(this.ctx.save(),this.ctx.rotate(Math.PI*2/8*((n-90)/45)),this.ctx.fillStyle=i.activePreset,this.ctx.fill(e),this.ctx.restore())}},W=class{gridProportions={back:72,rim:{size:72,width:2,inner:16},preset:{radius:6.5,center:90},ticks:{width:3,offset:1.5,inner:62,lenght:18}};back;rim;mark;preset;constructor(n=100){this.back=this.createGridBack(n),this.rim=this.createGridRim(n),this.mark=this.createGridTicks(n),this.preset=this.createGridPreset(n)}createGridBack(n){let t=c.value(n*this.gridProportions.back/100),e=new Path2D;return e.arc(0,0,t,0,Math.PI*2),e.closePath(),e}createGridRim(n){let t=this.gridProportions.rim,e=c.value(n*t.size/100),i=c.value(n*t.width/100),s=c.value(n*t.inner/100),r=new Path2D;return r.arc(0,0,e,0,Math.PI*2),r.arc(0,0,e-i,0,Math.PI*2,!0),r.arc(0,0,s,0,Math.PI*2),r.arc(0,0,s-i,0,Math.PI*2,!0),r.closePath(),r}createGridTicks(n){let t=this.gridProportions.ticks,e=c.value(n*t.width/100),i=c.value(n*t.offset/100),s=c.value(n*t.inner/100),r=c.value(n*t.lenght/100),a=new Path2D;return a.moveTo(s,i),a.rect(s,-i,r,e),a.closePath(),a}createGridPreset(n){let t=this.gridProportions.preset,e=c.value(n*t.radius/100),i=c.value(n*t.center/100),s=new Path2D;return s.moveTo(i,0),s.arc(i,0,e,0,Math.PI*2),s.closePath(),s}},q=class{arrowProportions={axis:1};body;tip;toe;constructor(n=100){let{body:t,tip:e,toe:i}=this.createArrowPaths(n);this.tip=e,this.toe=i,this.body=t}createArrowPaths(n){let t=this.arrowProportions,e=new DOMMatrix([1,0,0,1,-6,-3]),i=new Path2D;i.addPath(new Path2D("M7 6v29l5 4-6 16-6-16 5-4V6c-1.2-.4-2-1.7-2-3 0-1.65 1.35-3 3-3s3 1.35 3 3c0 1.3-.85 2.6-2 3"),e);let s=new Path2D;s.addPath(new Path2D("m6 36.951 4 3-4 10-4-10z"),e);let r=c.value(t.axis*n/100),a=new Path2D;return a.arc(0,0,r,0,Math.PI*2),a.closePath(),{body:i,tip:s,toe:a}}};function Pt(o,n,t=9){return n.x+t>o.x&&n.x-t<o.x&&n.y+t>o.y&&n.y-t<o.y}var $t=["canvas"],St=class o{constructor(n){this.renderer=n;ut(()=>{this.dibujar(this.anglesInDegrees(),this.handler(),this.darkMode(),this.overPreset())})}maxMovement=12;radioSizeRatio=.7;presetSizeRatio=.9;canvasMoveSubscription=null;moveSubscription=null;grabHandlerSubscription=null;removeDocumentClickListenerFn=null;removeDocumentTouchEndListenerFn=null;state=M(gt);anglesInDegrees=j(()=>this.state.angleDegrees());presetAngles=[];shiftPressed=D(!1);drawing=null;handler=D(!1);overPreset=D(null);inside=D(!1);size=K(100);darkMode=K(!1);radius=j(()=>Math.round(this.size()/2));canvas;canvasRealSize=0;get canvasElement(){return this.canvas?.nativeElement}onShiftKeyDown(n){this.shiftPressed()||(this.shiftPressed.set(!0),n.preventDefault())}onShiftKeyUp(n){this.shiftPressed()&&(this.shiftPressed.set(!1),n.preventDefault())}ngAfterViewInit(){this.createPresetAngles(),this.subcribeToEvents(),this.drawing=new V(this.canvas.nativeElement.getContext("bitmaprenderer"),this.size(),{x:this.size()/2,y:this.size()/2}),this.canvasRealSize=this.realSize(),this.dibujar(this.anglesInDegrees())}subcribeToEvents(){this.moveSubscription=_(v(document,"mousemove").pipe(g(t=>t)),v(document,"touchmove",{passive:!1}).pipe(g(t=>t))).pipe(P(()=>this.handler()),S(t=>t.preventDefault()),T(1),g(t=>this.angleDegreesFromPoint(this.pointFromEvent(t))),g(t=>this.calculateAngleMovement(t)),z()).subscribe(t=>{this.state.onAngleDegreesChange(t)});let n=v(this.canvasElement,"mousemove").pipe(g(t=>t),P(()=>!this.handler()),S(t=>t.preventDefault()),T(1),g(t=>{let e=this.radius(),i=this.pointFromEvent(t),s=Math.round(e*this.radioSizeRatio);return xt(s,{x:i.x-e,y:i.y-e},3)?{inside:!0,preset:null}:{inside:!1,preset:this.isOverPreset(i)}}));this.canvasMoveSubscription=_(n,v(this.canvasElement,"mouseleave").pipe(S(t=>t.preventDefault()),g(()=>({inside:!1,preset:null})))).pipe(z((t,e)=>t.inside===e.inside&&t.preset===e.preset)).subscribe(t=>{this.inside.set(t.inside),this.overPreset.set(t.preset)}),this.grabHandlerSubscription=_(v(this.canvasElement,"mousedown").pipe(P(()=>this.inside()||this.overPreset()!==null),g(t=>t)),v(this.canvasElement,"touchstart",{passive:!1}).pipe(g(t=>t))).pipe(P(()=>!this.handler()),S(t=>t.preventDefault()),T(1),g(t=>this.pointFromEvent(t))).subscribe(t=>{this.onGrabHandler(t)})}onDoubleClick(n){this.state.onAngleDegreesChange(0)}onGrabHandler(n){let t=this.isOverPreset(n);if(t!==null){this.state.onAngleDegreesChange(t);return}this.setHandlerSelected()}isOverPreset(n){if(this.inside())return null;for(let t of this.presetAngles)if(Pt(t.point,n,14))return t.angle!==this.anglesInDegrees()?t.angle:null;return null}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.handler.set(!1))}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(n){let t=this.radius(),e=(n.x-t)/t,i=(n.y-t)/t;if(Math.abs(e)<.1&&Math.abs(i)<.1)return this.anglesInDegrees();let s=Math.atan2(e,i),r=Math.round(s*180/Math.PI);return r<0&&(r+=360),r}calculateAngleMovement(n){if(this.shiftPressed())return Math.round(n/45)*45;let t=this.anglesInDegrees(),e=Math.min(this.maxMovement,Math.abs(t-n)),i=t-n>180?e:t-n<-180?-e:t<n?e:-e;return yt(t+i)}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>this.stopTracking()),this.removeDocumentClickListenerFn=this.renderer.listen("document","touchend",()=>this.stopTracking(),{passive:!0})}createPresetAngles(){let n=Math.round(this.size()*this.presetSizeRatio/2),t=Math.round(this.size()/2),e=n*.7071;this.presetAngles.push({angle:0,point:{x:t,y:t+n}}),this.presetAngles.push({angle:45,point:{x:t+e,y:t+e}}),this.presetAngles.push({angle:90,point:{x:t+n,y:t}}),this.presetAngles.push({angle:135,point:{x:t+e,y:t-e}}),this.presetAngles.push({angle:180,point:{x:t,y:t-n}}),this.presetAngles.push({angle:225,point:{x:t-e,y:t-e}}),this.presetAngles.push({angle:270,point:{x:t-n,y:t}}),this.presetAngles.push({angle:315,point:{x:t-e,y:t+e}})}dibujar(n,t=!1,e=this.darkMode(),i=this.overPreset()){if(!this.drawing)return;let s=this.drawing;requestAnimationFrame(()=>{s.draw(i,n,t,e)})}pointFromEvent(n){let t=wt.pointFromEvent(this.canvasElement,n);return{x:t.x,y:this.canvasRealSize-t.y}}realSize(){let n=this.canvasElement,t=window.getComputedStyle(n),i=2*(parseFloat(t.paddingBottom.replace("px",""))||0),s=n.getBoundingClientRect();return s.bottom-s.top-i}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.canvasMoveSubscription?.unsubscribe(),this.moveSubscription?.unsubscribe(),this.grabHandlerSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||o)(st(ot))};static \u0275cmp=R({type:o,selectors:[["zz-orientation-compass"]],viewQuery:function(t,e){if(t&1&&ct($t,5),t&2){let i;lt(i=ht())&&(e.canvas=i.first)}},hostBindings:function(t,e){t&1&&A("keydown.shift",function(s){return e.onShiftKeyDown(s)},F)("keyup.shift",function(s){return e.onShiftKeyUp(s)},F)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"rounded-full",3,"dblclick","width","height"]],template:function(t,e){if(t&1){let i=rt();b(0,"div")(1,"canvas",1,0),y("dblclick",function(r){return et(i),nt(e.onDoubleClick(r))}),x()()}t&2&&(it(),dt("cursor-grabbing",e.handler())("cursor-grab",e.inside())("cursor-pointer",e.overPreset()!==null),at("width",e.size())("height",e.size()))},encapsulation:2,changeDetection:0})};var Mt={points:Ht,doublePoints:Lt};function Ht(o,n,t,e=0,i=0,s=1,r=1,a=0,l=0,d=20){d=Math.max(1,d);let h=0,p=c.value((o.h1.x+e)/n*100),u=c.value((o.h2.x+e)/n*100),m=100,w=0,C=c.value((o.h1.y+i)/t*100),f=c.value((o.h2.y+i)/t*100),H=100,E=[];for(let k=0;k<=d;k+=1){let L=k/d,N=(d-k)/d,Q=Math.pow(N,3),J=3*Math.pow(N,2)*L,Z=3*N*Math.pow(L,2),tt=Math.pow(L,3),Gt=Q*h+J*p+Z*u+tt*m,Et=Q*w+J*C+Z*f+tt*H;E.push({x:c.bezierCoord(Gt*s+a),y:c.bezierCoord(Et*r+l)})}return E}function Lt(o,n,t){let e=c.value(n.x),i=c.value(n.y),s=e/t;return Mt.points({h1:o.h1,h2:o.h2},e,i,0,0,s,1,0,0,10).concat(Mt.points({h1:o.h3,h2:o.h4},t-e,t-i,-e,-i,1-s,1,e/t*100,0,10))}function Dt(o,n,t,e=0){let i=zt(o,n),s=Nt(o,n),r=Bt(o,n),a=[],l=[];for(let h=0;h<t.length;h++){let p=t[h],u=p.y/100,m=(u*i.range+i.delta).toFixed(3),w=(u*s.range+s.delta).toFixed(3),C=(u*r.range+r.delta).toFixed(1),f=`oklch(${m} ${w} ${C})`;a.push({offset:p.x,color:f}),l.push({offset:p.x,color:pt(f).color})}let d=Ft(t);return{stops:a,gradient:$(a,e,"oklch"),darkMode:Y(a[d].color)==="white",gradientRGB:$(l,e,"srgb"),rgbStops:l}}function Te(o,n,t,e,i=0){let s=Math.floor(e.length/2),r=Dt(o,n,e.slice(0,s),i),a=Dt(n,t,e.slice(s),i);return{stops:[...r.stops.slice(0,-1),...a.stops.slice(1)],gradient:$([...r.stops.slice(0,-1),...a.stops.slice(1)],i,"oklch"),darkMode:Y(r.stops.slice(-3,-2)[0].color)==="white",gradientRGB:$([...r.rgbStops.slice(0,-1),...a.rgbStops.slice(1)],i,"srgb"),rgbStops:[...r.rgbStops.slice(0,-1),...a.rgbStops.slice(1)]}}function $(o,n,t){return`linear-gradient(${n}deg in ${t}, ${o.map(e=>`${e.color} ${e.offset.toFixed(1)}%`).join(", ")})`}function Nt(o,n){return{range:n[1]-o[1],delta:o[1]}}function zt(o,n){return{range:n[0]-o[0],delta:o[0]}}function Bt(o,n){let t=n[2]-o[2],e=t>180?o[2]+360:o[2];return{range:(t<-180?n[2]+360:n[2])-e,delta:e}}function Ft(o){let n=o.map(e=>e.x).filter(e=>e<=50).sort((e,i)=>i-e),t=o.map(e=>e.x).filter(e=>e>50).sort((e,i)=>e-i);return 50-n[0]<t[0]-50?Math.min(o.length-1,n.length-1):Math.min(o.length-1,n.length)}export{c as a,wt as b,Mt as c,Dt as d,Te as e,$ as f,Pt as g,gt as h,ft as i,bt as j,St as k};
