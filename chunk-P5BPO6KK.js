import{b as de,d as ue,g as Y,h as R,k as he,l as pe}from"./chunk-AG74TOS6.js";import{$a as se,C as L,Ca as D,L as V,La as A,Na as ie,Q as Z,T as _,Ua as C,Va as v,Wa as U,Xa as re,Z as ee,Za as y,_ as te,ab as ae,bb as le,db as x,ha as N,ja as k,p as f,ra as W,sa as j,ta as H,u as S,v as I,vb as K,w as T,wa as ne,wb as ce,xa as oe,z}from"./chunk-MLHRJ3PS.js";var me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-center","md:justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"hidden","md:flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(e,n){e&1&&(C(0,"header")(1,"div",0)(2,"h1",1),U(3,"zz-marca",2),v(),C(4,"div",3)(5,"a",4),x(6,"Palettes"),v(),U(7,"zz-dark-mode-toggle"),v()()()),e&2&&(H(3),A("format","horizontal"))},dependencies:[de,he],encapsulation:2,changeDetection:0})};var $=new Z("GRADIENT_STATE");function ve(t,o,e,n=0){let i=ze(t,o),r=Ie(t,o),s=He(t,o),l=[],d=[];for(let a=0;a<e.length;a++){let c=e[a],p=c.y/100,m=(p*i.range+i.delta).toFixed(3),g=(p*r.range+r.delta).toFixed(3),b=(p*s.range+s.delta).toFixed(1),w=`oklch(${m} ${g} ${b})`;l.push({offset:c.x,color:w}),d.push({offset:c.x,color:ue(w).color})}let h=Ae(e);return{stops:l,gradient:O(l,n,"oklch"),darkMode:Y(l[h].color)==="white",gradientRGB:O(d,n,"srgb"),rgbStops:d}}function nt(t,o,e,n,i=0){let r=Math.floor(n.length/2),s=ve(t,o,n.slice(0,r),i),l=ve(o,e,n.slice(r),i);return{stops:[...s.stops.slice(0,-1),...l.stops.slice(1)],gradient:O([...s.stops.slice(0,-1),...l.stops.slice(1)],i,"oklch"),darkMode:Y(s.stops.slice(-3,-2)[0].color)==="white",gradientRGB:O([...s.rgbStops.slice(0,-1),...l.rgbStops.slice(1)],i,"srgb"),rgbStops:[...s.rgbStops.slice(0,-1),...l.rgbStops.slice(1)]}}function Ie(t,o){return{range:o[1]-t[1],delta:t[1]}}function ze(t,o){return{range:o[0]-t[0],delta:t[0]}}function He(t,o){let e=o[2]-t[2],n=e>180?t[2]+360:t[2];return{range:(e<-180?o[2]+360:o[2])-n,delta:n}}function O(t,o,e){return`linear-gradient(${o}deg in ${e}, ${t.map(n=>`${n.color} ${n.offset.toFixed(1)}%`).join(", ")})`}function Ae(t){let o=t.map(n=>n.x).filter(n=>n<=50).sort((n,i)=>i-n),e=t.map(n=>n.x).filter(n=>n>50).sort((n,i)=>n-i);return 50-o[0]<e[0]-50?Math.min(t.length-1,o.length-1):Math.min(t.length-1,o.length)}var be=new Date(2025,0,1).valueOf();function Ce(t,o=0,e={width:1920,height:1080},n=""){n=encodeURI(n.trim());let i=document.createElement("canvas");i.width=e.width,i.height=e.height;let r=i.getContext("2d");if(!r){console.error("No se pudo obtener el contexto del canvas");return}let{x1:s,y1:l,x2:d,y2:h}=Se(i.width,i.height,o),a=r.createLinearGradient(s,l,d,h);for(let m=0;m<t.length;m++){let g=t[m];a.addColorStop(g.offset/100,g.color)}r.fillStyle=a,r.beginPath(),r.rect(0,0,i.width,i.height),r.fill();let c=document.createElement("a"),p=i.toDataURL("image/png",1);c.href=p,c.download=`colorina-gradient-${n}${n.length>0?"-":""}${new Date().valueOf()-be}.png`,c.click(),c.remove()}function ye(t,o=0,e=""){e=encodeURI(e.trim());let n=$e(t,o),i=new Blob([n],{type:"image/svg+xml"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=`colorina-gradient-${e}${e.length>0?"-":""}${new Date().valueOf()-be}.svg`,r.click(),r.remove()}function $e(t,o=0){let i=Math.max(1920,1080),r=Math.min(1920,1080),s=Math.sqrt(1920*1920+1080*1080),{x1:l,y1:d,x2:h,y2:a,hypotenusa:c}=Se(1920,1080,o);c=Math.abs(c);let p=(i-c)/2,m=(r-s)/2,g=t.map(b=>`        <stop offset="${(b.offset/100).toFixed(3)}" style="stop-color:${b.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 1920 1080" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">

    <rect x="${p}" y="${m}" width="${c}" height="${s}"  style=" transform-origin: center center; transform: rotate(${o-90}deg); fill:url(#_Linear1);"/>
    <rect x="0" y="0" width="1920" height="1080" stroke="black" fill="none" />

  <defs>
        <linearGradient id="_Linear1" x1="${p}" y1="0" x2="${c}" y2="0" gradientUnits="userSpaceOnUse" >
${g}
        </linearGradient>
    </defs>
</svg>`}function Se(t,o,e){let n=t/2,i=o/2,r=Math.sin((e+90)*Math.PI*2/360),s=Math.cos((e+90)*Math.PI*2/360),l=Math.sqrt(n*n+i*i),d=l*s,h=Math.abs(i*r),a=l*r,c=Math.abs(n*s);a<-i?a=Math.max(a,-i-c):a>i&&(a=Math.min(a,i+c)),d<-n?d=Math.max(d,-n-h):d>n&&(d=Math.min(d,n+h));let p=Math.sqrt(d*d+a*a)*2;return{x1:n+d,y1:i+a,x2:n-d,y2:i-a,hypotenusa:p}}var we=class t{copyService=_(pe);state=_($);handleCopyShortcut(o){o.preventDefault(),this.copy()}handleSvgShortcut(o){o.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveAsImage(){let o=this.state.startRGBColor(),e=this.state.endRGBColor(),n=this.state.angleDegrees(),i=`${R(o)}_${R(e)}_${n}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;Ce(this.state.gradient().rgbStops,this.state.angleDegrees(),this.displayDimensions(),i)}saveSVG(){let o=this.state.startRGBColor(),e=this.state.endRGBColor(),n=this.state.angleDegrees(),i=`${R(o)}_${R(e)}_${n}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;ye(this.state.gradient().rgbStops,this.state.angleDegrees(),i)}displayDimensions(){if(!("ontouchstart"in document.documentElement))return{width:1920,height:1080};let e=window.innerWidth??document.documentElement.clientWidth??1920,n=screen.height??window.innerHeight??1080,i=window.devicePixelRatio||1;return{width:Math.floor(e*i),height:Math.floor(n*i)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(e,n){e&1&&y("keydown.control.shift.c",function(r){return n.handleCopyShortcut(r)},!1,j)("keydown.control.shift.g",function(r){return n.handleSvgShortcut(r)},!1,j)},decls:7,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Save png gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Copy gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"]],template:function(e,n){e&1&&(C(0,"div",0)(1,"button",1),y("click",function(){return n.saveSVG()}),x(2," SVG "),v(),C(3,"button",2),y("click",function(){return n.saveAsImage()}),x(4," PNG "),v(),C(5,"button",3),y("click",function(){return n.copy()}),x(6," COPY "),v()())},encapsulation:2,changeDetection:0})};var u={value:t=>Math.round(t),point:t=>({x:u.value(t.x),y:u.value(t.y)}),bezierCoord:t=>Math.round(t*100)/100},Pe={pointFromEvent:Oe};function Oe(t,o){if(!t)return{x:0,y:0};let e=window.getComputedStyle(t),n=parseFloat(e.paddingLeft.replace("px",""))||0,i=parseFloat(e.paddingTop.replace("px",""))||0,r=t.getBoundingClientRect();if(o instanceof TouchEvent){if(o.touches.length===0)return{x:0,y:0};let s=o.touches[0];return{x:s.clientX-r.left-n,y:s.clientY-r.top-i}}else return{x:o.clientX-r.left-n,y:o.clientY-r.top-i}}function Me(t){return{lines:t?"#909090":"#606060",border:t?"#a0a0a0":"#505050",preset:t?"#888888":"#777777",presetHover:t?"#C0C0C0":"#333333",activePreset:t?"#ffffff":"#000000"}}function Ge(t){return{lines:t?"#cccccc":"#202020",tip:t?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:t?"gray":"#d0d0d0"}}var B=2e3,Be=.7,Fe=.9;function De(t,o,e=100,n=null,i=!1,r=!1){let s=new OffscreenCanvas(e,e),l=s.getContext("2d");if(!l)return;let d=e/B,h=B/2,a={diameter:e,ratio:d,radio:B/2,gridRadio:Be*h,center:u.value(d*h),presetSize:Fe*h,virtualSize:B},c=a.gridRadio*.95,p=je/a.diameter*a.virtualSize,m={size:c,arrowInsetValue:Ue/a.diameter*a.virtualSize,arrowOverflowValue:p,arrowWideValue:Ne/a.diameter*a.virtualSize,arrowTipBase:c-We/a.diameter*a.virtualSize+p,arrowTip:c+p};Le(l,a,n,o,r),Ke(l,o,a,m,i,r);let g=s.transferToImageBitmap();t.transferFromImageBitmap(g)}function Le(t,o,e=null,n=0,i){let r=o.center,s=o.center,l=o.gridRadio*o.ratio,d=8,h=Math.PI*2/d,a=-1,c=l*.2,p=4,m=1,g=m/2,b=o.gridRadio*.85*o.ratio,w=13,P=o.presetSize*o.ratio;t.save(),t.beginPath(),t.arc(o.center,o.center,u.value(o.ratio*o.gridRadio),0,Math.PI*2),t.lineWidth=1,t.fillStyle="#7A736E33",t.fill(),t.restore(),t.save(),t.translate(r,s),t.beginPath(),t.arc(0,0,l,0,Math.PI*2),t.arc(0,0,l-a,0,Math.PI*2,!0),t.arc(0,0,c,0,Math.PI*2),t.arc(0,0,c-a,0,Math.PI*2,!0);for(let G=0;G<d;G++)t.rotate(h),t.moveTo(Math.round(b),g),t.rect(Math.round(b),-g,w,m),t.moveTo(P,0),t.arc(P,0,p,0,Math.PI*2);let M=Me(i);t.fillStyle=M.lines,t.fill(),t.restore(),e!==null&&(t.save(),t.translate(r,s),t.rotate(Math.PI*2/8*((e-90)/45)),t.beginPath(),t.arc(P,0,p,0,Math.PI*2),t.fillStyle=M.presetHover,t.fill(),t.restore()),(n+90)%45===0&&(t.save(),t.translate(r,s),t.rotate(Math.PI*2/8*((n-90)/45)),t.beginPath(),t.arc(P,0,p,0,Math.PI*2),t.fillStyle=M.activePreset,t.fill(),t.restore())}var Ne=5,We=14,je=4,Ue=-3;function Ke(t,o,e,n,i,r){let s=Ge(r);t.save(),t.translate(e.center,e.center),t.rotate((o-180)*Math.PI/180),i&&(t.shadowColor=r?"#303030":"#606060",t.shadowBlur=7,t.shadowOffsetX=3,t.shadowOffsetY=3),t.beginPath(),t.moveTo(0,u.value(e.ratio*n.size)),t.lineTo(0,0),t.strokeStyle=s.lines,t.lineWidth=2,t.stroke(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.fillStyle=s.toe,t.fill(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.strokeStyle=s.lines,t.lineWidth=1,t.stroke(),t.beginPath(),t.moveTo(0,u.value(e.ratio*n.arrowTip)),t.lineTo(u.value(e.ratio*-n.arrowWideValue),u.value(e.ratio*n.arrowTipBase)),t.lineTo(0,u.value(e.ratio*(n.arrowTipBase+n.arrowInsetValue))),t.lineTo(u.value(e.ratio*n.arrowWideValue),u.value(e.ratio*n.arrowTipBase)),t.fillStyle=s.tip,t.closePath(),t.fill(),t.strokeStyle=s.lines,t.lineWidth=2,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.restore()}function xe(t,o,e=3){let n=Math.round(t),i=Math.abs(o.x),r=Math.abs(o.y);return Math.sqrt(i*i+r*r)-e<=n}function Ee(t){return t<0?t+360:t>=360?t-360:t}function Te(t,o,e=9){return o.x+e>t.x&&o.x-e<t.x&&o.y+e>t.y&&o.y-e<t.y}var Ye=["canvas"],Ve=class t{constructor(o){this.renderer=o;ce(()=>{this.dibujar(this.anglesInDegrees(),this.handler(),this.size(),this.darkMode())})}maxMovement=12;radioSizeRatio=.7;presetSizeRatio=.9;canvasMoveSubscription=null;moveSubscription=null;grabHandlerSubscription=null;removeDocumentClickListenerFn=null;removeDocumentTouchEndListenerFn=null;state=_($);anglesInDegrees=K(()=>this.state.angleDegrees());presetAngles=[];shiftPressed=k(!1);canvasContext=null;handler=k(!1);overPreset=k(null);inside=k(!1);size=N(100);darkMode=N(!1);radius=K(()=>Math.round(this.size()/2));canvas;canvasRealSize=0;get canvasElement(){return this.canvas?.nativeElement}onShiftKeyDown(o){this.shiftPressed()||(this.shiftPressed.set(!0),o.preventDefault())}onShiftKeyUp(o){this.shiftPressed()&&(this.shiftPressed.set(!1),o.preventDefault())}ngAfterViewInit(){this.createPresetAngles(),this.subcribeToEvents(),this.canvasRealSize=this.realSize(),this.dibujar(this.anglesInDegrees())}subcribeToEvents(){this.moveSubscription=I(S(document,"mousemove").pipe(f(e=>e)),S(document,"touchmove",{passive:!1}).pipe(f(e=>e))).pipe(T(()=>this.handler()),V(e=>e.preventDefault()),z(1),f(e=>this.angleDegreesFromPoint(this.pointFromEvent(e))),f(e=>this.calculateAngleMovement(e)),L()).subscribe(e=>{this.state.onAngleDegreesChange(e)});let o=S(this.canvasElement,"mousemove").pipe(f(e=>e),T(()=>!this.handler()),V(e=>e.preventDefault()),z(1),f(e=>{let n=this.radius(),i=this.pointFromEvent(e),r=Math.round(n*this.radioSizeRatio);return xe(r,{x:i.x-n,y:i.y-n},3)?{inside:!0,preset:null}:{inside:!1,preset:this.isOverPreset(i)}}));this.canvasMoveSubscription=I(o,S(this.canvasElement,"mouseleave").pipe(V(e=>e.preventDefault()),f(()=>({inside:!1,preset:null})))).pipe(L((e,n)=>e.inside===n.inside&&e.preset===n.preset)).subscribe(e=>{this.inside.set(e.inside),this.overPreset.set(e.preset)}),this.grabHandlerSubscription=I(S(this.canvasElement,"mousedown").pipe(T(()=>this.inside()||this.overPreset()!==null),f(e=>e)),S(this.canvasElement,"touchstart",{passive:!1}).pipe(f(e=>e))).pipe(T(()=>!this.handler()),V(e=>e.preventDefault()),z(1),f(e=>this.pointFromEvent(e))).subscribe(e=>{this.onGrabHandler(e)})}onDoubleClick(o){this.state.onAngleDegreesChange(0)}onGrabHandler(o){let e=this.isOverPreset(o);if(e!==null){this.state.onAngleDegreesChange(e);return}this.setHandlerSelected()}isOverPreset(o){if(this.inside())return null;for(let e of this.presetAngles)if(Te(e.point,o,14))return e.angle!==this.anglesInDegrees()?e.angle:null;return null}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.handler.set(!1))}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(o){let e=this.radius(),n=(o.x-e)/e,i=(o.y-e)/e;if(Math.abs(n)<.1&&Math.abs(i)<.1)return this.anglesInDegrees();let r=Math.atan2(n,i),s=Math.round(r*180/Math.PI);return s<0&&(s+=360),s}calculateAngleMovement(o){if(this.shiftPressed())return Math.round(o/45)*45;let e=this.anglesInDegrees(),n=Math.min(this.maxMovement,Math.abs(e-o)),i=e-o>180?n:e-o<-180?-n:e<o?n:-n;return Ee(e+i)}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>this.stopTracking()),this.removeDocumentClickListenerFn=this.renderer.listen("document","touchend",()=>this.stopTracking(),{passive:!0})}createPresetAngles(){let o=Math.round(this.size()*this.presetSizeRatio/2),e=Math.round(this.size()/2),n=o*.7071;this.presetAngles.push({angle:0,point:{x:e,y:e+o}}),this.presetAngles.push({angle:45,point:{x:e+n,y:e+n}}),this.presetAngles.push({angle:90,point:{x:e+o,y:e}}),this.presetAngles.push({angle:135,point:{x:e+n,y:e-n}}),this.presetAngles.push({angle:180,point:{x:e,y:e-o}}),this.presetAngles.push({angle:225,point:{x:e-n,y:e-n}}),this.presetAngles.push({angle:270,point:{x:e-o,y:e}}),this.presetAngles.push({angle:315,point:{x:e-n,y:e+n}})}dibujar(o,e=!1,n=this.size(),i=this.darkMode(),r=this.overPreset()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvasElement.getContext("bitmaprenderer"));let s=this.canvasContext;requestAnimationFrame(()=>{De(s,o,n,r,e,i)})}pointFromEvent(o){let e=Pe.pointFromEvent(this.canvasElement,o);return{x:e.x,y:this.canvasRealSize-e.y}}realSize(){let o=this.canvasElement,e=window.getComputedStyle(o),i=2*(parseFloat(e.paddingBottom.replace("px",""))||0),r=o.getBoundingClientRect();return r.bottom-r.top-i}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.canvasMoveSubscription?.unsubscribe(),this.moveSubscription?.unsubscribe(),this.grabHandlerSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(oe(ne))};static \u0275cmp=D({type:t,selectors:[["zz-orientation-compass"]],viewQuery:function(e,n){if(e&1&&se(Ye,5),e&2){let i;ae(i=le())&&(n.canvas=i.first)}},hostBindings:function(e,n){e&1&&y("keydown.shift",function(r){return n.onShiftKeyDown(r)},!1,W)("keyup.shift",function(r){return n.onShiftKeyUp(r)},!1,W)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"rounded-full",3,"dblclick","width","height"]],template:function(e,n){if(e&1){let i=re();C(0,"div")(1,"canvas",1,0),y("dblclick",function(s){return ee(i),te(n.onDoubleClick(s))}),v()()}e&2&&(H(),ie("cursor-grabbing",n.handler())("cursor-grab",n.inside())("cursor-pointer",n.overPreset()!==null),A("width",n.size())("height",n.size()))},encapsulation:2,changeDetection:0})};var $t={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:6.8,y:120},h2:{x:40,y:193.6}},angle:0},Ot={colors:{start:[249,147,52],center:[255,0,0],end:[7,10,95]},center:{x:1e3,y:1e3},handlers:{h1:{x:333,y:333},h2:{x:666,y:666},h3:{x:1333,y:1333},h4:{x:1666,y:1666}},angle:0};var _e={points:(t,o,e,n=0,i=0,r=1,s=1,l=0,d=0,h=20)=>{h=Math.max(1,h);let a=0,c=u.value((t.h1.x+n)/o*100),p=u.value((t.h2.x+n)/o*100),m=100,g=0,b=u.value((t.h1.y+i)/e*100),w=u.value((t.h2.y+i)/e*100),P=100,M=[];for(let E=0;E<=h;E+=1){let G=E/h,F=(h-E)/h,X=Math.pow(F,3),q=3*Math.pow(F,2)*G,Q=3*F*Math.pow(G,2),J=Math.pow(G,3),ke=X*a+q*c+Q*p+J*m,Re=X*g+q*b+Q*w+J*P;M.push({x:u.bezierCoord(ke*r)+l,y:u.bezierCoord(Re*s)+d})}return M},doublePoints:(t,o,e)=>{let n=u.value(o.x),i=u.value(o.y),r=n/e;return console.log("datos",{h1:t.h3,h2:t.h4},e-n,e-i,-n,-i),_e.points({h1:t.h1,h2:t.h2},n,i,0,0,r,1,0,0,10).concat(_e.points({h1:t.h3,h2:t.h4},e-n,e-i,-n,-i,1-r,1,n/e*100,0,10))}};export{me as a,$ as b,u as c,Pe as d,Te as e,ve as f,nt as g,we as h,$t as i,Ot as j,_e as k,Ve as l};
