import{b as ie,f as I,g as re,k as ae,l as fe,m as ge}from"./chunk-HQFI2BBD.js";import{$b as D,Ia as m,Ja as P,Jb as se,Ka as U,La as W,Lb as le,Mb as ce,Nb as de,Ob as pe,Pa as q,Pb as me,Qa as J,Ra as c,Rb as ue,Sa as d,Ta as v,Ua as K,Ub as he,Vb as Ce,Wa as C,X as _,Xa as Z,Y as b,Ya as ee,Za as te,_a as oe,a as E,ab as S,b as O,ea as z,fa as T,ha as f,p as L,pa as Q,qa as p,sb as N,tb as ne,za as h}from"./chunk-3AYZV4L5.js";var k=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(t,n){t&1&&(c(0,"header")(1,"div",0)(2,"h1",1),v(3,"zz-marca",2),d(),c(4,"div",3)(5,"a",4),S(6,"Palettes"),d(),v(7,"zz-dark-mode-toggle"),d()()()),t&2&&(p(3),m("format","horizontal"))},dependencies:[ie,ae],encapsulation:2,changeDetection:0})};function ve(o,e,t,n){let i=t.map(l=>l.x).filter(l=>l<=50).sort((l,y)=>y-l),r=t.map(l=>l.x).filter(l=>l>50).sort((l,y)=>l-y),a=0;50-i[0]<r[0]-50?a=i.length-1:a=i.length;let u=e[0]-o[0],x=e[1]-o[1],g=e[2]-o[2],s=o[2]+360-e[2],w=o[2],M=w,$=1;g>s&&(o[2]=o[2]+360,M=w+360,$=-1);let Me=Math.min(g,s),Te=o[0],Pe=o[1],R="",j=[];for(let l=0;l<t.length;l++){let y=t[l].y,A=y*u/100+Te,X=y*x/100+Pe,Y=$*(y*Me)/100+M;l===a&&(R=`oklch(${A.toFixed(3)} ${X.toFixed(3)} ${Y.toFixed(1)})`);let Se=t[l].x;j.push(`oklch(${A.toFixed(3)} ${X.toFixed(3)} ${Y.toFixed(1)}) ${Se.toFixed(1)}%`)}return{gradient:`linear-gradient(${n} in oklch, ${j})`,contrast:re(R)}}function ye(o){let t=o.point1.x,n=o.point2.x,i=100,r=0,a=o.point1.y,u=o.point2.y,x=100,g=[];for(let s=0;s<=1;s+=.05){let w=Math.pow(1-s,3)*0+3*Math.pow(1-s,2)*s*t+3*(1-s)*Math.pow(s,2)*n+Math.pow(s,3)*i,M=Math.pow(1-s,3)*r+3*Math.pow(1-s,2)*s*a+3*(1-s)*Math.pow(s,2)*u+Math.pow(s,3)*x;g.push({x:w,y:M})}return g.push({x:100,y:100}),g}var De=(o,e)=>e.value;function ke(o,e){if(o&1&&(c(0,"label",3),v(1,"input",4),c(2,"span",5),S(3,"arrow_upward_alt"),d()()),o&2){let t=e.$implicit,n=e.$index,i=Z();U("opacity-100",t.value===i.orientationGroup.value.orientation),m("for","radio"+n),p(),m("value",t.value)("id","radio"+n),p(),W(t.class)}}var F=class o{orientationsValues=He;orientationGroup=new de({orientation:new pe("to right bottom",{nonNullable:!0})});orientationChanged=this.orientationGroup.valueChanges.pipe(L(e=>e.orientation??"to right bottom"));static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["zz-orientation-selector"]],outputs:{orientationChanged:"orientationChanged"},decls:4,vars:1,consts:[[3,"formGroup"],[1,"select-none","flex","flex-row","gap-2"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"opacity-100","for"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"for"],["type","radio","formControlName","orientation",1,"hidden",3,"value","id"],[1,"font-icons"]],template:function(t,n){t&1&&(c(0,"form",0)(1,"div",1),q(2,ke,4,7,"label",2,De),d()()),t&2&&(m("formGroup",n.orientationGroup),p(2),J(n.orientationsValues))},dependencies:[D,me,se,ue,le,ce,he,Ce],encapsulation:2})},He=[{value:"to right",icon:"&#x2192;",class:"rotate-90"},{value:"to right bottom",icon:"&#x2198;",class:"rotate-135"},{value:"to bottom",icon:"&#x2193;",class:"rotate-180"},{value:"to left bottom",icon:"&#x2199;",class:"-rotate-135"},{value:"to left",icon:"&#x2190;",class:"-rotate-90"},{value:"to left top",icon:"&#x2196;",class:"-rotate-45"},{value:"to top",icon:"&#x2191;",class:"rotate-0"},{value:"to right top",icon:"&#x2197;",class:"rotate-45"}];var V=class o{colorSource=f([208,22,130]);colorDestination=f([37,24,119]);sourceColorChanged=z();destinationColorChanged=z();onColorDestinationChange(e){this.destinationColorChanged.emit(I(this.rgbText(e)))}onColorSourceChange(e){this.sourceColorChanged.emit(I(this.rgbText(e)))}rgbText(e){return`rgb(${Math.round(e[0])} ${Math.round(e[1])} ${Math.round(e[2])})`}ngAfterViewInit(){this.onColorSourceChange(this.colorSource()),this.onColorDestinationChange(this.colorDestination())}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],outputs:{sourceColorChanged:"sourceColorChanged",destinationColorChanged:"destinationColorChanged"},decls:3,vars:4,consts:[[1,"flex","flex-row","items-center","justify-between","gap-4","w-full"],[3,"color-change","border","color"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"zz-color-selector",1),C("color-change",function(r){return n.onColorSourceChange(r)}),d(),c(2,"zz-color-selector",1),C("color-change",function(r){return n.onColorDestinationChange(r)}),d()()),t&2&&(p(),m("border","border-current/40")("color",n.colorSource()),p(),m("border","border-current/40")("color",n.colorDestination()))},dependencies:[fe],encapsulation:2})};function xe(o,e,t,n,i){let r=new OffscreenCanvas(t,t),a=r.getContext("2d");Ge(a,t,i);let u=Fe(i),x=Ve(i);ze(a,{x:0,y:t},e.point1,u.line),_e(a,e.point1,u.h1),ze(a,{x:t,y:0},e.point2,u.line),_e(a,e.point2,u.h2),n==="H1"?be(a,e.point1,u.h1):n==="H2"&&be(a,e.point2,u.h2),a.beginPath(),a.moveTo(0,t),a.strokeStyle=x,a.bezierCurveTo(e.point1.x,e.point1.y,e.point2.x,e.point2.y,t,0),a.lineWidth=2,a.stroke();let g=r.transferToImageBitmap();o.transferFromImageBitmap(g)}function Ge(o,e,t){let n=Be(t);o.beginPath(),o.rect(0,0,e,e),o.strokeStyle=n.border,o.lineWidth=1,o.stroke();let i=e/100;o.strokeStyle=n.lines;for(let r=10;r<=90;r+=10)o.beginPath(),o.moveTo(0,r*i),o.lineTo(e,r*i),o.lineWidth=.5,o.stroke(),o.beginPath(),o.moveTo(r*i,0),o.lineTo(r*i,e),o.lineWidth=.5,o.stroke()}function _e(o,e,t){o.beginPath(),o.arc(e.x,e.y,5,0,Math.PI*2),o.fillStyle=t,o.fill()}function be(o,e,t){o.beginPath(),o.arc(e.x,e.y,7,0,Math.PI*2),o.strokeStyle=t,o.stroke()}function ze(o,e,t,n){o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(t.x,t.y),o.strokeStyle=n,o.stroke()}function Fe(o){return{h1:o==="black"?"darkred":"red",h2:o==="black"?"navy":"blue",line:o==="black"?"#405040":"#E0FFE0"}}function Ve(o){return o==="black"?"#303030":"#D0D0D0"}function Be(o){return{lines:o==="black"?"#606060":"#C0C0C0",border:o==="black"?"#101010":"#F0F0F0"}}var Ee=["canvas"],B=class o{currentHandler=null;lastTimeoutId=null;canvasOffset=30;size=T(200);color=T("black");coords=T({point1:{x:50,y:50},point2:{x:50,y:50}});coordsChanging=z();coordsChanged=z();canvas;onDocumentMouseUp(){this.currentHandler&&this.stopTracking()}constructor(){ne(()=>{let e=this.coords();this.dibujar(e)})}ngAfterViewInit(){this.dibujar(this.coords(),this.size())}onMouseDown(e){let t=this.canvas?.nativeElement;if(!t)return;let n=t.getBoundingClientRect();this.setHandlerSelected(e.clientX-n.left,e.clientY-n.top)}onMouseMove(e){if(!this.currentHandler)return;let t=this.canvas?.nativeElement;if(!t)return;let n=t.getBoundingClientRect();this.updateHandlerCoords(e.clientX-n.left,e.clientY-n.top)}updateHandlerCoords(e,t){let n=this.convertXFromCanvas(e),i=this.convertYFromCanvas(t);this.currentHandler==="H1"?this.coordsChanging.emit(O(E({},this.coords()),{point1:{x:n,y:i}})):this.currentHandler==="H2"&&this.coordsChanging.emit(O(E({},this.coords()),{point2:{x:n,y:i}}))}onMouseUp(){this.stopTracking()}onMouseLeave(){this.setStopTimeout()}onMouseEnter(){this.currentHandler!==null&&this.clearStopTimeout()}setStopTimeout(){this.currentHandler!==null&&(this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3))}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.currentHandler!==null&&(this.currentHandler=null,this.clearStopTimeout(),this.coordsChanged.emit(this.coords()))}setHandlerSelected(e,t){let n=this.convertXFromCanvas(e),i=this.convertYFromCanvas(t),r={x:n,y:i},a=this.coords();if(this.checkCoordsMatch(r,a.point1)){this.currentHandler="H1";return}if(this.checkCoordsMatch(r,a.point2)){this.currentHandler="H2";return}}checkCoordsMatch(e,t){return t.x+6>e.x&&t.x-6<e.x&&t.y+6>e.y&&t.y-6<e.y}convertXFromCanvas(e){let t=this.size();return Math.max(0,Math.min(e-this.canvasOffset,t))/t*100}convertYFromCanvas(e){let t=this.size();return Math.max(0,Math.min(t-e+this.canvasOffset,t))/t*100}convertXToCanvas(e){let t=this.size();return Math.max(0,Math.min(e,100))*t/100}convertYToCanvas(e){let t=this.size();return t-Math.max(0,Math.min(e,t))*t/100}dibujar(e,t=this.size()){let n={point1:{x:this.convertXToCanvas(e.point1.x),y:this.convertYToCanvas(e.point1.y)},point2:{x:this.convertXToCanvas(e.point2.x),y:this.convertYToCanvas(e.point2.y)}},i=this.canvas?.nativeElement.getContext("bitmaprenderer");i&&requestAnimationFrame(()=>{xe(i,n,t,this.currentHandler,this.color())})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["zz-bezier-panel"]],viewQuery:function(t,n){if(t&1&&ee(Ee,5),t&2){let i;te(i=oe())&&(n.canvas=i.first)}},hostBindings:function(t,n){t&1&&C("mouseup",function(){return n.onDocumentMouseUp()},!1,Q)},inputs:{size:[1,"size"],color:[1,"color"],coords:[1,"coords"]},outputs:{coordsChanging:"coordsChanging",coordsChanged:"coordsChanged"},decls:3,vars:4,consts:[["canvas",""],["id","canvas",1,"bg-gris-500/20","rounded-lg",3,"mousedown","mousemove","mouseup","mouseleave","mouseenter","width","height"]],template:function(t,n){if(t&1){let i=K();c(0,"div")(1,"canvas",1,0),C("mousedown",function(a){return _(i),b(n.onMouseDown(a))})("mousemove",function(a){return _(i),b(n.onMouseMove(a))})("mouseup",function(){return _(i),b(n.onMouseUp())})("mouseleave",function(){return _(i),b(n.onMouseLeave())})("mouseenter",function(){return _(i),b(n.onMouseEnter())}),d()()}t&2&&(p(),P("padding",n.canvasOffset,"px"),m("width",n.size())("height",n.size()))},encapsulation:2})};var we=class o{size=350;sourceColor=f([0,0,0]);destinationColor=f([0,0,0]);coords=f({point1:{x:20,y:80},point2:{x:40,y:70}});changingCoords=f({point1:{x:20,y:80},point2:{x:40,y:70}});orientation=f("to right bottom");points=N(()=>ye(this.changingCoords()));gradient=N(()=>ve(this.sourceColor(),this.destinationColor(),this.points(),this.orientation()));onColorDestinationChanged(e){this.destinationColor.set(e)}onColorSourceChanged(e){this.sourceColor.set(e)}onOrientationChanged(e){this.orientation.set(e??"to right bottom")}onCoordsChanging(e){this.changingCoords.set(e)}onCoordsChanged(e){this.changingCoords.set(e),this.coords.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["zz-test-col"]],decls:9,vars:7,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[1,"w-screen","min-h-[calc(100svh_-_50px)]","flex","flex-col","items-center","justify-center","gap-4"],[1,"flex","flex-col","items-center","justify-center","gap-4","w-[130px]"],[3,"coordsChanged","coordsChanging","size","color","coords"],[1,"",3,"sourceColorChanged","destinationColorChanged"],[3,"orientationChanged"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),v(2,"zz-gradients-header"),d(),c(3,"main",2)(4,"div",3)(5,"zz-bezier-panel",4),C("coordsChanged",function(r){return n.onCoordsChanged(r)})("coordsChanging",function(r){return n.onCoordsChanging(r)}),d(),c(6,"zz-gradient-colors",5),C("sourceColorChanged",function(r){return n.onColorSourceChanged(r)})("destinationColorChanged",function(r){return n.onColorDestinationChanged(r)}),d(),c(7,"zz-orientation-selector",6),C("orientationChanged",function(r){return n.onOrientationChanged(r)}),d()()()(),v(8,"zz-notification")),t&2&&(p(3),P("color",n.gradient().contrast)("background",n.gradient().gradient),p(2),m("size",n.size)("color",n.gradient().contrast)("coords",n.changingCoords()))},dependencies:[ge,k,D,F,V,B],encapsulation:2})};export{we as BezierGradientComponent};
