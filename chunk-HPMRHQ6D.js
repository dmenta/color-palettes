import{a as he,b as ue,d as pe,f as re,g as me,k as fe,l as ve,m as Ce,n as be}from"./chunk-MSIYWC77.js";import{$a as Y,B as ne,Ba as C,K as oe,Ka as b,La as j,Ma as G,N as de,S as g,Ta as u,Ua as p,Va as P,Wa as N,Y as D,Ya as f,Z as _,_a as W,a as B,ab as X,ac as ge,b as te,cb as T,ga as z,ia as S,p as w,qa as ie,ra as O,sa as v,u as M,ub as E,v as H,va as A,vb as x,wa as $,y as k}from"./chunk-OGJHMYCU.js";var U=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(n,o){n&1&&(u(0,"header")(1,"div",0)(2,"h1",1),P(3,"zz-marca",2),p(),u(4,"div",3)(5,"a",4),T(6,"Palettes"),p(),P(7,"zz-dark-mode-toggle"),p()()()),n&2&&(v(3),b("format","horizontal"))},dependencies:[ue,fe],encapsulation:2,changeDetection:0})};var ye={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:3.4,y:60},h2:{x:20,y:96.8}},angle:0};function Se(e){let n=e.h1.x,o=e.h2.x,i=100,r=0,s=e.h1.y,a=e.h2.y,l=100,d=[];for(let c=0;c<=1;c+=.05){let h=Math.pow(1-c,3)*0+3*Math.pow(1-c,2)*c*n+3*(1-c)*Math.pow(c,2)*o+Math.pow(c,3)*i,m=Math.pow(1-c,3)*r+3*Math.pow(1-c,2)*c*s+3*(1-c)*Math.pow(c,2)*a+Math.pow(c,3)*l;d.push({x:h,y:m})}return d.push({x:100,y:100}),d}function I(e,t,n=6){return t.x+n>e.x&&t.x-n<e.x&&t.y+n>e.y&&t.y-n<e.y}function Me(e,t,n,o=0){let i=Be(e,t),r=Ve(e,t),s=Oe(e,t),a=[],l=[];for(let c=0;c<n.length;c++){let h=n[c],m=h.y/100,V=(m*i.range+i.delta).toFixed(3),ee=(m*r.range+r.delta).toFixed(3),L=(m*s.range+s.delta).toFixed(1),ce=`oklch(${V} ${ee} ${L})`;a.push({offset:h.x,color:ce}),l.push({offset:h.x,color:pe(ce).color})}let d=Re(n);return{stops:a,gradient:we(a,o,"oklch"),darkMode:me(a[d].color)==="white",gradientRGB:we(l,o,"srgb"),rgbStops:l}}function Ve(e,t){return{range:t[1]-e[1],delta:e[1]}}function Be(e,t){return{range:t[0]-e[0],delta:e[0]}}function Oe(e,t){let n=t[2]-e[2],o=n>180?e[2]+360:e[2];return{range:(n<-180?t[2]+360:t[2])-o,delta:o}}function we(e,t,n){return`linear-gradient(${t}deg in ${n}, ${e.map(o=>`${o.color} ${o.offset.toFixed(1)}%`).join(", ")})`}function Re(e){let t=e.map(o=>o.x).filter(o=>o<=50).sort((o,i)=>i-o),n=e.map(o=>o.x).filter(o=>o>50).sort((o,i)=>o-i);return 50-t[0]<n[0]-50?t.length-1:t.length}var ke=new Date(2025,0,1).valueOf();function De(e,t=0){let n=document.createElement("canvas");n.width=1920,n.height=1080;let o=n.getContext("2d");if(!o){console.error("No se pudo obtener el contexto del canvas");return}let{x1:i,y1:r,x2:s,y2:a}=Pe(n.width,n.height,t),l=o.createLinearGradient(i,r,s,a);for(let h=0;h<e.length;h++){let m=e[h];l.addColorStop(m.offset/100,m.color)}o.fillStyle=l,o.beginPath(),o.rect(0,0,1920,1080),o.fill();let d=document.createElement("a"),c=n.toDataURL("image/png",1);d.href=c,d.download=`colorina-gradient-${new Date().valueOf()-ke}.png`,d.click(),d.remove()}function _e(e,t=0){let n=Ie(e,t),o=new Blob([n],{type:"image/svg+xml"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`colorina-gradient-${new Date().valueOf()-ke}.svg`,i.click(),i.remove()}function Ie(e,t=0){let i=Math.max(1920,1080),r=Math.min(1920,1080),s=Math.sqrt(1920*1920+1080*1080),{x1:a,y1:l,x2:d,y2:c,hypotenusa:h}=Pe(1920,1080,t);h=Math.abs(h);let m=(i-h)/2,V=(r-s)/2,ee=e.map(L=>`        <stop offset="${(L.offset/100).toFixed(3)}" style="stop-color:${L.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 1920 1080" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">

    <rect x="${m}" y="${V}" width="${h}" height="${s}"  style=" transform-origin: center center; transform: rotate(${t-90}deg); fill:url(#_Linear1);"/>
    <rect x="0" y="0" width="1920" height="1080" stroke="black" fill="none" />

  <defs>
        <linearGradient id="_Linear1" x1="${m}" y1="0" x2="${h}" y2="0" gradientUnits="userSpaceOnUse" >
${ee}
        </linearGradient>
    </defs>
</svg>`}function Pe(e,t,n){let o=e/2,i=t/2,r=Math.sin((n+90)*Math.PI*2/360),s=Math.cos((n+90)*Math.PI*2/360),a=Math.sqrt(o*o+i*i),l=a*s,d=Math.abs(i*r),c=a*r,h=Math.abs(o*s);c<-i?c=Math.max(c,-i-h):c>i&&(c=Math.min(c,i+h)),l<-o?l=Math.max(l,-o-d):l>o&&(l=Math.min(l,o+d));let m=Math.sqrt(l*l+c*c)*2;return console.log("realHypotenusa",m,"hypotenusa",a),{x1:o+l,y1:i+c,x2:o-l,y2:i-c,hypotenusa:m}}var y=class e{store=g(he);initialState=this.store.get("gradient-state")??ye;angleDegrees=S(this.initialState.angle);startRGBColor=S(this.initialState.colors.start);endRGBColor=S(this.initialState.colors.end);handlers=S(this.initialState.handlers);startOklch=E(()=>re(this.rgbText(this.startRGBColor())));endOklch=E(()=>re(this.rgbText(this.endRGBColor())));points=E(()=>Se(this.handlers()));startColor=E(()=>this.oklchText(this.startOklch()));endColor=E(()=>this.oklchText(this.endOklch()));gradient=E(()=>Me(this.startOklch(),this.endOklch(),this.points(),this.angleDegrees()));currentState=E(()=>({colors:{start:this.startRGBColor(),end:this.endRGBColor()},handlers:this.handlers(),angle:this.angleDegrees()}));constructor(){x(()=>this.store.save("gradient-state",this.currentState()))}onAngleDegreesChange(t){this.angleDegrees.set(t)}onStartColorChange(t){this.startRGBColor.set(t)}onEndColorChange(t){this.endRGBColor.set(t)}onHandlersChange(t){this.handlers.set(B({},t))}rgbText(t){return`rgb(${Math.round(t[0])} ${Math.round(t[1])} ${Math.round(t[2])})`}oklchText(t){return`oklch(${t[0].toFixed(3)} ${t[1].toFixed(3)} ${t[2].toFixed(1)})`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})};var K=class e{state=g(y);handleSwapShortcut(t){t.preventDefault(),this.swap()}swap(){let t=this.state.startRGBColor(),n=this.state.endRGBColor();this.state.onStartColorChange(n),this.state.onEndColorChange(t)}onColorEndChange(t){this.state.onEndColorChange(t)}onColorStartChange(t){this.state.onStartColorChange(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],hostBindings:function(n,o){n&1&&f("keydown.control.shift.y",function(r){return o.handleSwapShortcut(r)},!1,O)},decls:6,vars:4,consts:[[1,"flex","flex-row","items-center","justify-center","gap-2","w-full"],[1,"shadow-md",3,"color-changing","border","color"],["title","Swap colors (Ctrl+Shift+Y)",1,"shadow-md","w-5","h-5","-mt-1",3,"click"],[1,"font-icons","text-larger-5","leading-5"]],template:function(n,o){n&1&&(u(0,"div",0)(1,"zz-color-selector",1),f("color-changing",function(r){return o.onColorStartChange(r)}),p(),u(2,"button",2),f("click",function(){return o.swap()}),u(3,"span",3),T(4,"swap_horiz"),p()(),u(5,"zz-color-selector",1),f("color-changing",function(r){return o.onColorEndChange(r)}),p()()),n&2&&(v(),b("border","border-current/40")("color",o.state.startRGBColor()),v(4),b("border","border-current/40")("color",o.state.endRGBColor()))},dependencies:[Ce],encapsulation:2,changeDetection:0})};function ze(e,t,n,o,i){let r=new OffscreenCanvas(n,n),s=r.getContext("2d");Le(s,n,i);let a=Ae(i),l=$e(i);He(s,{x:n,y:0},t.h2,a.line),Te(s,t.h2,a.h2),He(s,{x:0,y:n},t.h1,a.line),Te(s,t.h1,a.h1),o==="h1"?Ee(s,t.h1,a.h1,a.shadow):o==="h2"&&Ee(s,t.h2,a.h2,a.shadow),s.beginPath(),s.moveTo(0,n),s.strokeStyle=l,s.bezierCurveTo(t.h1.x,t.h1.y,t.h2.x,t.h2.y,n,0),s.lineWidth=2,s.stroke();let d=r.transferToImageBitmap();e.transferFromImageBitmap(d)}function Le(e,t,n){let o=je(n);e.beginPath(),e.rect(0,0,t,t),e.strokeStyle=o.border,e.lineWidth=1,e.stroke();let i=t/100;e.strokeStyle=o.lines,e.setLineDash([2,2]);for(let r=10;r<=90;r+=10)e.beginPath(),e.moveTo(0,r*i),e.lineTo(t,r*i),e.lineWidth=.5,e.stroke(),e.beginPath(),e.moveTo(r*i,0),e.lineTo(r*i,t),e.lineWidth=.5,e.stroke();e.setLineDash([])}function Te(e,t,n){e.beginPath(),e.arc(t.x,t.y,7,0,Math.PI*2),e.fillStyle=n,e.fill()}function Ee(e,t,n,o){e.shadowColor=o,e.shadowBlur=7,e.shadowOffsetX=5,e.shadowOffsetY=5,e.beginPath(),e.arc(t.x,t.y,10,0,Math.PI*2),e.strokeStyle=n,e.lineWidth=2,e.stroke(),e.shadowColor="transparent"}function He(e,t,n,o){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.strokeStyle=o,e.stroke()}function Ae(e){return{h1:e?"oklch(0.634 0.254 18)":"oklch(0.355 0.146 29)",h2:e?"oklch(0.858 0.146 197)":"oklch(0.377 0.1 247)",line:e?"#E0FFE0":"#305030",shadow:e?"#000000":"#202020"}}function $e(e){return e?"#D0D0D0":"#303030"}function je(e){return{lines:e?"#C0C0C0":"#606060",border:e?"#F0F0F0":"#101010"}}function se(e,t){let n=100/t;return{x:Math.max(0,Math.min(e.x,t))*n,y:Math.max(0,Math.min(t-e.y,t))*n}}function ae(e,t){let n=t/100;return{x:Math.max(0,Math.min(e.x,100))*n,y:t-Math.max(0,Math.min(e.y,t))*n}}var Ne=["canvas"],Q=class e{constructor(t){this.renderer=t;x(()=>{let n=this.handlersToCanvas(this.state.handlers());this.dibujar(n,this.currentHandler(),this.size(),this.darkMode())})}mouseMoveSubscription=null;mouseMoveDocumentSubscription=null;touchStartSubscription=null;touchStartDocumentSubscription=null;removeDocumentClickListenerFn=null;removeDocumentTouchEndListenerFn=null;state=g(y);overHandler=S(null);currentHandler=S(null);size=z(200);darkMode=z(!1);canvas;canvasContext=null;ngAfterViewInit(){this.mouseMoveSubscription=M(this.canvas.nativeElement,"mousemove").pipe(k(1),w(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.mouseMoveDocumentSubscription=M(document,"mousemove").pipe(H(()=>this.currentHandler()!==null),k(1),w(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.touchStartSubscription=M(this.canvas.nativeElement,"touchmove").pipe(k(1),w(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.touchStartDocumentSubscription=M(document,"touchmove").pipe(H(()=>this.currentHandler()!==null),k(1),w(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.canvas.nativeElement.oncontextlost=t=>{console.warn("Context lost",t)},this.dibujar(this.handlersToCanvas(this.state.handlers()))}onDoubleClick(t){let n=this.overHandler();n!==null&&this.state.onHandlersChange(te(B({},this.state.handlers()),{[n]:{x:50,y:50}}))}onTouchStart(t){let n=this.pointFromEvent(t),o=this.isOverHandler(n);o!==null&&this.setHandlerSelected(o)}onMouseDown(t){let n=this.overHandler();n!==null&&this.setHandlerSelected(n)}onMouseMove(t){let n=this.pointFromEvent(t);if(!this.currentHandler()){let o=this.overHandler(),i=this.isOverHandler(n);if(o===i)return;this.overHandler.set(i)}this.updateHandlerCoords(n)}stopTracking(){this.currentHandler()!==null&&(this.removeDocumentClickListenerFn?.(),this.currentHandler.set(null))}setHandlerSelected(t){this.setListeners(),this.currentHandler.set(t)}updateHandlerCoords(t){let n=this.currentHandler();n!==null&&this.state.onHandlersChange(te(B({},this.state.handlers()),{[n]:t}))}isOverHandler(t){let n=this.state.handlers();return I(t,n.h1)?"h1":I(t,n.h2)?"h2":null}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.currentHandler()&&this.stopTracking()}),this.removeDocumentTouchEndListenerFn=this.renderer.listen("document","touchend",()=>{this.currentHandler()&&this.stopTracking()})}dibujar(t,n=this.currentHandler(),o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{ze(r,t,o,n,i)})}handlersToCanvas(t){return{h1:ae(t.h1,this.size()),h2:ae(t.h2,this.size())}}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=parseFloat(o.paddingTop.replace("px",""))||0,a=(parseFloat(o.paddingBottom.replace("px",""))||0)+r,l=n.getBoundingClientRect(),d=l.bottom-l.top-a;if(t instanceof TouchEvent){if(t.touches.length===0)return{x:0,y:0};let c=t.touches[0];return se({x:c.clientX-l.left-i,y:c.clientY-l.top-r},d)}else return se({x:t.clientX-l.left-i,y:t.clientY-l.top-r},d)}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.mouseMoveSubscription?.unsubscribe(),this.mouseMoveDocumentSubscription?.unsubscribe(),this.touchStartSubscription?.unsubscribe(),this.touchStartDocumentSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)($(A))};static \u0275cmp=C({type:e,selectors:[["zz-bezier-panel"]],viewQuery:function(n,o){if(n&1&&W(Ne,5),n&2){let i;Y(i=X())&&(o.canvas=i.first)}},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"bg-gris-500/20","rounded-lg",3,"touchstart","mousedown","dblclick","width","height"]],template:function(n,o){if(n&1){let i=N();u(0,"div")(1,"canvas",1,0),f("touchstart",function(s){return D(i),_(o.onTouchStart(s))})("mousedown",function(s){return D(i),_(o.onMouseDown(s))})("dblclick",function(s){return D(i),_(o.onDoubleClick(s))}),p()()}n&2&&(v(),j("padding",o.size()/20,"px"),G("cursor-grab",o.overHandler()!==null)("cursor-grabbing",o.currentHandler()!==null),b("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var q=class e{copyService=g(ve);state=g(y);handleCopyShortcut(t){t.preventDefault(),this.copy()}handleSvgShortcut(t){t.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveAsImage(){De(this.state.gradient().rgbStops,this.state.angleDegrees())}saveSVG(){_e(this.state.gradient().rgbStops,this.state.angleDegrees())}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(n,o){n&1&&f("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,O)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,O)},decls:7,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Save png gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Copy gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"]],template:function(n,o){n&1&&(u(0,"div",0)(1,"button",1),f("click",function(){return o.saveSVG()}),T(2," SVG "),p(),u(3,"button",2),f("click",function(){return o.saveAsImage()}),T(4," PNG "),p(),u(5,"button",3),f("click",function(){return o.copy()}),T(6," COPY "),p()())},encapsulation:2,changeDetection:0})};function xe(e,t,n=100,o=!1,i=!1){let r=new OffscreenCanvas(n,n),s=r.getContext("2d");if(!s)return;Xe(s,n,i),Qe(s,t,n,o,i);let a=r.transferToImageBitmap();e.transferFromImageBitmap(a)}var We=.84,Ye=.85;function Xe(e,t,n){let o=Math.round(t/2);e.beginPath(),e.arc(o,o,o,0,Math.PI*2),e.lineWidth=.5,e.fillStyle="#80808040",e.fill(),e.setLineDash([]),e.strokeStyle="transparent";let i=Math.round(We*o),r=Ue(n);e.beginPath(),e.arc(o,o,i,0,Math.PI*2),e.moveTo(o,o),e.strokeStyle=r.border,e.lineWidth=1,e.stroke(),e.beginPath(),e.setLineDash([2,2]),e.arc(o,o,Math.round(i*.2),0,Math.PI*2),e.strokeStyle=r.lines,e.stroke(),e.strokeStyle=r.lines;for(let s=0;s<=7;s++){let a=Math.PI*2/8*s,l=Math.cos(a)*i,d=Math.sin(a)*i,c=l+o,h=d+o,m=l*.8+o,V=d*.8+o;e.beginPath(),e.moveTo(c,h),e.lineTo(m,V),e.lineWidth=.5,e.stroke(),e.beginPath(),e.arc(c,h,3,0,Math.PI*2),e.fillStyle=r.border,e.fill()}e.setLineDash([])}function Ue(e){return{lines:e?"#cccccc":"#606060",border:e?"#bbbbbb":"#303030"}}var Ge=5,le=14,J=8,Ke=-3;function Qe(e,t,n,o,i){let r=qe(i),s=Math.round(n/2),a=Math.round(Ye*s);e.translate(s,s),e.rotate((t-180)*Math.PI/180);let l=a;o&&(e.shadowColor=i?"#303030":"#606060",e.shadowBlur=7,e.shadowOffsetX=3,e.shadowOffsetY=3),e.beginPath(),e.moveTo(0,l),e.lineTo(0,0),e.strokeStyle=r.lines,e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle=r.toe,e.fill(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.strokeStyle=r.lines,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(0,a+J),e.lineTo(-Ge,a-le+J),e.lineTo(0,a-le+J+Ke),e.lineTo(Ge,a-le+J),e.fillStyle=r.tip,e.closePath(),e.fill(),e.strokeStyle=r.lines,e.lineWidth=2,e.lineCap="butt",e.lineJoin="round",e.stroke(),e.shadowColor="transparent",e.setTransform(1,0,0,1,0,0)}function qe(e){return{lines:e?"#cccccc":"#202020",tip:e?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:e?"gray":"#d0d0d0"}}var Je=["canvas"],Z=class e{constructor(t){this.renderer=t;x(()=>{this.dibujar(this.state.angleDegrees(),this.handler(),this.size(),this.darkMode())})}maxMovement=12;mouseMoveSubscription=null;removeDocumentClickListenerFn=null;touchMoveSubscription=null;removeDocumentTouchEndListenerFn=null;state=g(y);presetAngles=[];shiftPressed=S(!1);canvasContext=null;handler=S(!1);size=z(100);darkMode=z(!1);canvas;onShiftKeyDown(t){this.shiftPressed()||(this.shiftPressed.set(!0),t.preventDefault())}onShiftKeyUp(t){this.shiftPressed()&&(this.shiftPressed.set(!1),t.preventDefault())}ngAfterViewInit(){this.mouseMoveSubscription=M(document,"mousemove").pipe(H(()=>this.handler()),k(1),oe(i=>console.log("Mouse moved",this.pointFromEvent(i))),w(i=>this.angleDegreesFromPoint(this.pointFromEvent(i))),w(i=>this.shiftPressed()?Math.round(i/45)*45:i),ne()).subscribe(i=>{this.state.onAngleDegreesChange(i)}),this.touchMoveSubscription=M(document,"touchmove").pipe(H(()=>this.handler()),k(1),oe(i=>console.log("Mouse moved",this.pointFromEvent(i))),w(i=>this.angleDegreesFromPoint(this.pointFromEvent(i))),w(i=>this.shiftPressed()?Math.round(i/45)*45:i),ne()).subscribe(i=>{this.state.onAngleDegreesChange(i)});let t=Math.round(this.size()*.84/2),n=Math.round(this.size()/2),o=t*.7071;this.presetAngles.push({angle:0,point:{x:n,y:n+t}}),this.presetAngles.push({angle:45,point:{x:n+o,y:n+o}}),this.presetAngles.push({angle:90,point:{x:n+t,y:n}}),this.presetAngles.push({angle:135,point:{x:n+o,y:n-o}}),this.presetAngles.push({angle:180,point:{x:n,y:n-t}}),this.presetAngles.push({angle:225,point:{x:n-o,y:n-o}}),this.presetAngles.push({angle:270,point:{x:n-t,y:n}}),this.presetAngles.push({angle:315,point:{x:n-o,y:n+o}}),this.dibujar(this.state.angleDegrees())}onDoubleClick(t){this.state.onAngleDegreesChange(0)}onMouseDown(t){this.checkPreset(this.pointFromEvent(t))||this.setHandlerSelected()}onTouchStart(t){this.checkPreset(this.pointFromEvent(t))||this.setHandlerSelected()}checkPreset(t){for(let n of this.presetAngles)if(I(n.point,t,7))return n.angle!==this.state.angleDegrees()?(this.state.onAngleDegreesChange(n.angle),!0):!1;return!1}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.handler.set(!1))}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(t){let n=Math.round(this.size()/2),o=(t.x-n)/n,i=(t.y-n)/n;if(Math.abs(o)<.1&&Math.abs(i)<.1)return this.state.angleDegrees();let r=Math.atan2(o,i),s=Math.round(r*180/Math.PI);s<0&&(s+=360);let a=s;if(!this.shiftPressed()){let l=this.state.angleDegrees(),d=Math.min(this.maxMovement,Math.abs(l-s)),c=l-s>180?d:l-s<-180?-d:l<s?d:-d;a=l+c}return a<0?a+360:a>=360?a-360:a}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.handler()&&this.stopTracking()}),this.removeDocumentClickListenerFn=this.renderer.listen("document","touchend",()=>{this.handler()&&this.stopTracking()})}dibujar(t,n=!1,o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{xe(r,t,o,n,i)})}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=i*2,s=n.getBoundingClientRect(),a=s.bottom-s.top-r;if(t instanceof TouchEvent){if(t.touches.length===0)return{x:0,y:0};let l=t.touches[0];return{x:l.clientX-s.left-i,y:l.clientY-s.top-i}}else return{x:t.clientX-s.left-i,y:a-(t.clientY-s.top-i)}}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.mouseMoveSubscription?.unsubscribe(),this.touchMoveSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)($(A))};static \u0275cmp=C({type:e,selectors:[["zz-orientation-compass"]],viewQuery:function(n,o){if(n&1&&W(Je,5),n&2){let i;Y(i=X())&&(o.canvas=i.first)}},hostBindings:function(n,o){n&1&&f("keydown.shift",function(r){return o.onShiftKeyDown(r)},!1,ie)("keyup.shift",function(r){return o.onShiftKeyUp(r)},!1,ie)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:4,consts:[["canvas",""],["id","canvas",1,"rounded-full","cursor-grab","bg-gris-500/20",3,"mousedown","touchstart","dblclick","width","height"]],template:function(n,o){if(n&1){let i=N();u(0,"div")(1,"canvas",1,0),f("mousedown",function(s){return D(i),_(o.onMouseDown(s))})("touchstart",function(s){return D(i),_(o.onTouchStart(s))})("dblclick",function(s){return D(i),_(o.onDoubleClick(s))}),p()()}n&2&&(v(),G("cursor-grabbing",o.handler()),b("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var Fe=class e{state=g(y);bezierSize=300;compassSize=100;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["zz-test-col"]],decls:11,vars:10,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[1,"relative","w-screen","min-h-[calc(100svh_-_50px)]","lg:grid-cols-[calc(50svw_-_194px)_385px_1fr]","pt-4","pb-8","lg:grid","lg:items-center","lg:justify-center"],[1,"col-2","w-fit","m-auto","flex","flex-col","lg:flex-row","items-center","lg:items-start","justify-center","gap-4"],[1,"",3,"size","darkMode"],[1,"flex","flex-col","items-center","gap-4"],[3,"size","darkMode"]],template:function(n,o){n&1&&(u(0,"div",0)(1,"div",1),P(2,"zz-gradients-header"),p(),u(3,"main",2)(4,"div",3),P(5,"zz-bezier-panel",4),u(6,"div",5),P(7,"zz-orientation-compass",6)(8,"zz-gradient-colors")(9,"zz-gradient-actions"),p()()()(),P(10,"zz-notification")),n&2&&(v(3),j("background",o.state.gradient().gradient),G("text-gris-900",!o.state.gradient().darkMode)("text-gris-100",o.state.gradient().darkMode),v(2),b("size",o.bezierSize)("darkMode",o.state.gradient().darkMode),v(2),b("size",o.compassSize)("darkMode",o.state.gradient().darkMode))},dependencies:[be,U,ge,K,Q,q,Z],encapsulation:2,changeDetection:0})};export{Fe as BezierGradientComponent};
