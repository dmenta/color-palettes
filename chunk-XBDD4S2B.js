import{a as be,b as ye,d as we,f as ie,g as Se,k as Me,l as He,m as xe,n as Ee}from"./chunk-ZZR6ASQF.js";import{$ as ue,$a as Ce,B as de,Da as v,Ea as he,Ma as f,N as pe,Na as w,Nb as ke,Oa as S,Pa as fe,Pb as De,Qb as Ge,Rb as Te,S as u,Sb as Pe,Ta as ge,Tb as ze,Ua as ve,Va as d,Vb as _e,Wa as p,Xa as C,Y as T,Ya as I,Yb as Le,Z as P,Zb as Fe,_ as me,_a as y,a as x,ab as A,b as te,bb as $,cb as j,dc as N,eb as _,ia as z,ka as b,p as E,sa as ne,ta as oe,u as O,ua as h,v as ce,wb as M,xa as B,xb as L,y as V,ya as R}from"./chunk-EC7MLDRM.js";var W=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(n,o){n&1&&(d(0,"header")(1,"div",0)(2,"h1",1),C(3,"zz-marca",2),p(),d(4,"div",3)(5,"a",4),_(6,"Palettes"),p(),C(7,"zz-dark-mode-toggle"),p()()()),n&2&&(h(3),f("format","horizontal"))},dependencies:[ye,Me],encapsulation:2,changeDetection:0})};var Oe=[{value:"to right",icon:"&#x2192;",class:"rotate-90"},{value:"to right bottom",icon:"&#x2198;",class:"rotate-135"},{value:"to bottom",icon:"&#x2193;",class:"rotate-180"},{value:"to left bottom",icon:"&#x2199;",class:"-rotate-135"},{value:"to left",icon:"&#x2190;",class:"-rotate-90"},{value:"to left top",icon:"&#x2196;",class:"-rotate-45"},{value:"to top",icon:"&#x2191;",class:"rotate-0"},{value:"to right top",icon:"&#x2197;",class:"rotate-45"}];var Ve={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:3.4,y:60},h2:{x:20,y:96.8}},orientation:"to top",angle:0};function Be(e){let n=e.h1.x,o=e.h2.x,i=100,r=0,a=e.h1.y,s=e.h2.y,l=100,c=[];for(let m=0;m<=1;m+=.05){let G=Math.pow(1-m,3)*0+3*Math.pow(1-m,2)*m*n+3*(1-m)*Math.pow(m,2)*o+Math.pow(m,3)*i,D=Math.pow(1-m,3)*r+3*Math.pow(1-m,2)*m*a+3*(1-m)*Math.pow(m,2)*s+Math.pow(m,3)*l;c.push({x:G,y:D})}return c.push({x:100,y:100}),c}function re(e,t,n=6){return t.x+n>e.x&&t.x-n<e.x&&t.y+n>e.y&&t.y-n<e.y}function Ie(e,t,n,o=null,i="to right"){let r=Ze(e,t),a=qe(e,t),s=Je(e,t),l=[],c=[];for(let D=0;D<n.length;D++){let H=n[D],ee=H.y/100,Qe=(ee*r.range+r.delta).toFixed(3),Ye=(ee*a.range+a.delta).toFixed(3),Xe=(ee*s.range+s.delta).toFixed(1),le=`oklch(${Qe} ${Ye} ${Xe})`;l.push({offset:H.x,color:le}),c.push({offset:H.x,color:we(le).color})}let m=et(n),G=o!==null?o+"deg":i;return{stops:l,gradient:Re(l,G,"oklch"),darkMode:Se(l[m].color)==="white",gradientRGB:Re(c,G,"srgb"),rgbStops:c}}function qe(e,t){return{range:t[1]-e[1],delta:e[1]}}function Ze(e,t){return{range:t[0]-e[0],delta:e[0]}}function Je(e,t){let n=t[2]-e[2],o=n>180?e[2]+360:e[2];return{range:(n<-180?t[2]+360:t[2])-o,delta:o}}function Re(e,t,n){return`linear-gradient(${t} in ${n}, ${e.map(o=>`${o.color} ${o.offset.toFixed(1)}%`).join(", ")})`}function et(e){let t=e.map(o=>o.x).filter(o=>o<=50).sort((o,i)=>i-o),n=e.map(o=>o.x).filter(o=>o>50).sort((o,i)=>o-i);return 50-t[0]<n[0]-50?t.length-1:t.length}var g=class e{store=u(be);initialState=this.store.get("gradient-state")??Ve;orientation=b(this.initialState.orientation);angleDegrees=b(this.initialState.angle);startRGBColor=b(this.initialState.colors.start);endRGBColor=b(this.initialState.colors.end);handlers=b(this.initialState.handlers);startOklch=M(()=>ie(this.rgbText(this.startRGBColor())));endOklch=M(()=>ie(this.rgbText(this.endRGBColor())));points=M(()=>Be(this.handlers()));startColor=M(()=>this.oklchText(this.startOklch()));endColor=M(()=>this.oklchText(this.endOklch()));gradient=M(()=>Ie(this.startOklch(),this.endOklch(),this.points(),this.angleDegrees()));currentState=M(()=>({colors:{start:this.startRGBColor(),end:this.endRGBColor()},handlers:this.handlers(),orientation:this.orientation(),angle:this.angleDegrees()}));constructor(){L(()=>this.store.save("gradient-state",this.currentState()))}onOrientationChange(t){this.orientation.set(t)}onAngleDegreesChange(t){this.angleDegrees.set(t)}onStartColorChange(t){this.startRGBColor.set(t)}onEndColorChange(t){this.endRGBColor.set(t)}onHandlersChange(t){this.handlers.set(x({},t))}rgbText(t){return`rgb(${Math.round(t[0])} ${Math.round(t[1])} ${Math.round(t[2])})`}oklchText(t){return`oklch(${t[0].toFixed(3)} ${t[1].toFixed(3)} ${t[2].toFixed(1)})`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})};var tt=(e,t)=>t.value;function nt(e,t){if(e&1&&(d(0,"label",3),C(1,"input",4),d(2,"span",5),_(3,"arrow_upward_alt"),p()()),e&2){let n=t.$implicit,o=t.$index,i=Ce();S("opacity-100",n.value===i.orientationGroup.value.orientation),f("for","radio"+o),h(),f("value",n.value)("id","radio"+o),h(),fe(n.class)}}var U=class e{valueChangeSubscription=null;orientationsValues=Oe;state=u(g);orientationGroup=new Te({orientation:new Pe(this.state.orientation(),{nonNullable:!0})});ngOnInit(){this.valueChangeSubscription=this.orientationGroup.valueChanges.subscribe(t=>{this.state.onOrientationChange(t.orientation??"to right bottom")})}ngOnDestroy(){this.valueChangeSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["zz-orientation-selector"]],decls:4,vars:1,consts:[[3,"formGroup"],[1,"select-none","flex","flex-row","gap-2"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"opacity-100","for"],[1,"transition-all","cursor-pointer","hover:opacity-80","has-checked:cursor-default","opacity-50","h-10","w-10","border-3","border-current/30","rounded-full","items-center","justify-center","has-checked:font-bold","has-checked:opacity-100","text-4xl","flex",3,"for"],["type","radio","formControlName","orientation",1,"hidden",3,"value","id"],[1,"font-icons"]],template:function(n,o){n&1&&(d(0,"form",0)(1,"div",1),ge(2,nt,4,7,"label",2,tt),p()()),n&2&&(f("formGroup",o.orientationGroup),h(2),ve(o.orientationsValues))},dependencies:[N,ze,ke,_e,De,Ge,Le,Fe],encapsulation:2,changeDetection:0})};var K=class e{state=u(g);onColorEndChange(t){this.state.onEndColorChange(t)}onColorStartChange(t){this.state.onStartColorChange(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],decls:3,vars:4,consts:[[1,"flex","flex-row","items-center","gap-4","w-full"],[3,"color-change","border","color"]],template:function(n,o){n&1&&(d(0,"div",0)(1,"zz-color-selector",1),y("color-change",function(r){return o.onColorStartChange(r)}),p(),d(2,"zz-color-selector",1),y("color-change",function(r){return o.onColorEndChange(r)}),p()()),n&2&&(h(),f("border","border-current/40")("color",o.state.startRGBColor()),h(),f("border","border-current/40")("color",o.state.endRGBColor()))},dependencies:[xe],encapsulation:2,changeDetection:0})};function Ne(e,t,n,o,i){let r=new OffscreenCanvas(n,n),a=r.getContext("2d");ot(a,n,i);let s=it(i),l=rt(i);je(a,{x:n,y:0},t.h2,s.line),Ae(a,t.h2,s.h2),je(a,{x:0,y:n},t.h1,s.line),Ae(a,t.h1,s.h1),o==="h1"?$e(a,t.h1,s.h1,s.shadow):o==="h2"&&$e(a,t.h2,s.h2,s.shadow),a.beginPath(),a.moveTo(0,n),a.strokeStyle=l,a.bezierCurveTo(t.h1.x,t.h1.y,t.h2.x,t.h2.y,n,0),a.lineWidth=2,a.stroke();let c=r.transferToImageBitmap();e.transferFromImageBitmap(c)}function ot(e,t,n){let o=at(n);e.beginPath(),e.rect(0,0,t,t),e.strokeStyle=o.border,e.lineWidth=1,e.stroke();let i=t/100;e.strokeStyle=o.lines,e.setLineDash([2,2]);for(let r=10;r<=90;r+=10)e.beginPath(),e.moveTo(0,r*i),e.lineTo(t,r*i),e.lineWidth=.5,e.stroke(),e.beginPath(),e.moveTo(r*i,0),e.lineTo(r*i,t),e.lineWidth=.5,e.stroke();e.setLineDash([])}function Ae(e,t,n){e.beginPath(),e.arc(t.x,t.y,7,0,Math.PI*2),e.fillStyle=n,e.fill()}function $e(e,t,n,o){e.shadowColor=o,e.shadowBlur=7,e.shadowOffsetX=5,e.shadowOffsetY=5,e.beginPath(),e.arc(t.x,t.y,10,0,Math.PI*2),e.strokeStyle=n,e.lineWidth=2,e.stroke(),e.shadowColor="transparent"}function je(e,t,n,o){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.strokeStyle=o,e.stroke()}function it(e){return{h1:e?"oklch(0.634 0.254 18)":"oklch(0.355 0.146 29)",h2:e?"oklch(0.858 0.146 197)":"oklch(0.377 0.1 247)",line:e?"#E0FFE0":"#305030",shadow:e?"#000000":"#202020"}}function rt(e){return e?"#D0D0D0":"#303030"}function at(e){return{lines:e?"#C0C0C0":"#606060",border:e?"#F0F0F0":"#101010"}}function Q(e,t){let n=100/t;return{x:Math.max(0,Math.min(e.x,t))*n,y:Math.max(0,Math.min(t-e.y,t))*n}}function ae(e,t){let n=t/100;return{x:Math.max(0,Math.min(e.x,100))*n,y:t-Math.max(0,Math.min(e.y,t))*n}}var st=["canvas"],Y=class e{constructor(t){this.renderer=t;L(()=>{let n=this.handlersToCanvas(this.state.handlers());this.dibujar(n,this.currentHandler(),this.size(),this.darkMode())})}mouseMoveSubscription=null;removeDocumentClickListenerFn=null;removeMouseLeaveListenerFn=null;removeMouseEnterListenerFn=null;lastTimeoutId=null;state=u(g);overHandler=b(null);currentHandler=b(null);size=z(200);darkMode=z(!1);canvas;canvasContext=null;ngAfterViewInit(){this.mouseMoveSubscription=O(this.canvas.nativeElement,"mousemove").pipe(V(1),E(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.canvas.nativeElement.oncontextlost=t=>{console.warn("Context lost",t)},this.dibujar(this.handlersToCanvas(this.state.handlers()))}onDoubleClick(t){let n=this.overHandler();n!==null&&this.state.onHandlersChange(te(x({},this.state.handlers()),{[n]:{x:50,y:50}}))}onMouseDown(t){let n=this.overHandler();n!==null&&this.setHandlerSelected(n)}onMouseMove(t){let n=this.pointFromEvent(t);if(!this.currentHandler()){let o=this.overHandler(),i=this.isOverHandler(n);if(o===i)return;this.overHandler.set(i)}this.updateHandlerCoords(n)}setStopTimeout(){this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3)}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.currentHandler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.currentHandler.set(null),this.clearStopTimeout())}setHandlerSelected(t){this.setListeners(),this.currentHandler.set(t)}updateHandlerCoords(t){let n=this.currentHandler();n!==null&&this.state.onHandlersChange(te(x({},this.state.handlers()),{[n]:t}))}isOverHandler(t){let n=this.state.handlers();return re(t,n.h1)?"h1":re(t,n.h2)?"h2":null}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.currentHandler()&&this.stopTracking()}),this.removeMouseLeaveListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseleave",()=>{this.currentHandler()!==null&&this.setStopTimeout()}),this.removeMouseEnterListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseenter",()=>{this.currentHandler()!==null&&this.clearStopTimeout()})}dibujar(t,n=this.currentHandler(),o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{Ne(r,t,o,n,i)})}handlersToCanvas(t){return{h1:ae(t.h1,this.size()),h2:ae(t.h2,this.size())}}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=parseFloat(o.paddingTop.replace("px",""))||0,s=(parseFloat(o.paddingBottom.replace("px",""))||0)+r,l=n.getBoundingClientRect(),c=l.bottom-l.top-s;return Q({x:t.clientX-l.left-i,y:t.clientY-l.top-r},c)}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.clearStopTimeout(),this.mouseMoveSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)(R(B))};static \u0275cmp=v({type:e,selectors:[["zz-bezier-panel"]],viewQuery:function(n,o){if(n&1&&A(st,5),n&2){let i;$(i=j())&&(o.canvas=i.first)}},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"bg-gris-500/20","rounded-lg",3,"mousedown","dblclick","width","height"]],template:function(n,o){if(n&1){let i=I();d(0,"div")(1,"canvas",1,0),y("mousedown",function(a){return T(i),P(o.onMouseDown(a))})("dblclick",function(a){return T(i),P(o.onDoubleClick(a))}),p()()}n&2&&(h(),w("padding",o.size()/10,"px"),S("cursor-grab",o.overHandler()!==null)("cursor-grabbing",o.currentHandler()!==null),f("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var X=class e{copyService=u(He);state=u(g);handleCopyShortcut(t){t.preventDefault(),this.copy()}handleSvgShortcut(t){t.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveSVG(){let t=this.toSVG();this.onSaveFile(`colorina-gradient-${new Date().valueOf()}`,"svg",t)}onSaveFile(t,n,o){let i=t+"."+n,r=o,a=new Blob([r],{type:"image/svg+xml"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download=i,s.click(),s.remove()}toSVG(){let t=this.state.orientation(),n=1920,o=1080,i=0,r=0,a=0,s=0;t.includes("right")&&(r=n),t.includes("left")&&(i=n),t.includes("bottom")&&(s=o),t.includes("top")&&(a=o);let l=this.state.gradient().rgbStops.map(c=>`        <stop offset="${(c.offset/100).toFixed(3)}" style="stop-color:${c.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 ${n} ${o}" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <rect x="0" y="0" width="${n}" height="${o}" style="fill:url(#_Linear1);"/>
    <defs>
        <linearGradient id="_Linear1" x1="${i}" y1="${a}" x2="${r}" y2="${s}" gradientUnits="userSpaceOnUse" >
${l}
        </linearGradient>
    </defs>
</svg>`}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(n,o){n&1&&y("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,oe)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,oe)},decls:8,vars:0,consts:[[1,"flex","justify-end","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"icon-button",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 110 63"],["id","S","d","M 5.482,31.319 C2.163,28.001 0.109,23.419 0.109,18.358 C0.109,8.232 8.322,0.024 18.443,0.024 C28.569,0.024 36.782,8.232 36.782,18.358 L26.042,18.358 C26.042,14.164 22.638,10.765 18.443,10.765 C14.249,10.765 10.850,14.164 10.850,18.358 C10.850,20.453 11.701,22.351 13.070,23.721 L13.075,23.721 C14.450,25.101 15.595,25.500 18.443,25.952 L18.443,25.952 C23.509,26.479 28.091,28.006 31.409,31.324 L31.409,31.324 C34.728,34.643 36.782,39.225 36.782,44.286 C36.782,54.412 28.569,62.625 18.443,62.625 C8.322,62.625 0.109,54.412 0.109,44.286 L10.850,44.286 C10.850,48.480 14.249,51.884 18.443,51.884 C22.638,51.884 26.042,48.480 26.042,44.286 C26.042,42.191 25.191,40.298 23.821,38.923 L23.816,38.923 C22.441,37.548 20.468,37.074 18.443,36.697 L18.443,36.692 C13.533,35.939 8.800,34.638 5.482,31.319 L5.482,31.319 L5.482,31.319 Z",2,"fill","currentColor"],["id","V","d","M 73.452,0.024 L60.482,62.625 L49.742,62.625 L36.782,0.024 L47.522,0.024 L55.122,36.687 L62.712,0.024 L73.452,0.024 Z",2,"fill","currentColor"],["id","G","d","M 91.792,25.952 L110.126,25.952 L110.126,44.286 L110.131,44.286 C110.131,54.413 101.918,62.626 91.792,62.626 C81.665,62.626 73.458,54.413 73.458,44.286 L73.458,44.286 L73.458,18.359 L73.453,18.359 C73.453,8.233 81.665,0.025 91.792,0.025 C101.913,0.025 110.126,8.233 110.126,18.359 L99.385,18.359 C99.385,14.169 95.981,10.765 91.792,10.765 C87.597,10.765 84.198,14.169 84.198,18.359 L84.198,44.286 L84.198,44.286 C84.198,48.481 87.597,51.880 91.792,51.880 C95.981,51.880 99.380,48.481 99.385,44.291 L99.385,44.286 L99.385,36.698 L91.792,36.698 L91.792,25.952 L91.792,25.952 Z",2,"fill","currentColor"],["title","Copy gradient (Ctrl+Shift+C)",1,"icon-button",3,"click"]],template:function(n,o){n&1&&(d(0,"div",0)(1,"button",1),y("click",function(){return o.saveSVG()}),me(),d(2,"svg",2),C(3,"path",3)(4,"path",4)(5,"path",5),p()(),ue(),d(6,"button",6),y("click",function(){return o.copy()}),_(7,"content_copy"),p()())},encapsulation:2,changeDetection:0})};var q=class e{state=u(g);static \u0275fac=function(n){return new(n||e)};static \u0275dir=he({type:e,selectors:[["","zz-gradient-reference",""]],hostVars:2,hostBindings:function(n,o){n&2&&w("background","linear-gradient(to right in oklch, "+o.state.startColor()+" 0%, "+o.state.endColor()+" 100%)")}})};function Ue(e,t,n=100,o=!1,i=!1){let r=new OffscreenCanvas(n,n),a=r.getContext("2d");if(!a)return;pt(a,n,i),lt(a,t,n,i),ht(a,t,n,o,i);let s=r.transferToImageBitmap();e.transferFromImageBitmap(s)}function lt(e,t,n,o){let i=Math.round(n/2);e.font="20px 'Noto Sans'",e.fillStyle=o?"oklch(0.904 0.104 18 / 0.9)":"oklch(0.334 0.244 18 / 0.8)";let r=e.measureText(t.toFixed(0)+"\xB0"),a=t>=90&&t<=270?-10:5+r.fontBoundingBoxAscent;e.fillText(t.toFixed(0)+"\xB0",4+i-r.width/2,i+a)}var ct=.84,dt=.85;function pt(e,t,n){let o=Math.round(t/2);e.beginPath(),e.arc(o,o,o,0,Math.PI*2),e.lineWidth=.5,e.fillStyle="#80808040",e.fill();let i=Math.round(ct*o),r=mt(n);e.beginPath(),e.arc(o,o,i,0,Math.PI*2),e.strokeStyle=r.border,e.lineWidth=.5,e.stroke(),e.setLineDash([2,2]),e.strokeStyle="#8080890",e.arc(o,o,i*.5,0,Math.PI*2),e.stroke(),e.strokeStyle=r.lines;for(let a=0;a<=11;a++){let s=Math.PI*2/12*a,l=Math.cos(s)*i,c=Math.sin(s)*i,m=l+o,G=c+o,D=l*.5+o,H=c*.5+o;e.beginPath(),e.moveTo(m,G),e.lineTo(D,H),e.lineWidth=.5,e.stroke()}e.setLineDash([])}function mt(e){return{lines:e?"#cccccc":"#606060",border:e?"#DDDDDD":"#404040"}}var We=5,se=14,Z=8,ut=-3;function ht(e,t,n,o,i){let r=ft(i),a=Math.round(n/2),s=Math.round(dt*a);e.translate(a,a),e.rotate((t-180)*Math.PI/180);let l=s;o&&(e.shadowColor=i?"#303030":"#606060",e.shadowBlur=7,e.shadowOffsetX=3,e.shadowOffsetY=3),e.beginPath(),e.moveTo(0,l),e.lineTo(0,0),e.strokeStyle=r.lines,e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle=r.toe,e.fill(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.strokeStyle=r.lines,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(0,s+Z),e.lineTo(-We,s-se+Z),e.lineTo(0,s-se+Z+ut),e.lineTo(We,s-se+Z),e.fillStyle=r.tip,e.closePath(),e.fill(),e.strokeStyle=r.lines,e.lineWidth=2,e.lineCap="butt",e.lineJoin="round",e.stroke(),e.shadowColor="transparent",e.setTransform(1,0,0,1,0,0)}function ft(e){return{lines:e?"#cccccc":"#606060",tip:e?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:e?"gray":"#d0d0d0"}}var gt=["canvas"],J=class e{constructor(t){this.renderer=t;L(()=>{this.dibujar(this.state.angleDegrees(),this.handler(),this.size(),this.darkMode())})}mouseMoveSubscription=null;removeDocumentClickListenerFn=null;removeMouseLeaveListenerFn=null;removeMouseEnterListenerFn=null;lastTimeoutId=null;state=u(g);handler=b(!1);size=z(100);darkMode=z(!1);controlPressed=b(!1);canvas;canvasContext=null;onControlKeyDown(t){this.controlPressed()||(this.controlPressed.set(!0),t.preventDefault())}onControlKeyUp(t){this.controlPressed()&&(this.controlPressed.set(!1),t.preventDefault())}ngAfterViewInit(){this.mouseMoveSubscription=O(this.canvas.nativeElement,"mousemove").pipe(ce(()=>this.handler()),V(3),E(t=>this.angleDegreesFromPoint(this.pointFromEvent(t))),E(t=>this.controlPressed()?Math.round(t/45)*45:t),de()).subscribe(t=>{this.state.onAngleDegreesChange(t),console.log("Angle updated:",t)}),this.dibujar(this.state.angleDegrees())}onDoubleClick(t){this.state.onAngleDegreesChange(0)}onMouseDown(t){this.setHandlerSelected()}setStopTimeout(){this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3)}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.handler.set(!1),this.clearStopTimeout())}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(t){let n=Math.round(this.size()/2),o=(t.x-n)/n,i=(t.y-n)/n;if(Math.abs(o)<.3&&Math.abs(i)<.3)return this.state.angleDegrees();let r=Math.atan2(o,i),a=Math.round(r*180/Math.PI),s=a;if(!this.controlPressed()){let l=this.state.angleDegrees(),c=Math.abs(l-a);Math.abs(c)>180?(c=360-Math.abs(c),s=Math.min(l,a)-c/15):s=Math.min(l,a)+c/15}return s<0?s+360:s>360?s-360:s}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.handler()&&this.stopTracking()}),this.removeMouseLeaveListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseleave",()=>{this.handler()!==null&&this.setStopTimeout()}),this.removeMouseEnterListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseenter",()=>{this.handler()!==null&&this.clearStopTimeout()})}dibujar(t,n=!1,o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{Ue(r,t,o,n,i)})}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=i*2,a=n.getBoundingClientRect(),s=a.bottom-a.top-r;return Q({x:t.clientX-a.left-i,y:t.clientY-a.top-i},s)}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.clearStopTimeout(),this.mouseMoveSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)(R(B))};static \u0275cmp=v({type:e,selectors:[["zz-orientation-compass"]],viewQuery:function(n,o){if(n&1&&A(gt,5),n&2){let i;$(i=j())&&(o.canvas=i.first)}},hostBindings:function(n,o){n&1&&y("keydown.control",function(r){return o.onControlKeyDown(r)},!1,ne)("keyup.control",function(r){return o.onControlKeyUp(r)},!1,ne)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:6,consts:[["canvas",""],["id","canvas",1,"rounded-full","cursor-grab",3,"mousedown","dblclick","width","height"]],template:function(n,o){if(n&1){let i=I();d(0,"div")(1,"canvas",1,0),y("mousedown",function(a){return T(i),P(o.onMouseDown(a))})("dblclick",function(a){return T(i),P(o.onDoubleClick(a))}),p()()}n&2&&(h(),w("padding",o.size()/2,"px"),S("cursor-grabbing",o.handler()),f("width",o.size())("height",o.size()))},encapsulation:2})};var Ke=class e{state=u(g);bezierSize=350;compassSize=100;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["zz-test-col"]],decls:12,vars:10,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[1,"relative","w-screen","min-h-[calc(100svh_-_50px)]","p-4","flex","flex-col","items-center","justify-center","gap-4"],[1,"absolute","bottom-0","right-0",3,"size","darkMode"],[3,"size","darkMode"],[1,"flex","flex-row","items-center","justify-between","gap-4","w-[350px]"],[1,"hidden"],["zz-gradient-reference","",1,"hidden","absolute","top-0","left-0","right-0","h-[50px]","z-1"]],template:function(n,o){n&1&&(d(0,"div",0)(1,"div",1),C(2,"zz-gradients-header"),p(),d(3,"main",2),C(4,"zz-orientation-compass",3)(5,"zz-bezier-panel",4),d(6,"div",5),C(7,"zz-gradient-colors")(8,"zz-gradient-actions"),p(),C(9,"zz-orientation-selector",6)(10,"div",7),p()(),C(11,"zz-notification")),n&2&&(h(3),w("background",o.state.gradient().gradient),S("text-gris-900",!o.state.gradient().darkMode)("text-gris-100",o.state.gradient().darkMode),h(),f("size",o.compassSize)("darkMode",o.state.gradient().darkMode),h(),f("size",o.bezierSize)("darkMode",o.state.gradient().darkMode))},dependencies:[Ee,W,N,U,K,Y,X,q,J],encapsulation:2,changeDetection:0})};export{Ke as BezierGradientComponent};
