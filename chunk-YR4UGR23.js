import{a as me,b as pe,d as he,f as te,g as ue,k as fe,l as ve,m as Ce,n as be}from"./chunk-5QXAWAOM.js";import{$ as ce,B as ae,Da as g,Ma as v,N as le,Na as M,Oa as L,S as h,Va as m,Wa as p,Xa as y,Y as D,Ya as R,Z as T,_ as de,_a as C,a as H,ab as I,b as Z,bb as A,cb as $,cc as ge,eb as j,ia as P,ka as f,p as F,sa as J,ta as ee,u as V,ua as u,v as se,wb as w,xa as O,xb as z,y as B,ya as x}from"./chunk-5WW2A7FO.js";var N=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(n,o){n&1&&(m(0,"header")(1,"div",0)(2,"h1",1),y(3,"zz-marca",2),p(),m(4,"div",3)(5,"a",4),j(6,"Palettes"),p(),y(7,"zz-dark-mode-toggle"),p()()()),n&2&&(u(3),v("format","horizontal"))},dependencies:[pe,fe],encapsulation:2,changeDetection:0})};var ye={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:3.4,y:60},h2:{x:20,y:96.8}},orientation:"to top",angle:0};function we(e){let n=e.h1.x,o=e.h2.x,i=100,r=0,s=e.h1.y,a=e.h2.y,l=100,d=[];for(let c=0;c<=1;c+=.05){let k=Math.pow(1-c,3)*0+3*Math.pow(1-c,2)*c*n+3*(1-c)*Math.pow(c,2)*o+Math.pow(c,3)*i,S=Math.pow(1-c,3)*r+3*Math.pow(1-c,2)*c*s+3*(1-c)*Math.pow(c,2)*a+Math.pow(c,3)*l;d.push({x:k,y:S})}return d.push({x:100,y:100}),d}function ne(e,t,n=6){return t.x+n>e.x&&t.x-n<e.x&&t.y+n>e.y&&t.y-n<e.y}function Me(e,t,n,o=null,i="to right"){let r=Ve(e,t),s=Ee(e,t),a=Be(e,t),l=[],d=[];for(let S=0;S<n.length;S++){let G=n[S],q=G.y/100,Ge=(q*r.range+r.delta).toFixed(3),He=(q*s.range+s.delta).toFixed(3),Fe=(q*a.range+a.delta).toFixed(1),re=`oklch(${Ge} ${He} ${Fe})`;l.push({offset:G.x,color:re}),d.push({offset:G.x,color:he(re).color})}let c=Oe(n),k=o!==null?o+"deg":i;return{stops:l,gradient:Se(l,k,"oklch"),darkMode:ue(l[c].color)==="white",gradientRGB:Se(d,k,"srgb"),rgbStops:d}}function Ee(e,t){return{range:t[1]-e[1],delta:e[1]}}function Ve(e,t){return{range:t[0]-e[0],delta:e[0]}}function Be(e,t){let n=t[2]-e[2],o=n>180?e[2]+360:e[2];return{range:(n<-180?t[2]+360:t[2])-o,delta:o}}function Se(e,t,n){return`linear-gradient(${t} in ${n}, ${e.map(o=>`${o.color} ${o.offset.toFixed(1)}%`).join(", ")})`}function Oe(e){let t=e.map(o=>o.x).filter(o=>o<=50).sort((o,i)=>i-o),n=e.map(o=>o.x).filter(o=>o>50).sort((o,i)=>o-i);return 50-t[0]<n[0]-50?t.length-1:t.length}var b=class e{store=h(me);initialState=this.store.get("gradient-state")??ye;orientation=f(this.initialState.orientation);angleDegrees=f(this.initialState.angle);startRGBColor=f(this.initialState.colors.start);endRGBColor=f(this.initialState.colors.end);handlers=f(this.initialState.handlers);startOklch=w(()=>te(this.rgbText(this.startRGBColor())));endOklch=w(()=>te(this.rgbText(this.endRGBColor())));points=w(()=>we(this.handlers()));startColor=w(()=>this.oklchText(this.startOklch()));endColor=w(()=>this.oklchText(this.endOklch()));gradient=w(()=>Me(this.startOklch(),this.endOklch(),this.points(),this.angleDegrees()));currentState=w(()=>({colors:{start:this.startRGBColor(),end:this.endRGBColor()},handlers:this.handlers(),orientation:this.orientation(),angle:this.angleDegrees()}));constructor(){z(()=>this.store.save("gradient-state",this.currentState()))}onOrientationChange(t){this.orientation.set(t)}onAngleDegreesChange(t){this.angleDegrees.set(t)}onStartColorChange(t){this.startRGBColor.set(t)}onEndColorChange(t){this.endRGBColor.set(t)}onHandlersChange(t){this.handlers.set(H({},t))}rgbText(t){return`rgb(${Math.round(t[0])} ${Math.round(t[1])} ${Math.round(t[2])})`}oklchText(t){return`oklch(${t[0].toFixed(3)} ${t[1].toFixed(3)} ${t[2].toFixed(1)})`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=le({token:e,factory:e.\u0275fac,providedIn:"root"})};var W=class e{state=h(b);onColorEndChange(t){this.state.onEndColorChange(t)}onColorStartChange(t){this.state.onStartColorChange(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["zz-gradient-colors"]],hostAttrs:[1,"w-full"],decls:3,vars:4,consts:[[1,"flex","flex-row","items-center","justify-center","gap-4","w-full"],[1,"shadow-md",3,"color-change","border","color"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"zz-color-selector",1),C("color-change",function(r){return o.onColorStartChange(r)}),p(),m(2,"zz-color-selector",1),C("color-change",function(r){return o.onColorEndChange(r)}),p()()),n&2&&(u(),v("border","border-current/40")("color",o.state.startRGBColor()),u(),v("border","border-current/40")("color",o.state.endRGBColor()))},dependencies:[Ce],encapsulation:2,changeDetection:0})};function Pe(e,t,n,o,i){let r=new OffscreenCanvas(n,n),s=r.getContext("2d");xe(s,n,i);let a=Re(i),l=Ie(i);Te(s,{x:n,y:0},t.h2,a.line),ke(s,t.h2,a.h2),Te(s,{x:0,y:n},t.h1,a.line),ke(s,t.h1,a.h1),o==="h1"?De(s,t.h1,a.h1,a.shadow):o==="h2"&&De(s,t.h2,a.h2,a.shadow),s.beginPath(),s.moveTo(0,n),s.strokeStyle=l,s.bezierCurveTo(t.h1.x,t.h1.y,t.h2.x,t.h2.y,n,0),s.lineWidth=2,s.stroke();let d=r.transferToImageBitmap();e.transferFromImageBitmap(d)}function xe(e,t,n){let o=Ae(n);e.beginPath(),e.rect(0,0,t,t),e.strokeStyle=o.border,e.lineWidth=1,e.stroke();let i=t/100;e.strokeStyle=o.lines,e.setLineDash([2,2]);for(let r=10;r<=90;r+=10)e.beginPath(),e.moveTo(0,r*i),e.lineTo(t,r*i),e.lineWidth=.5,e.stroke(),e.beginPath(),e.moveTo(r*i,0),e.lineTo(r*i,t),e.lineWidth=.5,e.stroke();e.setLineDash([])}function ke(e,t,n){e.beginPath(),e.arc(t.x,t.y,7,0,Math.PI*2),e.fillStyle=n,e.fill()}function De(e,t,n,o){e.shadowColor=o,e.shadowBlur=7,e.shadowOffsetX=5,e.shadowOffsetY=5,e.beginPath(),e.arc(t.x,t.y,10,0,Math.PI*2),e.strokeStyle=n,e.lineWidth=2,e.stroke(),e.shadowColor="transparent"}function Te(e,t,n,o){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.strokeStyle=o,e.stroke()}function Re(e){return{h1:e?"oklch(0.634 0.254 18)":"oklch(0.355 0.146 29)",h2:e?"oklch(0.858 0.146 197)":"oklch(0.377 0.1 247)",line:e?"#E0FFE0":"#305030",shadow:e?"#000000":"#202020"}}function Ie(e){return e?"#D0D0D0":"#303030"}function Ae(e){return{lines:e?"#C0C0C0":"#606060",border:e?"#F0F0F0":"#101010"}}function U(e,t){let n=100/t;return{x:Math.max(0,Math.min(e.x,t))*n,y:Math.max(0,Math.min(t-e.y,t))*n}}function oe(e,t){let n=t/100;return{x:Math.max(0,Math.min(e.x,100))*n,y:t-Math.max(0,Math.min(e.y,t))*n}}var $e=["canvas"],K=class e{constructor(t){this.renderer=t;z(()=>{let n=this.handlersToCanvas(this.state.handlers());this.dibujar(n,this.currentHandler(),this.size(),this.darkMode())})}mouseMoveSubscription=null;removeDocumentClickListenerFn=null;removeMouseLeaveListenerFn=null;removeMouseEnterListenerFn=null;lastTimeoutId=null;state=h(b);overHandler=f(null);currentHandler=f(null);size=P(200);darkMode=P(!1);canvas;canvasContext=null;ngAfterViewInit(){this.mouseMoveSubscription=V(this.canvas.nativeElement,"mousemove").pipe(B(1),F(t=>t)).subscribe(t=>{this.onMouseMove(t)}),this.canvas.nativeElement.oncontextlost=t=>{console.warn("Context lost",t)},this.dibujar(this.handlersToCanvas(this.state.handlers()))}onDoubleClick(t){let n=this.overHandler();n!==null&&this.state.onHandlersChange(Z(H({},this.state.handlers()),{[n]:{x:50,y:50}}))}onMouseDown(t){let n=this.overHandler();n!==null&&this.setHandlerSelected(n)}onMouseMove(t){let n=this.pointFromEvent(t);if(!this.currentHandler()){let o=this.overHandler(),i=this.isOverHandler(n);if(o===i)return;this.overHandler.set(i)}this.updateHandlerCoords(n)}setStopTimeout(){this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3)}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.currentHandler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.currentHandler.set(null),this.clearStopTimeout())}setHandlerSelected(t){this.setListeners(),this.currentHandler.set(t)}updateHandlerCoords(t){let n=this.currentHandler();n!==null&&this.state.onHandlersChange(Z(H({},this.state.handlers()),{[n]:t}))}isOverHandler(t){let n=this.state.handlers();return ne(t,n.h1)?"h1":ne(t,n.h2)?"h2":null}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.currentHandler()&&this.stopTracking()}),this.removeMouseLeaveListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseleave",()=>{this.currentHandler()!==null&&this.setStopTimeout()}),this.removeMouseEnterListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseenter",()=>{this.currentHandler()!==null&&this.clearStopTimeout()})}dibujar(t,n=this.currentHandler(),o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{Pe(r,t,o,n,i)})}handlersToCanvas(t){return{h1:oe(t.h1,this.size()),h2:oe(t.h2,this.size())}}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=parseFloat(o.paddingTop.replace("px",""))||0,a=(parseFloat(o.paddingBottom.replace("px",""))||0)+r,l=n.getBoundingClientRect(),d=l.bottom-l.top-a;return U({x:t.clientX-l.left-i,y:t.clientY-l.top-r},d)}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.clearStopTimeout(),this.mouseMoveSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)(x(O))};static \u0275cmp=g({type:e,selectors:[["zz-bezier-panel"]],viewQuery:function(n,o){if(n&1&&I($e,5),n&2){let i;A(i=$())&&(o.canvas=i.first)}},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"bg-gris-500/20","rounded-lg",3,"mousedown","dblclick","width","height"]],template:function(n,o){if(n&1){let i=R();m(0,"div")(1,"canvas",1,0),C("mousedown",function(s){return D(i),T(o.onMouseDown(s))})("dblclick",function(s){return D(i),T(o.onDoubleClick(s))}),p()()}n&2&&(u(),M("padding",o.size()/10,"px"),L("cursor-grab",o.overHandler()!==null)("cursor-grabbing",o.currentHandler()!==null),v("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var Q=class e{copyService=h(ve);state=h(b);handleCopyShortcut(t){t.preventDefault(),this.copy()}handleSvgShortcut(t){t.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveSVG(){let t=this.toSVG();this.onSaveFile(`colorina-gradient-${new Date().valueOf()}`,"svg",t)}onSaveFile(t,n,o){let i=t+"."+n,r=o,s=new Blob([r],{type:"image/svg+xml"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=i,a.click(),a.remove()}toSVG(){let t=this.state.orientation(),n=1920,o=1080,i=0,r=0,s=0,a=0;t.includes("right")&&(r=n),t.includes("left")&&(i=n),t.includes("bottom")&&(a=o),t.includes("top")&&(s=o);let l=this.state.gradient().rgbStops.map(d=>`        <stop offset="${(d.offset/100).toFixed(3)}" style="stop-color:${d.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 ${n} ${o}" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <rect x="0" y="0" width="${n}" height="${o}" style="fill:url(#_Linear1);"/>
    <defs>
        <linearGradient id="_Linear1" x1="${i}" y1="${s}" x2="${r}" y2="${a}" gradientUnits="userSpaceOnUse" >
${l}
        </linearGradient>
    </defs>
</svg>`}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(n,o){n&1&&C("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,ee)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,ee)},decls:8,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"icon-button","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 110 63"],["id","S","d","M 5.482,31.319 C2.163,28.001 0.109,23.419 0.109,18.358 C0.109,8.232 8.322,0.024 18.443,0.024 C28.569,0.024 36.782,8.232 36.782,18.358 L26.042,18.358 C26.042,14.164 22.638,10.765 18.443,10.765 C14.249,10.765 10.850,14.164 10.850,18.358 C10.850,20.453 11.701,22.351 13.070,23.721 L13.075,23.721 C14.450,25.101 15.595,25.500 18.443,25.952 L18.443,25.952 C23.509,26.479 28.091,28.006 31.409,31.324 L31.409,31.324 C34.728,34.643 36.782,39.225 36.782,44.286 C36.782,54.412 28.569,62.625 18.443,62.625 C8.322,62.625 0.109,54.412 0.109,44.286 L10.850,44.286 C10.850,48.480 14.249,51.884 18.443,51.884 C22.638,51.884 26.042,48.480 26.042,44.286 C26.042,42.191 25.191,40.298 23.821,38.923 L23.816,38.923 C22.441,37.548 20.468,37.074 18.443,36.697 L18.443,36.692 C13.533,35.939 8.800,34.638 5.482,31.319 L5.482,31.319 L5.482,31.319 Z",2,"fill","currentColor"],["id","V","d","M 73.452,0.024 L60.482,62.625 L49.742,62.625 L36.782,0.024 L47.522,0.024 L55.122,36.687 L62.712,0.024 L73.452,0.024 Z",2,"fill","currentColor"],["id","G","d","M 91.792,25.952 L110.126,25.952 L110.126,44.286 L110.131,44.286 C110.131,54.413 101.918,62.626 91.792,62.626 C81.665,62.626 73.458,54.413 73.458,44.286 L73.458,44.286 L73.458,18.359 L73.453,18.359 C73.453,8.233 81.665,0.025 91.792,0.025 C101.913,0.025 110.126,8.233 110.126,18.359 L99.385,18.359 C99.385,14.169 95.981,10.765 91.792,10.765 C87.597,10.765 84.198,14.169 84.198,18.359 L84.198,44.286 L84.198,44.286 C84.198,48.481 87.597,51.880 91.792,51.880 C95.981,51.880 99.380,48.481 99.385,44.291 L99.385,44.286 L99.385,36.698 L91.792,36.698 L91.792,25.952 L91.792,25.952 Z",2,"fill","currentColor"],["title","Copy gradient (Ctrl+Shift+C)",1,"icon-button","shadow-md",3,"click"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"button",1),C("click",function(){return o.saveSVG()}),de(),m(2,"svg",2),y(3,"path",3)(4,"path",4)(5,"path",5),p()(),ce(),m(6,"button",6),C("click",function(){return o.copy()}),j(7,"content_copy"),p()())},encapsulation:2,changeDetection:0})};function ze(e,t,n=100,o=!1,i=!1){let r=new OffscreenCanvas(n,n),s=r.getContext("2d");if(!s)return;Ue(s,n,i),je(s,t,n,i),Ye(s,t,n,o,i);let a=r.transferToImageBitmap();e.transferFromImageBitmap(a)}function je(e,t,n,o){let i=Math.round(n/2);e.font="20px 'Noto Sans'",e.fillStyle=o?"oklch(0.904 0.104 18 / 0.9)":"oklch(0.334 0.244 18 / 0.8)";let r=e.measureText(t.toFixed(0)+"\xB0"),s=t>=90&&t<=270?-10:5+r.fontBoundingBoxAscent;e.fillText(t.toFixed(0)+"\xB0",4+i-r.width/2,i+s)}var Ne=.84,We=.85;function Ue(e,t,n){let o=Math.round(t/2);e.beginPath(),e.arc(o,o,o,0,Math.PI*2),e.lineWidth=.5,e.fillStyle="#80808040",e.fill();let i=Math.round(Ne*o),r=Ke(n);e.beginPath(),e.arc(o,o,i,0,Math.PI*2),e.strokeStyle=r.border,e.lineWidth=.5,e.stroke(),e.setLineDash([2,2]),e.strokeStyle="#8080890",e.arc(o,o,i*.5,0,Math.PI*2),e.stroke(),e.strokeStyle=r.lines;for(let s=0;s<=11;s++){let a=Math.PI*2/12*s,l=Math.cos(a)*i,d=Math.sin(a)*i,c=l+o,k=d+o,S=l*.5+o,G=d*.5+o;e.beginPath(),e.moveTo(c,k),e.lineTo(S,G),e.lineWidth=.5,e.stroke()}e.setLineDash([])}function Ke(e){return{lines:e?"#cccccc":"#606060",border:e?"#DDDDDD":"#404040"}}var Le=5,ie=14,Y=8,Qe=-3;function Ye(e,t,n,o,i){let r=Xe(i),s=Math.round(n/2),a=Math.round(We*s);e.translate(s,s),e.rotate((t-180)*Math.PI/180);let l=a;o&&(e.shadowColor=i?"#303030":"#606060",e.shadowBlur=7,e.shadowOffsetX=3,e.shadowOffsetY=3),e.beginPath(),e.moveTo(0,l),e.lineTo(0,0),e.strokeStyle=r.lines,e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle=r.toe,e.fill(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.strokeStyle=r.lines,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(0,a+Y),e.lineTo(-Le,a-ie+Y),e.lineTo(0,a-ie+Y+Qe),e.lineTo(Le,a-ie+Y),e.fillStyle=r.tip,e.closePath(),e.fill(),e.strokeStyle=r.lines,e.lineWidth=2,e.lineCap="butt",e.lineJoin="round",e.stroke(),e.shadowColor="transparent",e.setTransform(1,0,0,1,0,0)}function Xe(e){return{lines:e?"#cccccc":"#606060",tip:e?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:e?"gray":"#d0d0d0"}}var qe=["canvas"],X=class e{constructor(t){this.renderer=t;z(()=>{this.dibujar(this.state.angleDegrees(),this.handler(),this.size(),this.darkMode())})}mouseMoveSubscription=null;removeDocumentClickListenerFn=null;removeMouseLeaveListenerFn=null;removeMouseEnterListenerFn=null;lastTimeoutId=null;state=h(b);handler=f(!1);size=P(100);darkMode=P(!1);controlPressed=f(!1);canvas;canvasContext=null;onControlKeyDown(t){this.controlPressed()||(this.controlPressed.set(!0),t.preventDefault())}onControlKeyUp(t){this.controlPressed()&&(this.controlPressed.set(!1),t.preventDefault())}ngAfterViewInit(){this.mouseMoveSubscription=V(this.canvas.nativeElement,"mousemove").pipe(se(()=>this.handler()),B(1),F(t=>this.angleDegreesFromPoint(this.pointFromEvent(t))),F(t=>this.controlPressed()?Math.round(t/45)*45:t),ae()).subscribe(t=>{this.state.onAngleDegreesChange(t),console.log("Angle updated:",t)}),this.dibujar(this.state.angleDegrees())}onDoubleClick(t){this.state.onAngleDegreesChange(0)}onMouseDown(t){this.setHandlerSelected()}setStopTimeout(){this.clearStopTimeout(),this.lastTimeoutId=window.setTimeout(()=>this.stopTracking(),1e3)}clearStopTimeout(){this.lastTimeoutId&&(window.clearTimeout(this.lastTimeoutId),this.lastTimeoutId=null)}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.handler.set(!1),this.clearStopTimeout())}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(t){let n=Math.round(this.size()/2),o=(t.x-n)/n,i=(t.y-n)/n;if(Math.abs(o)<.3&&Math.abs(i)<.3)return this.state.angleDegrees();let r=Math.atan2(o,i),s=Math.round(r*180/Math.PI),a=s;if(!this.controlPressed()){let l=this.state.angleDegrees(),d=Math.abs(l-s);Math.abs(d)>180?(d=360-Math.abs(d),a=Math.min(l,s)-d/15):a=Math.min(l,s)+d/15}return a<0?a+360:a>360?a-360:a}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>{this.handler()&&this.stopTracking()}),this.removeMouseLeaveListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseleave",()=>{this.handler()!==null&&this.setStopTimeout()}),this.removeMouseEnterListenerFn=this.renderer.listen(this.canvas.nativeElement,"mouseenter",()=>{this.handler()!==null&&this.clearStopTimeout()})}dibujar(t,n=!1,o=this.size(),i=this.darkMode()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvas.nativeElement.getContext("bitmaprenderer"));let r=this.canvasContext;requestAnimationFrame(()=>{ze(r,t,o,n,i)})}pointFromEvent(t){let n=this.canvas?.nativeElement;if(!n)return{x:0,y:0};let o=window.getComputedStyle(n),i=parseFloat(o.paddingLeft.replace("px",""))||0,r=i*2,s=n.getBoundingClientRect(),a=s.bottom-s.top-r;return U({x:t.clientX-s.left-i,y:t.clientY-s.top-i},a)}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeMouseLeaveListenerFn?.(),this.removeMouseEnterListenerFn?.(),this.clearStopTimeout(),this.mouseMoveSubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)(x(O))};static \u0275cmp=g({type:e,selectors:[["zz-orientation-compass"]],viewQuery:function(n,o){if(n&1&&I(qe,5),n&2){let i;A(i=$())&&(o.canvas=i.first)}},hostBindings:function(n,o){n&1&&C("keydown.control",function(r){return o.onControlKeyDown(r)},!1,J)("keyup.control",function(r){return o.onControlKeyUp(r)},!1,J)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:6,consts:[["canvas",""],["id","canvas",1,"rounded-full","cursor-grab",3,"mousedown","dblclick","width","height"]],template:function(n,o){if(n&1){let i=R();m(0,"div")(1,"canvas",1,0),C("mousedown",function(s){return D(i),T(o.onMouseDown(s))})("dblclick",function(s){return D(i),T(o.onDoubleClick(s))}),p()()}n&2&&(u(),M("padding",o.size()/2,"px"),L("cursor-grabbing",o.handler()),v("width",o.size())("height",o.size()))},encapsulation:2})};var _e=class e{state=h(b);bezierSize=350;compassSize=100;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["zz-test-col"]],decls:11,vars:16,consts:[[1,"bg-application","w-screen","h-screen","overflow-x-hidden"],[1,"sticky","bg-application","z-20","top-0","left-0","right-0","shadow-md","dark:shadow-black/60"],[1,"relative","w-screen","min-h-[calc(100svh_-_50px)]","px-8","pt-4","pb-8","grid","items-center","justify-center"],[1,"w-fit","m-auto","flex","flex-row","items-start","justify-center"],[3,"size","darkMode"],[1,"flex","flex-col","gap-4","-mr-36"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"div",1),y(2,"zz-gradients-header"),p(),m(3,"main",2)(4,"div",3),y(5,"zz-bezier-panel",4),m(6,"div",5),y(7,"zz-orientation-compass",4)(8,"zz-gradient-colors")(9,"zz-gradient-actions"),p()()()(),y(10,"zz-notification")),n&2&&(u(3),M("background",o.state.gradient().gradient),L("text-gris-900",!o.state.gradient().darkMode)("text-gris-100",o.state.gradient().darkMode),u(2),v("size",o.bezierSize)("darkMode",o.state.gradient().darkMode),u(2),M("margin-inline",-(o.compassSize/4),"px")("margin-top",-(o.compassSize/4),"px")("margin-bottom",-(o.compassSize/3),"px"),v("size",o.compassSize)("darkMode",o.state.gradient().darkMode))},dependencies:[be,N,ge,W,K,Q,X],encapsulation:2,changeDetection:0})};export{_e as BezierGradientComponent};
