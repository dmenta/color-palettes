import{b as de,d as ue,g as K,h as _,k as he,l as pe}from"./chunk-AG74TOS6.js";import{$a as se,C as L,Ca as P,L as E,La as I,Na as ie,Q as Z,T as k,Ua as b,Va as v,Wa as U,Xa as re,Z as ee,Za as y,_ as te,ab as ae,bb as le,db as x,ha as N,ja as V,p as f,ra as W,sa as j,ta as A,u as w,v as H,vb as Y,w as T,wa as ne,wb as ce,xa as oe,z}from"./chunk-MLHRJ3PS.js";var me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["zz-gradients-header"]],decls:8,vars:1,consts:[[1,"flex","items-center","justify-center","md:justify-between","m-auto","h-[50px]","pl-6","pr-4","py-1","max-w-[1600px]","leading-8"],[1,"text-2xl","opacity-90"],[3,"format"],[1,"hidden","md:flex","items-center","gap-4"],["href","palettes",1,"text-smaller","opacity-85","hover:opacity-100"]],template:function(e,o){e&1&&(b(0,"header")(1,"div",0)(2,"h1",1),U(3,"zz-marca",2),v(),b(4,"div",3)(5,"a",4),x(6,"Palettes"),v(),U(7,"zz-dark-mode-toggle"),v()()()),e&2&&(A(3),I("format","horizontal"))},dependencies:[de,he],encapsulation:2,changeDetection:0})};var $=new Z("GRADIENT_STATE");function ve(t,n,e,o=0){let i=ze(t,n),r=He(t,n),s=Ae(t,n),c=[],u=[];for(let a=0;a<e.length;a++){let d=e[a],p=d.y/100,m=(p*i.range+i.delta).toFixed(3),g=(p*r.range+r.delta).toFixed(3),C=(p*s.range+s.delta).toFixed(1),S=`oklch(${m} ${g} ${C})`;c.push({offset:d.x,color:S}),u.push({offset:d.x,color:ue(S).color})}let h=Ie(e);return{stops:c,gradient:B(c,o,"oklch"),darkMode:K(c[h].color)==="white",gradientRGB:B(u,o,"srgb"),rgbStops:u}}function nt(t,n,e,o,i=0){let r=Math.floor(o.length/2),s=ve(t,n,o.slice(0,r),i),c=ve(n,e,o.slice(r),i);return{stops:[...s.stops.slice(0,-1),...c.stops.slice(1)],gradient:B([...s.stops.slice(0,-1),...c.stops.slice(1)],i,"oklch"),darkMode:K(s.stops.slice(-3,-2)[0].color)==="white",gradientRGB:B([...s.rgbStops.slice(0,-1),...c.rgbStops.slice(1)],i,"srgb"),rgbStops:[...s.rgbStops.slice(0,-1),...c.rgbStops.slice(1)]}}function He(t,n){return{range:n[1]-t[1],delta:t[1]}}function ze(t,n){return{range:n[0]-t[0],delta:t[0]}}function Ae(t,n){let e=n[2]-t[2],o=e>180?t[2]+360:t[2];return{range:(e<-180?n[2]+360:n[2])-o,delta:o}}function B(t,n,e){return`linear-gradient(${n}deg in ${e}, ${t.map(o=>`${o.color} ${o.offset.toFixed(1)}%`).join(", ")})`}function Ie(t){let n=t.map(o=>o.x).filter(o=>o<=50).sort((o,i)=>i-o),e=t.map(o=>o.x).filter(o=>o>50).sort((o,i)=>o-i);return 50-n[0]<e[0]-50?Math.min(t.length-1,n.length-1):Math.min(t.length-1,n.length)}var be=new Date(2025,0,1).valueOf();function Ce(t,n=0,e={width:1920,height:1080},o=""){o=encodeURI(o.trim());let i=document.createElement("canvas");i.width=e.width,i.height=e.height;let r=i.getContext("2d");if(!r){console.error("No se pudo obtener el contexto del canvas");return}let{x1:s,y1:c,x2:u,y2:h}=Se(i.width,i.height,n),a=r.createLinearGradient(s,c,u,h);for(let m=0;m<t.length;m++){let g=t[m];a.addColorStop(g.offset/100,g.color)}r.fillStyle=a,r.beginPath(),r.rect(0,0,i.width,i.height),r.fill();let d=document.createElement("a"),p=i.toDataURL("image/png",1);d.href=p,d.download=`colorina-gradient-${o}${o.length>0?"-":""}${new Date().valueOf()-be}.png`,d.click(),d.remove()}function ye(t,n=0,e=""){e=encodeURI(e.trim());let o=$e(t,n),i=new Blob([o],{type:"image/svg+xml"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=`colorina-gradient-${e}${e.length>0?"-":""}${new Date().valueOf()-be}.svg`,r.click(),r.remove()}function $e(t,n=0){let i=Math.max(1920,1080),r=Math.min(1920,1080),s=Math.sqrt(1920*1920+1080*1080),{x1:c,y1:u,x2:h,y2:a,hypotenusa:d}=Se(1920,1080,n);d=Math.abs(d);let p=(i-d)/2,m=(r-s)/2,g=t.map(C=>`        <stop offset="${(C.offset/100).toFixed(3)}" style="stop-color:${C.color};stop-opacity:1"/>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 1920 1080" version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">

    <rect x="${p}" y="${m}" width="${d}" height="${s}"  style=" transform-origin: center center; transform: rotate(${n-90}deg); fill:url(#_Linear1);"/>
    <rect x="0" y="0" width="1920" height="1080" stroke="black" fill="none" />

  <defs>
        <linearGradient id="_Linear1" x1="${p}" y1="0" x2="${d}" y2="0" gradientUnits="userSpaceOnUse" >
${g}
        </linearGradient>
    </defs>
</svg>`}function Se(t,n,e){let o=t/2,i=n/2,r=Math.sin((e+90)*Math.PI*2/360),s=Math.cos((e+90)*Math.PI*2/360),c=Math.sqrt(o*o+i*i),u=c*s,h=Math.abs(i*r),a=c*r,d=Math.abs(o*s);a<-i?a=Math.max(a,-i-d):a>i&&(a=Math.min(a,i+d)),u<-o?u=Math.max(u,-o-h):u>o&&(u=Math.min(u,o+h));let p=Math.sqrt(u*u+a*a)*2;return{x1:o+u,y1:i+a,x2:o-u,y2:i-a,hypotenusa:p}}var we=class t{copyService=k(pe);state=k($);handleCopyShortcut(n){n.preventDefault(),this.copy()}handleSvgShortcut(n){n.preventDefault(),this.copy()}copy(){this.copyService.copy(this.state.gradient().gradient,"Gradient  copied!")}saveAsImage(){let n=this.state.startRGBColor(),e=this.state.endRGBColor(),o=this.state.angleDegrees(),i=`${_(n)}_${_(e)}_${o}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;Ce(this.state.gradient().rgbStops,this.state.angleDegrees(),this.displayDimensions(),i)}saveSVG(){let n=this.state.startRGBColor(),e=this.state.endRGBColor(),o=this.state.angleDegrees(),i=`${_(n)}_${_(e)}_${o}deg_${this.displayDimensions().width}x${this.displayDimensions().height}`;ye(this.state.gradient().rgbStops,this.state.angleDegrees(),i)}displayDimensions(){if(!("ontouchstart"in document.documentElement))return{width:1920,height:1080};let e=window.innerWidth??document.documentElement.clientWidth??1920,o=screen.height??window.innerHeight??1080,i=window.devicePixelRatio||1;return{width:Math.floor(e*i),height:Math.floor(o*i)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["zz-gradient-actions"]],hostAttrs:[1,"block","w-full"],hostBindings:function(e,o){e&1&&y("keydown.control.shift.c",function(r){return o.handleCopyShortcut(r)},!1,j)("keydown.control.shift.g",function(r){return o.handleSvgShortcut(r)},!1,j)},decls:7,vars:0,consts:[[1,"flex","justify-center","gap-2","w-full"],["title","Download gradient as SVG (Ctrl+Shift+G)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Save png gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"],["title","Copy gradient (Ctrl+Shift+C)",1,"font-button","shadow-md","w-10","border-[1px]",3,"click"]],template:function(e,o){e&1&&(b(0,"div",0)(1,"button",1),y("click",function(){return o.saveSVG()}),x(2," SVG "),v(),b(3,"button",2),y("click",function(){return o.saveAsImage()}),x(4," PNG "),v(),b(5,"button",3),y("click",function(){return o.copy()}),x(6," COPY "),v()())},encapsulation:2,changeDetection:0})};var l={value:t=>Math.round(t),point:t=>({x:l.value(t.x),y:l.value(t.y)}),bezierCoord:t=>Math.round(t*100)/100},De={pointFromEvent:Be};function Be(t,n){if(!t)return{x:0,y:0};let e=window.getComputedStyle(t),o=parseFloat(e.paddingLeft.replace("px",""))||0,i=parseFloat(e.paddingTop.replace("px",""))||0,r=t.getBoundingClientRect();if(n instanceof TouchEvent){if(n.touches.length===0)return{x:0,y:0};let s=n.touches[0];return{x:s.clientX-r.left-o,y:s.clientY-r.top-i}}else return{x:n.clientX-r.left-o,y:n.clientY-r.top-i}}function Pe(t){return{lines:t?"#909090":"#606060",border:t?"#a0a0a0":"#505050",preset:t?"#888888":"#777777",presetHover:t?"#C0C0C0":"#333333",activePreset:t?"#ffffff":"#000000"}}function xe(t){return{lines:t?"#cccccc":"#202020",tip:t?"oklch(0.355 0.146 29)":"oklch(0.634 0.254 18)",toe:t?"gray":"#d0d0d0"}}var O=2e3,Oe=.7,Fe=.9;function Ge(t,n,e=100,o=null,i=!1,r=!1){let s=new OffscreenCanvas(e,e),c=s.getContext("2d");if(!c)return;let u=e/O,h=O/2,a={diameter:e,ratio:u,radio:O/2,gridRadio:Oe*h,center:l.value(u*h),presetSize:Fe*h,virtualSize:O},d=a.gridRadio*.95,p=je/a.diameter*a.virtualSize,m={size:d,arrowInsetValue:Ue/a.diameter*a.virtualSize,arrowOverflowValue:p,arrowWideValue:Ne/a.diameter*a.virtualSize,arrowTipBase:d-We/a.diameter*a.virtualSize+p,arrowTip:d+p};Le(c,a,o,n,r),Ye(c,n,a,m,i,r);let g=s.transferToImageBitmap();t.transferFromImageBitmap(g)}function Le(t,n,e=null,o=0,i){t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio),0,Math.PI*2),t.lineWidth=1,t.fillStyle="#7A736E33",t.fill(),t.setLineDash([]),t.strokeStyle="transparent";let r=Pe(i);t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio),0,Math.PI*2),t.moveTo(n.center,n.center),t.strokeStyle=r.border,t.lineWidth=1,t.stroke(),t.beginPath(),t.arc(n.center,n.center,l.value(n.ratio*n.gridRadio*.2),0,Math.PI*2),t.lineWidth=1,t.strokeStyle=r.lines,t.stroke(),t.strokeStyle=r.lines;for(let s=0;s<=7;s++){let c=Math.PI*2/8*s,u=Math.cos(c),h=Math.sin(c),a=n.gridRadio*u*1.1,d=n.gridRadio*h*1.1,p=a+n.radio,m=d+n.radio,g=a*.75+n.radio,C=d*.75+n.radio;t.beginPath(),t.moveTo(l.value(n.ratio*p),l.value(n.ratio*m)),t.lineTo(l.value(n.ratio*g),l.value(n.ratio*C)),t.lineWidth=1,t.stroke();let S=(s+2)%8*45,R=o===S,D=R?r.activePreset:!R&&e!==null&&e===S?r.presetHover:r.preset,G=u*n.presetSize+n.radio,M=h*n.presetSize+n.radio;t.beginPath(),t.arc(l.value(n.ratio*G),l.value(n.ratio*M),4,0,Math.PI*2),t.fillStyle=D,t.fill()}}var Ne=5,We=14,je=4,Ue=-3;function Ye(t,n,e,o,i,r){let s=xe(r);t.translate(e.center,e.center),t.rotate((n-180)*Math.PI/180),i&&(t.shadowColor=r?"#303030":"#606060",t.shadowBlur=7,t.shadowOffsetX=3,t.shadowOffsetY=3),t.beginPath(),t.moveTo(0,l.value(e.ratio*o.size)),t.lineTo(0,0),t.strokeStyle=s.lines,t.lineWidth=2,t.stroke(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.fillStyle=s.toe,t.fill(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.strokeStyle=s.lines,t.lineWidth=1,t.stroke(),t.beginPath(),t.moveTo(0,l.value(e.ratio*o.arrowTip)),t.lineTo(l.value(e.ratio*-o.arrowWideValue),l.value(e.ratio*o.arrowTipBase)),t.lineTo(0,l.value(e.ratio*(o.arrowTipBase+o.arrowInsetValue))),t.lineTo(l.value(e.ratio*o.arrowWideValue),l.value(e.ratio*o.arrowTipBase)),t.fillStyle=s.tip,t.closePath(),t.fill(),t.strokeStyle=s.lines,t.lineWidth=2,t.lineCap="butt",t.lineJoin="round",t.stroke(),t.shadowColor="transparent",t.setTransform(1,0,0,1,0,0)}function Me(t,n,e=3){let o=Math.round(t),i=Math.abs(n.x),r=Math.abs(n.y);return Math.sqrt(i*i+r*r)-e<=o}function Te(t){return t<0?t+360:t>=360?t-360:t}function Ee(t,n,e=9){return n.x+e>t.x&&n.x-e<t.x&&n.y+e>t.y&&n.y-e<t.y}var Ke=["canvas"],ke=class t{constructor(n){this.renderer=n;ce(()=>{this.dibujar(this.anglesInDegrees(),this.handler(),this.size(),this.darkMode())})}maxMovement=12;radioSizeRatio=.7;presetSizeRatio=.9;canvasMoveSubscription=null;moveSubscription=null;grabHandlerSubscription=null;removeDocumentClickListenerFn=null;removeDocumentTouchEndListenerFn=null;state=k($);anglesInDegrees=Y(()=>this.state.angleDegrees());presetAngles=[];shiftPressed=V(!1);canvasContext=null;handler=V(!1);overPreset=V(null);inside=V(!1);size=N(100);darkMode=N(!1);radius=Y(()=>Math.round(this.size()/2));canvas;canvasRealSize=0;get canvasElement(){return this.canvas?.nativeElement}onShiftKeyDown(n){this.shiftPressed()||(this.shiftPressed.set(!0),n.preventDefault())}onShiftKeyUp(n){this.shiftPressed()&&(this.shiftPressed.set(!1),n.preventDefault())}ngAfterViewInit(){this.createPresetAngles(),this.subcribeToEvents(),this.canvasRealSize=this.realSize(),this.dibujar(this.anglesInDegrees())}subcribeToEvents(){this.moveSubscription=H(w(document,"mousemove").pipe(f(e=>e)),w(document,"touchmove",{passive:!1}).pipe(f(e=>e))).pipe(T(()=>this.handler()),E(e=>e.preventDefault()),z(1),f(e=>this.angleDegreesFromPoint(this.pointFromEvent(e))),f(e=>this.calculateAngleMovement(e)),L()).subscribe(e=>{this.state.onAngleDegreesChange(e)});let n=w(this.canvasElement,"mousemove").pipe(f(e=>e),T(()=>!this.handler()),E(e=>e.preventDefault()),z(1),f(e=>{let o=this.radius(),i=this.pointFromEvent(e),r=Math.round(o*this.radioSizeRatio);return Me(r,{x:i.x-o,y:i.y-o},3)?{inside:!0,preset:null}:{inside:!1,preset:this.isOverPreset(i)}}));this.canvasMoveSubscription=H(n,w(this.canvasElement,"mouseleave").pipe(E(e=>e.preventDefault()),f(()=>({inside:!1,preset:null})))).pipe(L((e,o)=>e.inside===o.inside&&e.preset===o.preset)).subscribe(e=>{this.inside.set(e.inside),this.overPreset.set(e.preset)}),this.grabHandlerSubscription=H(w(this.canvasElement,"mousedown").pipe(T(()=>this.inside()||this.overPreset()!==null),f(e=>e)),w(this.canvasElement,"touchstart",{passive:!1}).pipe(f(e=>e))).pipe(T(()=>!this.handler()),E(e=>e.preventDefault()),z(1),f(e=>this.pointFromEvent(e))).subscribe(e=>{this.onGrabHandler(e)})}onDoubleClick(n){this.state.onAngleDegreesChange(0)}onGrabHandler(n){let e=this.isOverPreset(n);if(e!==null){this.state.onAngleDegreesChange(e);return}this.setHandlerSelected()}isOverPreset(n){if(this.inside())return null;for(let e of this.presetAngles)if(Ee(e.point,n,14))return e.angle!==this.anglesInDegrees()?e.angle:null;return null}stopTracking(){this.handler()!==null&&(this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.handler.set(!1))}setHandlerSelected(){this.setListeners(),this.handler.set(!0)}angleDegreesFromPoint(n){let e=this.radius(),o=(n.x-e)/e,i=(n.y-e)/e;if(Math.abs(o)<.1&&Math.abs(i)<.1)return this.anglesInDegrees();let r=Math.atan2(o,i),s=Math.round(r*180/Math.PI);return s<0&&(s+=360),s}calculateAngleMovement(n){if(this.shiftPressed())return Math.round(n/45)*45;let e=this.anglesInDegrees(),o=Math.min(this.maxMovement,Math.abs(e-n)),i=e-n>180?o:e-n<-180?-o:e<n?o:-o;return Te(e+i)}setListeners(){this.removeDocumentClickListenerFn=this.renderer.listen("document","mouseup",()=>this.stopTracking()),this.removeDocumentClickListenerFn=this.renderer.listen("document","touchend",()=>this.stopTracking(),{passive:!0})}createPresetAngles(){let n=Math.round(this.size()*this.presetSizeRatio/2),e=Math.round(this.size()/2),o=n*.7071;this.presetAngles.push({angle:0,point:{x:e,y:e+n}}),this.presetAngles.push({angle:45,point:{x:e+o,y:e+o}}),this.presetAngles.push({angle:90,point:{x:e+n,y:e}}),this.presetAngles.push({angle:135,point:{x:e+o,y:e-o}}),this.presetAngles.push({angle:180,point:{x:e,y:e-n}}),this.presetAngles.push({angle:225,point:{x:e-o,y:e-o}}),this.presetAngles.push({angle:270,point:{x:e-n,y:e}}),this.presetAngles.push({angle:315,point:{x:e-o,y:e+o}})}dibujar(n,e=!1,o=this.size(),i=this.darkMode(),r=this.overPreset()){if(!this.canvas)return;this.canvasContext===null&&(this.canvasContext=this.canvasElement.getContext("bitmaprenderer"));let s=this.canvasContext;requestAnimationFrame(()=>{Ge(s,n,o,r,e,i)})}pointFromEvent(n){let e=De.pointFromEvent(this.canvasElement,n);return{x:e.x,y:this.canvasRealSize-e.y}}realSize(){let n=this.canvasElement,e=window.getComputedStyle(n),i=2*(parseFloat(e.paddingBottom.replace("px",""))||0),r=n.getBoundingClientRect();return r.bottom-r.top-i}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentTouchEndListenerFn?.(),this.canvasMoveSubscription?.unsubscribe(),this.moveSubscription?.unsubscribe(),this.grabHandlerSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(oe(ne))};static \u0275cmp=P({type:t,selectors:[["zz-orientation-compass"]],viewQuery:function(e,o){if(e&1&&se(Ke,5),e&2){let i;ae(i=le())&&(o.canvas=i.first)}},hostBindings:function(e,o){e&1&&y("keydown.shift",function(r){return o.onShiftKeyDown(r)},!1,W)("keyup.shift",function(r){return o.onShiftKeyUp(r)},!1,W)},inputs:{size:[1,"size"],darkMode:[1,"darkMode"]},decls:3,vars:8,consts:[["canvas",""],["id","canvas",1,"rounded-full",3,"dblclick","width","height"]],template:function(e,o){if(e&1){let i=re();b(0,"div")(1,"canvas",1,0),y("dblclick",function(s){return ee(i),te(o.onDoubleClick(s))}),v()()}e&2&&(A(),ie("cursor-grabbing",o.handler())("cursor-grab",o.inside())("cursor-pointer",o.overPreset()!==null),I("width",o.size())("height",o.size()))},encapsulation:2,changeDetection:0})};var $t={colors:{start:[249,147,52],end:[7,10,95]},handlers:{h1:{x:6.8,y:120},h2:{x:40,y:193.6}},angle:0},Bt={colors:{start:[249,147,52],center:[255,0,0],end:[7,10,95]},center:{x:1e3,y:1e3},handlers:{h1:{x:333,y:333},h2:{x:666,y:666},h3:{x:1333,y:1333},h4:{x:1666,y:1666}},angle:0};var Ve={points:(t,n,e,o=0,i=0,r=1,s=1,c=0,u=0,h=20)=>{h=Math.max(1,h);let a=0,d=l.value((t.h1.x+o)/n*100),p=l.value((t.h2.x+o)/n*100),m=100,g=0,C=l.value((t.h1.y+i)/e*100),S=l.value((t.h2.y+i)/e*100),R=100,F=[];for(let D=0;D<=h;D+=1){let G=D/h,M=(h-D)/h,X=Math.pow(M,3),q=3*Math.pow(M,2)*G,Q=3*M*Math.pow(G,2),J=Math.pow(G,3),_e=X*a+q*d+Q*p+J*m,Re=X*g+q*C+Q*S+J*R;F.push({x:l.bezierCoord(_e*r)+c,y:l.bezierCoord(Re*s)+u})}return F},doublePoints:(t,n,e)=>{let o=l.value(n.x),i=l.value(n.y),r=o/e;return console.log("datos",{h1:t.h3,h2:t.h4},e-o,e-i,-o,-i),Ve.points({h1:t.h1,h2:t.h2},o,i,0,0,r,1,0,0,10).concat(Ve.points({h1:t.h3,h2:t.h4},e-o,e-i,-o,-i,1-r,1,o/e*100,0,10))}};export{me as a,$ as b,l as c,De as d,Ee as e,ve as f,nt as g,we as h,$t as i,Bt as j,Ve as k,ke as l};
