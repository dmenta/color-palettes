import{b as H,c as B,d as O,e as $,f as K,g as j,h as L,k as W,l as q,m as J,n as Q,o as U,p as X}from"./chunk-YSQ33PW7.js";import{Da as d,H as N,Ja as c,K as S,Kb as D,Lb as F,Mb as E,Na as u,Nb as T,Ob as k,Sa as a,Sb as I,Ta as l,Tb as A,Ua as s,Va as z,Xa as g,Y as x,Ya as p,Yb as R,Z as _,Zb as v,ca as P,cb as y,db as h,ga as G,ia as C,kb as V,qa as m,u as M,za as f}from"./chunk-GI7T4GG4.js";function ne(r,o){if(r&1&&(a(0,"form",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label",6),h(5,"Model"),l(),s(6,"zz-select",7,0),l(),a(8,"div",5)(9,"label",6),h(10,"Variable"),l(),s(11,"zz-select",8,1),l()()()()),r&2){let e=y(7),n=y(12),t=p();c("formGroup",t.configGroup),m(4),c("for",e.selectId),m(2),c("upperCase",!0)("items",t.models),m(3),c("for",n.selectId),m(2),c("items",t.configGroup.controls.model.value.components)}}var b=class r{models=H;variableSelection=G(!0);configGroup=void 0;colorConfigChange=new P;ngOnInit(){let o=B.oklch;this.configGroup=new E({model:new T(o,{nonNullable:!0}),variable:new T({value:o.components[o.defaultVariableIndex],disabled:!this.variableSelection()},{nonNullable:!0})}),M(this.configGroup.controls.model.valueChanges.pipe(S(e=>{if(e){let n=e.components[e.defaultVariableIndex];this.configGroup?.controls.variable.setValue(n)}})),this.configGroup.controls.variable.valueChanges).pipe(N(this.configGroup.value)).subscribe(()=>{let e=this.configGroup.controls.model.value,n=this.configGroup.controls.variable.value;this.colorConfigChange.emit({model:e,variable:n,variableIndex:e.components.findIndex(t=>t.name===n.name)})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["zz-color-config"]],inputs:{variableSelection:[1,"variableSelection"]},outputs:{colorConfigChange:"colorConfigChange"},decls:1,vars:1,consts:[["colorModel",""],["colorVariable",""],[1,"h-fit","w-full",2,"font-size","0.9em","line-height","0.9rem",3,"formGroup"],["zz-panel","",1,"p-4","h-fit","w-full"],[1,"opacity-80","space-y-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"min-w-14",3,"for"],["displayKey","name","formControlName","model",1,"w-full",3,"upperCase","items"],["displayKey","name","formControlName","variable",1,"w-full",3,"items"]],template:function(e,n){e&1&&d(0,ne,13,6,"form",2),e&2&&u(n.configGroup?0:-1)},dependencies:[R,k,D,F,v,I,A,q,W],encapsulation:2})};var w=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["zz-color-palette-header"]],decls:5,vars:0,consts:[[1,"bg-gris-100/50","dark:bg-gris-800"],[1,"flex","items-center","justify-between","px-8","m-auto","max-w-[1300px]","leading-8"],[1,"text-3xl","m-0","font-museo-moderno","leading-7","text-orange-600","dark:text-orange-500"]],template:function(e,n){e&1&&(a(0,"header",0)(1,"nav",1)(2,"h1",2),h(3,"CoLoRina"),l(),s(4,"zz-dark-mode-toggle"),l()())},dependencies:[X],encapsulation:2})};var te=()=>({alto:47,continuo:!0,pasos:60,automatico:!0,showValues:"no"});function re(r,o){if(r&1){let e=z();a(0,"zz-color-range-selector",10),g("colorChange",function(t){x(e);let i=p();return _(i.colorChange(t))})("rangeChange",function(t){x(e);let i=p();return _(i.rangeChange(t))}),l(),s(1,"zz-color-axis",11)}if(r&2){let e=o,n=p();c("color-config",e)("axis-config",V(9,te))("color-base",n.colorBase()),m(),c("color-config",e)("axis-config",n.axisConfig())("color-base",n.currentColor())("showClamp",!0)("min",n.minmax()[0])("max",n.minmax()[1])}}function ie(r,o){if(r&1){let e=z();a(0,"zz-color-sample",12),g("newColor",function(t){x(e);let i=p();return _(i.onNewColor(t))}),l()}if(r&2){let e=p();c("height",200)("color-model",o.model)("current-color",e.currentColor())}}var ee=class r{colorConfig=C(void 0);axisConfig=C(void 0);colorBase=C([0,0,0]);minmax=C([0,0]);currentColor=C([0,0,0]);configChanged(o){this.axisConfig.set(o)}colorConfigChanged(o){let e=this.colorConfig()?.model.convert(this.currentColor()),n=o.model?.defaultValues()??[0,0,0];if(o.model.name===this.colorConfig()?.model.name&&(n=this.currentColor()),e)switch(o.model.name){case"hsl":n=K(e);break;case"oklch":n=j(e);break;default:n=$(e)}this.colorConfig.set(o),this.minmax.set(o.variable?[o.variable.min,o.variable.max]:[0,0]),this.colorBase.set(n),this.currentColor.set(n)}colorChange(o){this.currentColor.set(o)}rangeChange(o){this.minmax.set(o)}onNewColor(o){let e=this.getChannels(o);this.colorBase.set(e),this.currentColor.set(e)}getChannels(o){let e=this.colorConfig()?.model;if(!e||e.name==="rgb")return o;let n=new O(`rgb(${o[0]} ${o[1]} ${o[2]})`).to(e.name),t=this.ensureCoord(n.coords[0],e.components[0]),i=this.ensureCoord(n.coords[1],e.components[1]),oe=this.ensureCoord(n.coords[2],e.components[2]);return[t,i,oe]}ensureCoord(o,e){let n=Number.isNaN(o)?0:o;return Math.max(0,Math.min(e.max,n))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["zz-color-palette"]],decls:12,vars:2,consts:[[1,"w-screen","h-screen","grid","grid-rows-[48px_minmax(500px,_1fr)]"],[1,"h-[calc(100vh-48px)]","overflow-y-auto"],[1,"md:grid","md:grid-cols-[minmax(500px,_1fr)_280px]","w-screen","max-w-[1300px]","mx-auto","p-8","h-[calc(100svh-48px)]","md:gap-8","items-top","flex","flex-col-reverse"],[1,"relative","flex","flex-col"],[1,"flex","flex-col-reverse","gap-4","md:flex-col"],[3,"height","color-model","current-color"],[1,"w-full"],[3,"colorConfigChange"],[1,"w-full","md:block","hidden"],[3,"axisConfigChange"],[3,"colorChange","rangeChange","color-config","axis-config","color-base"],[1,"block","p-6","mt-6",3,"color-config","axis-config","color-base","showClamp","min","max"],[3,"newColor","height","color-model","current-color"]],template:function(e,n){if(e&1&&(a(0,"div",0),s(1,"zz-color-palette-header"),a(2,"main",1)(3,"div",2)(4,"div",3),d(5,re,2,10),l(),a(6,"div",4),d(7,ie,1,3,"zz-color-sample",5),a(8,"div",6)(9,"zz-color-config",7),g("colorConfigChange",function(i){return n.colorConfigChanged(i)}),l()(),a(10,"div",8)(11,"zz-color-axis-config",9),g("axisConfigChange",function(i){return n.configChanged(i)}),l()()()()()()),e&2){let t,i;m(5),u((t=n.colorConfig())?5:-1,t),m(2),u((i=n.colorConfig())?7:-1,i)}},dependencies:[v,L,U,Q,J,b,w],encapsulation:2})};export{ee as ColorPaletteComponent};
